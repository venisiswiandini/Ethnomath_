<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ETHNOMATH - Ethnomathematics Twin Shapes</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <style>
        /* Enhanced Glass Card Effect */
        .glass-card {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 25px 45px rgba(0, 0, 0, 0.1);
        }

        /* Enhanced Neon Button */
        .neon-button {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 25%, #FF8C00 50%, #FF6347 75%, #FF4500 100%);
            box-shadow: 0 10px 30px rgba(255, 215, 0, 0.4), inset 0 2px 0 rgba(255, 255, 255, 0.3);
            text-shadow: 2px 2px 4px rgba(255, 255, 255, 0.9), 1px 1px 2px rgba(255, 255, 255, 0.8), 0 0 6px rgba(255, 255, 255, 0.6);
            border: 3px solid rgba(255, 215, 0, 0.6);
            user-select: none;
            -webkit-user-select: none;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }
        
        /* Global button improvements */
        button {
            user-select: none;
            -webkit-user-select: none;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
            outline: none;
            border: none;
        }
        
        button:focus {
            outline: 2px solid #3B82F6;
            outline-offset: 2px;
        }
        
        button:active {
            transform: scale(0.98);
        }

        .neon-button:hover {
            background: linear-gradient(135deg, #FFA500 0%, #FF8C00 25%, #FF6347 50%, #FF4500 75%, #DC143C 100%);
            box-shadow: 0 15px 40px rgba(255, 165, 0, 0.6), inset 0 2px 0 rgba(255, 255, 255, 0.4);
        }

        /* Enhanced Neon Text */
        .neon-text {
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.8), 0 0 20px rgba(255, 255, 255, 0.6), 0 0 30px rgba(255, 255, 255, 0.4);
        }

        /* Enhanced Glow Effect */
        .glow-effect {
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.3), 0 0 40px rgba(255, 255, 255, 0.2), 0 0 60px rgba(255, 255, 255, 0.1);
        }

        /* Enhanced Holographic Effect */
        .holographic {
            background: linear-gradient(45deg, rgba(255, 0, 150, 0.1), rgba(0, 255, 255, 0.1), rgba(255, 255, 0, 0.1), rgba(255, 0, 150, 0.1));
            background-size: 400% 400%;
            animation: holographic 4s ease-in-out infinite;
        }

        @keyframes holographic {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        /* Enhanced Floating Animation */
        .floating {
            animation: floating 3s ease-in-out infinite;
        }

        @keyframes floating {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        /* Enhanced Bounce-in-3D Animation */
        .bounce-in-3d {
            animation: bounceIn3D 1s ease-out;
        }

        @keyframes bounceIn3D {
            0% {
                transform: scale3d(0.3, 0.3, 0.3) rotateX(20deg) rotateY(20deg);
                opacity: 0;
            }
            20% {
                transform: scale3d(1.1, 1.1, 1.1) rotateX(-10deg) rotateY(-10deg);
            }
            40% {
                transform: scale3d(0.9, 0.9, 0.9) rotateX(5deg) rotateY(5deg);
            }
            60% {
                transform: scale3d(1.03, 1.03, 1.03) rotateX(-2deg) rotateY(-2deg);
                opacity: 1;
            }
            80% {
                transform: scale3d(0.97, 0.97, 0.97) rotateX(1deg) rotateY(1deg);
            }
            100% {
                transform: scale3d(1, 1, 1) rotateX(0deg) rotateY(0deg);
                opacity: 1;
            }
        }

        /* Enhanced Card Hover Effect */
        .card-hover {
            transition: all 0.3s ease;
        }

        .card-hover:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.2);
        }

        /* Enhanced Slide Animations */
        .slide-in-left {
            animation: slideInLeft 0.8s ease-out;
        }

        .slide-in-right {
            animation: slideInRight 0.8s ease-out;
        }

        .slide-in-up {
            animation: slideInUp 0.8s ease-out;
        }

        .slide-in-down {
            animation: slideInDown 0.8s ease-out;
        }

        @keyframes slideInLeft {
            from {
                transform: translateX(-100px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes slideInRight {
            from {
                transform: translateX(100px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes slideInUp {
            from {
                transform: translateY(100px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        @keyframes slideInDown {
            from {
                transform: translateY(-100px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        /* Enhanced Game Title */
        .game-title {
            background: linear-gradient(45deg, #FF6B6B, #4ECDC4, #45B7D1, #96CEB4, #FFEAA7);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: gradientShift 3s ease-in-out infinite;
        }

        @keyframes gradientShift {
            0%, 100% { filter: hue-rotate(0deg); }
            50% { filter: hue-rotate(180deg); }
        }

        /* Enhanced Background */
        body {
            background: url('https://i.imgur.com/tSUqoTm.png') no-repeat center center fixed;
            background-size: cover;
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }

        /* Background overlay for better readability */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.3);
            z-index: -1;
        }

        /* Mobile background adjustments */
        @media (max-width: 768px) {
            body {
                background-attachment: scroll;
                background-size: cover;
                background-position: center center;
            }
        }

        @media (max-width: 480px) {
            body {
                background-size: cover;
                background-position: center center;
            }
        }

        /* Tablet background adjustments */
        @media (min-width: 481px) and (max-width: 1024px) {
            body {
                background-size: cover;
                background-position: center center;
            }
        }

        /* Desktop background adjustments */
        @media (min-width: 1025px) {
            body {
                background-size: cover;
                background-position: center center;
            }
        }

        /* Enhanced Particles Background */
        #particles-js {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -2;
        }

        /* Enhanced Matrix Rain Effect */
        .matrix-rain {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
            overflow: hidden;
        }

        .matrix-drop {
            position: absolute;
            color: rgba(0, 255, 0, 0.3);
            font-family: 'Courier New', monospace;
            font-size: 14px;
            animation: matrixFall linear infinite;
        }

        @keyframes matrixFall {
            0% {
                transform: translateY(-100vh);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh);
                opacity: 0;
            }
        }

        /* Enhanced Progress Bar */
        .progress-bar {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            background: linear-gradient(90deg, #4CAF50, #8BC34A, #CDDC39);
            border-radius: 10px;
            transition: width 0.3s ease;
        }

        /* Enhanced Memory Game Board */
        .memory-game-board {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            max-width: 800px;
            margin: 0 auto;
        }

        .memory-card {
            aspect-ratio: 1;
            border-radius: 15px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            transform-style: preserve-3d;
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            background: #f8f9fa;
            padding: 4px;
        }

        .memory-card img {
            width: 95%;
            height: 95%;
            max-width: 95%;
            max-height: 95%;
            object-fit: contain;
            object-position: center;
            border-radius: 10px;
        }

        .memory-card:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
        }

        .memory-card.flipped {
            border: 3px solid #FFD700;
        }

        .memory-card.matched {
            border: 3px solid #4CAF50;
            cursor: default;
            opacity: 0.8;
        }

        /* Enhanced Slide Indicators */
        .slide-indicator {
            transition: all 0.3s ease;
        }

        .slide-indicator.active {
            background-color: #3B82F6 !important;
            transform: scale(1.2);
        }

        .slide-indicator:hover {
            transform: scale(1.1);
        }

        /* Enhanced Responsive Design */
        @media (max-width: 768px) {
            .memory-game-board {
                grid-template-columns: repeat(3, 1fr);
                gap: 10px;
                max-width: 500px;
            }
            
            .memory-card {
                padding: 1px;
            }
            
            .memory-card img {
                width: 92%;
                height: 92%;
                max-width: 92%;
                max-height: 92%;
            }
            
            .glass-card {
                margin: 10px;
                padding: 1rem;
            }
            
            .slide-content img {
                max-height: 160px !important;
                width: 100% !important;
                object-fit: contain !important;
            }
            
            /* Mobile button improvements */
            button {
                min-height: 48px;
                touch-action: manipulation;
                -webkit-tap-highlight-color: transparent;
            }
            
            .neon-button, .quiz-option {
                padding: 16px 24px;
                font-size: 16px;
                line-height: 1.2;
            }
        }

        @media (max-width: 480px) {
            .memory-game-board {
                grid-template-columns: repeat(2, 1fr);
                gap: 6px;
                max-width: 320px;
            }
            
            .memory-card {
                padding: 1px;
            }
            
            .memory-card img {
                width: 90%;
                height: 90%;
                max-width: 90%;
                max-height: 90%;
            }
            
            .slide-content img {
                max-height: 140px !important;
                width: 100% !important;
                object-fit: contain !important;
            }
            
            .glass-card {
                padding: 0.75rem;
            }
            
            /* Small mobile button improvements */
            button {
                min-height: 52px;
                padding: 18px 20px;
                font-size: 15px;
            }
            
            .neon-button {
                padding: 20px 28px;
                font-size: 16px;
                font-weight: 700;
            }
            
            .quiz-option {
                padding: 18px 20px;
                font-size: 15px;
                margin: 12px 0;
            }
        }

        /* Ensure all images are properly sized */
        img {
            max-width: 100%;
            height: auto;
            object-fit: contain;
        }

        /* Enhanced Quiz Styles */
        .quiz-option {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 250, 252, 0.95) 100%);
            border: 3px solid transparent;
            border-radius: 20px;
            padding: 20px 25px;
            margin: 12px 0;
            cursor: pointer;
            transition: all 0.4s ease;
            font-weight: 700;
            user-select: none;
            -webkit-user-select: none;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
            position: relative;
            overflow: hidden;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            font-size: 16px;
            line-height: 1.5;
        }

        .quiz-option::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: left 0.5s;
        }

        .quiz-option:hover::before {
            left: 100%;
        }

        .quiz-option:hover {
            background: linear-gradient(135deg, #FFFFFF 0%, #F8FAFC 100%);
            border: 3px solid;
            border-image: linear-gradient(135deg, #3B82F6, #8B5CF6, #EC4899) 1;
            transform: translateX(15px) scale(1.02);
            box-shadow: 0 15px 35px rgba(59, 130, 246, 0.3);
        }

        .quiz-option.selected {
            background: linear-gradient(135deg, #3B82F6 0%, #8B5CF6 50%, #EC4899 100%);
            color: white;
            border: 3px solid #1D4ED8;
            transform: translateX(10px) scale(1.05);
            box-shadow: 0 20px 40px rgba(59, 130, 246, 0.4);
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
        }

        .quiz-option.correct {
            background: linear-gradient(135deg, #10B981 0%, #059669 50%, #047857 100%);
            color: white;
            border: 3px solid #059669;
            transform: translateX(10px) scale(1.05);
            box-shadow: 0 20px 40px rgba(16, 185, 129, 0.4);
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
            animation: correctPulse 0.6s ease-in-out;
        }

        .quiz-option.incorrect {
            background: linear-gradient(135deg, #EF4444 0%, #DC2626 50%, #B91C1C 100%);
            color: white;
            border: 3px solid #DC2626;
            transform: translateX(10px) scale(1.05);
            box-shadow: 0 20px 40px rgba(239, 68, 68, 0.4);
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
            animation: incorrectShake 0.6s ease-in-out;
        }

        @keyframes correctPulse {
            0% { transform: translateX(10px) scale(1.05); }
            50% { transform: translateX(10px) scale(1.1); box-shadow: 0 25px 50px rgba(16, 185, 129, 0.6); }
            100% { transform: translateX(10px) scale(1.05); }
        }

        @keyframes incorrectShake {
            0%, 100% { transform: translateX(10px) scale(1.05); }
            25% { transform: translateX(5px) scale(1.05); }
            75% { transform: translateX(15px) scale(1.05); }
        }
    </style>
</head>
<body class="min-h-screen">
    <!-- Background Audio -->
    <audio id="backgroundAudio" loop preload="metadata" crossorigin="anonymous">
        <source src="https://raw.githubusercontent.com/venisiswiandini/Ethnomath_/refs/heads/main/BS.mp3" type="audio/mpeg">
        Browser Anda tidak mendukung audio.
    </audio>

    <!-- Particle Background -->
    <div id="particles-js"></div>

    <!-- Matrix Rain Effect -->
    <div id="matrixRain" class="matrix-rain"></div>

    <!-- Enhanced Audio Control Button -->
    <button id="audioButton" class="fixed bottom-4 right-4 z-50 neon-button text-black p-4 rounded-full shadow-2xl transition-all duration-300 transform hover:scale-110 group" onclick="toggleAudio()">
        <svg id="audioIcon" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"></path>
        </svg>
        <div class="absolute bottom-full left-0 mb-2 px-3 py-1 bg-gray-800 text-white text-sm rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300 whitespace-nowrap">
            <span id="audioTooltip">Matikan Musik</span>
        </div>
    </button>

    <!-- Enhanced Home Page -->
    <div id="homePage" class="min-h-screen flex items-center justify-center p-4">
        <div class="max-w-4xl mx-auto text-center w-full">
            <div class="glass-card rounded-3xl p-8 shadow-2xl bounce-in-3d card-hover holographic">
                <div class="mb-8">
                    <div class="text-6xl mb-4 floating">🎮🌈📐✨</div>
                    <div class="flex justify-center mb-8">
                        <div class="relative group">
                            <div class="absolute -inset-6 bg-gradient-to-r from-yellow-400 via-orange-500 to-red-500 rounded-3xl blur-2xl opacity-30 group-hover:opacity-50 transition-all duration-500 animate-pulse"></div>
                            <div class="relative glass-card rounded-3xl p-8 border-2 border-white/20 shadow-2xl glow-effect">
                                <img src="https://i.imgur.com/sWMWajt.png" alt="ETHNOMATH Twin Shapes Logo" class="w-full max-w-md mx-auto rounded-2xl shadow-lg object-contain" style="max-height: 300px; height: auto;" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                                <div class="hidden text-center bg-gradient-to-r from-yellow-600 to-orange-600 text-white p-8 rounded-2xl">
                                    <div class="text-5xl mb-4">🎮</div>
                                    <h1 class="text-3xl font-bold mb-3">ETHNOMATH</h1>
                                    <h2 class="text-xl font-semibold mb-3">Twin Shapes</h2>
                                    <p class="text-lg opacity-90">by Veni Siswiandini</p>
                                </div>
                            </div>
                            <!-- Enhanced Floating Elements -->
                            <div class="absolute -top-6 -right-6 text-4xl animate-bounce floating" style="animation-delay: 0s;">✨</div>
                            <div class="absolute -bottom-6 -left-6 text-4xl animate-bounce floating" style="animation-delay: 0.5s;">🌟</div>
                            <div class="absolute top-1/2 -left-8 text-3xl animate-bounce floating" style="animation-delay: 1s;">⭐</div>
                            <div class="absolute top-1/2 -right-8 text-3xl animate-bounce floating" style="animation-delay: 1.5s;">💫</div>
                            <div class="absolute top-1/4 -left-10 text-2xl animate-bounce floating" style="animation-delay: 2s;">🎯</div>
                            <div class="absolute top-3/4 -right-10 text-2xl animate-bounce floating" style="animation-delay: 2.5s;">🎨</div>
                        </div>
                    </div>
                    <div class="text-2xl font-bold mb-6 text-center game-title">
                        <div style="font-family: 'Orbitron', monospace; font-weight: 600; font-size: 2.2rem; color: #FFFFFF; text-shadow: 2px 2px 4px rgba(0,0,0,0.5); letter-spacing: 0.3px; margin-bottom: 0.5rem; line-height: 1.3; word-wrap: break-word; overflow-wrap: break-word;">Ethnomathematics Twin Shapes</div>
                        <div style="font-family: 'Orbitron', monospace; font-weight: 600; font-size: 1.2rem; color: #FFFFFF; text-shadow: 2px 2px 4px rgba(0,0,0,0.5); letter-spacing: 0.3px; margin-top: 0.5rem;">by Veni Siswiandini</div>
                    </div>
                    <div class="text-3xl mb-6 floating">🎯🎪🚀🎊</div>
                </div>

                <!-- Enhanced Feature Cards -->
                <div class="grid grid-cols-2 md:grid-cols-4 gap-6 mb-8">
                    <div class="glass-card rounded-2xl p-6 card-hover glow-effect slide-in-left" style="border: 3px solid rgba(59, 130, 246, 0.6); box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3);">
                        <div class="text-5xl floating mb-3">🎲</div>
                        <div class="text-xl text-blue-600 font-bold neon-text">Seru &</div>
                        <div class="text-lg text-white font-bold">Menarik!</div>
                    </div>
                    <div class="glass-card rounded-2xl p-6 card-hover glow-effect slide-in-up" style="animation-delay: 0.1s; border: 3px solid rgba(34, 197, 94, 0.6); box-shadow: 0 8px 25px rgba(34, 197, 94, 0.3);">
                        <div class="text-5xl floating mb-3" style="animation-delay: 0.5s;">⏰</div>
                        <div class="text-xl text-green-600 font-bold neon-text">Interaktif</div>
                        <div class="text-lg text-white font-bold">Seru!</div>
                    </div>
                    <div class="glass-card rounded-2xl p-6 card-hover glow-effect slide-in-down" style="animation-delay: 0.2s; border: 3px solid rgba(245, 158, 11, 0.6); box-shadow: 0 8px 25px rgba(245, 158, 11, 0.3);">
                        <div class="text-5xl floating mb-3" style="animation-delay: 1s;">🏆</div>
                        <div class="text-xl text-yellow-600 font-bold neon-text">Budaya</div>
                        <div class="text-lg text-white font-bold">Melayu</div>
                    </div>
                    <div class="glass-card rounded-2xl p-6 card-hover glow-effect slide-in-right" style="animation-delay: 0.3s; border: 3px solid rgba(168, 85, 247, 0.6); box-shadow: 0 8px 25px rgba(168, 85, 247, 0.3);">
                        <div class="text-5xl floating mb-3" style="animation-delay: 1.5s;">🎨</div>
                        <div class="text-xl text-purple-600 font-bold neon-text">Animasi</div>
                        <div class="text-lg text-white font-bold">Keren!</div>
                    </div>
                </div>

                <!-- Enhanced Action Buttons -->
                <div class="space-y-6">
                    <button class="w-full neon-button text-black px-8 py-4 rounded-full font-bold text-lg transition-all duration-300 transform hover:scale-105 shadow-lg" onclick="playSound('click'); showMaterial()">
                        📖 Materi Pembelajaran 📚
                    </button>
                    <button class="w-full bg-gradient-to-r from-green-500 via-teal-500 to-blue-600 hover:from-green-600 hover:via-teal-600 hover:to-blue-700 text-black px-8 py-4 rounded-full font-bold text-lg transition-all duration-300 transform hover:scale-105 shadow-2xl border-3 border-green-400" onclick="playSound('click'); showNameInput()" style="background: linear-gradient(135deg, #10B981 0%, #14B8A6 50%, #3B82F6 100%); box-shadow: 0 10px 30px rgba(16, 185, 129, 0.4), inset 0 2px 0 rgba(255, 255, 255, 0.3); text-shadow: 2px 2px 4px rgba(255, 255, 255, 0.9), 1px 1px 2px rgba(255, 255, 255, 0.8), 0 0 6px rgba(255, 255, 255, 0.6);">
                        🚀 Latihan Soal 🎮
                    </button>
                    <button class="w-full bg-gradient-to-r from-pink-500 via-purple-500 to-indigo-600 hover:from-pink-600 hover:via-purple-600 hover:to-indigo-700 text-black px-8 py-4 rounded-full font-bold text-lg transition-all duration-300 transform hover:scale-105 shadow-2xl border-3 border-pink-400" onclick="playSound('click'); showMemoryGame()" style="background: linear-gradient(135deg, #EC4899 0%, #8B5CF6 50%, #6366F1 100%); box-shadow: 0 10px 30px rgba(236, 72, 153, 0.4), inset 0 2px 0 rgba(255, 255, 255, 0.3); text-shadow: 2px 2px 4px rgba(255, 255, 255, 0.9), 1px 1px 2px rgba(255, 255, 255, 0.8), 0 0 6px rgba(255, 255, 255, 0.6);">
                        🎮 Cocokin Yuk! 🧩
                    </button>

                </div>

                <!-- Enhanced Footer -->
                <div class="mt-8 text-center">
                    <div class="text-lg font-bold mb-4" style="color: #000000; text-shadow: 2px 2px 4px rgba(255, 255, 255, 0.9), 1px 1px 2px rgba(255, 255, 255, 0.8), 0 0 6px rgba(255, 255, 255, 0.6);">🌟 Belajar Matematika Jadi Menyenangkan! 🌟</div>
                    <div class="flex justify-center space-x-3 text-3xl">
                        <span class="animate-bounce floating">🎉</span>
                        <span class="animate-bounce floating" style="animation-delay: 0.1s;">🎊</span>
                        <span class="animate-bounce floating" style="animation-delay: 0.2s;">🎈</span>
                        <span class="animate-bounce floating" style="animation-delay: 0.3s;">🎁</span>
                        <span class="animate-bounce floating" style="animation-delay: 0.4s;">🎪</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Halaman Materi -->
    <div id="materialPage" class="hidden min-h-screen flex items-center justify-center p-4">
        <div class="glass-card rounded-3xl p-6 max-w-5xl mx-auto w-full">
            <!-- Header -->
            <div class="text-center mb-6">
                <h2 class="text-3xl md:text-4xl font-bold mb-4 game-title">📖 Materi Pembelajaran 📚</h2>
                <div class="text-4xl md:text-6xl mb-4 floating">📚</div>
                <p class="text-lg md:text-xl text-white neon-text">Kesebangunan dalam Budaya Melayu</p>
            </div>

            <!-- Slide Container -->
            <div class="relative bg-white/95 rounded-2xl p-6 md:p-8 shadow-2xl min-h-[500px] md:min-h-[600px]">
                <!-- Slide 1 -->
                <div id="slide1" class="slide-content">
                    <div class="text-center mb-6">
                        <h3 class="text-2xl md:text-3xl font-bold text-gray-800 mb-4">Mengenal Bentuk Segitiga</h3>
                    </div>
                    <div class="flex flex-col lg:flex-row items-center gap-6">
                        <div class="w-full lg:w-1/2">
                            <div class="bg-gradient-to-r from-yellow-600 to-orange-600 text-white p-8 rounded-xl text-center cursor-pointer hover:scale-105 transition-transform duration-300" onclick="showSlide1Popup()">
                                <div class="text-6xl mb-4">🏠</div>
                                <p class="text-lg font-semibold">Rumah Adat Melayu</p>
                            </div>
                            <p class="text-sm text-gray-600 text-center mt-2">👆 Klik gambar untuk melihat jawaban!</p>
                        </div>
                        <div class="w-full lg:w-1/2 text-center lg:text-left">
                            <div class="bg-gradient-to-r from-blue-100 to-purple-100 p-6 rounded-xl">
                                <h4 class="text-xl md:text-2xl font-bold text-gray-800 mb-4">🤔 Pertanyaan:</h4>
                                <p class="text-lg md:text-xl text-gray-700 font-semibold leading-relaxed">
                                    Bagian mana dari rumah adat ini yang berbentuk segitiga?
                                </p>
                                <div class="mt-4 text-4xl">🔍</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Slide 2 -->
                <div id="slide2" class="slide-content hidden">
                    <div class="text-center mb-6">
                        <h3 class="text-2xl md:text-3xl font-bold text-gray-800 mb-4">Membandingkan Bentuk</h3>
                    </div>
                    <div class="flex flex-col lg:flex-row items-center gap-6">
                        <div class="w-full lg:w-1/2">
                            <div class="bg-gradient-to-r from-red-500 to-pink-500 text-white p-8 rounded-xl text-center">
                                <div class="text-6xl mb-4">📐</div>
                                <p class="text-lg font-semibold">Perbandingan Segitiga</p>
                            </div>
                        </div>
                        <div class="w-full lg:w-1/2 text-center lg:text-left">
                            <div class="bg-gradient-to-r from-green-100 to-blue-100 p-6 rounded-xl">
                                <h4 class="text-xl md:text-2xl font-bold text-gray-800 mb-4">🤔 Pertanyaan:</h4>
                                <p class="text-lg md:text-xl text-gray-700 font-semibold leading-relaxed mb-4">
                                    Apakah segitiga putih dan segitiga merah memiliki bentuk yang sama?
                                </p>
                                <div class="space-y-4">
                                    <button id="slide2BtnSama" class="w-full bg-gradient-to-r from-green-500 via-emerald-500 to-teal-500 hover:from-green-600 hover:via-emerald-600 hover:to-teal-600 text-white px-6 py-4 rounded-xl font-bold text-lg transition-all duration-300 transform hover:scale-105 shadow-lg border-2 border-green-400 hover:shadow-xl" onclick="answerSlide2('sama')">
                                        <div class="flex items-center justify-center space-x-3">
                                            <span class="text-2xl">✅</span>
                                            <span>Sama</span>
                                            <span class="text-2xl animate-bounce">🎯</span>
                                        </div>
                                    </button>
                                    <button id="slide2BtnTidakSama" class="w-full bg-gradient-to-r from-red-500 via-pink-500 to-rose-500 hover:from-red-600 hover:via-pink-600 hover:to-rose-600 text-white px-6 py-4 rounded-xl font-bold text-lg transition-all duration-300 transform hover:scale-105 shadow-lg border-2 border-red-400 hover:shadow-xl" onclick="answerSlide2('tidak sama')">
                                        <div class="flex items-center justify-center space-x-3">
                                            <span class="text-2xl">❌</span>
                                            <span>Tidak Sama</span>
                                            <span class="text-2xl animate-bounce">🤔</span>
                                        </div>
                                    </button>
                                </div>
                                <div id="slide2Answer" class="mt-4 p-4 rounded-lg hidden">
                                    <!-- Answer will appear here -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Slide 3 -->
                <div id="slide3" class="slide-content hidden">
                    <div class="text-center mb-6">
                        <h3 class="text-2xl md:text-3xl font-bold text-gray-800 mb-4">Menganalisis Sudut dan Sisi</h3>
                    </div>
                    <div class="flex flex-col lg:flex-row items-center gap-6">
                        <div class="w-full lg:w-1/2">
                            <div class="bg-gradient-to-r from-purple-500 to-indigo-500 text-white p-8 rounded-xl text-center">
                                <div class="text-6xl mb-4">📏</div>
                                <p class="text-lg font-semibold">Analisis Sudut dan Sisi</p>
                            </div>
                        </div>
                        <div class="w-full lg:w-1/2 text-center lg:text-left">
                            <div class="bg-gradient-to-r from-yellow-100 to-orange-100 p-6 rounded-xl">
                                <h4 class="text-xl md:text-2xl font-bold text-gray-800 mb-4">🤔 Pertanyaan:</h4>
                                <div class="space-y-3 mb-4">
                                    <p class="text-lg md:text-xl text-gray-700 font-semibold leading-relaxed">
                                        • Apakah sudut-sudut yang bersesuaian pada kedua segitiga sama besar?
                                    </p>
                                    <p class="text-lg md:text-xl text-gray-700 font-semibold leading-relaxed">
                                        • Apakah sisi-sisi yang bersesuaian memiliki perbandingan yang sama?
                                    </p>
                                </div>
                                <div class="space-y-4">
                                    <button id="slide3BtnSama" class="w-full bg-gradient-to-r from-blue-500 via-indigo-500 to-purple-500 hover:from-blue-600 hover:via-indigo-600 hover:to-purple-600 text-white px-6 py-4 rounded-xl font-bold text-lg transition-all duration-300 transform hover:scale-105 shadow-lg border-2 border-blue-400 hover:shadow-xl" onclick="answerSlide3('sama')">
                                        <div class="flex items-center justify-center space-x-3">
                                            <span class="text-2xl">✅</span>
                                            <span>Sama</span>
                                            <span class="text-2xl animate-bounce">📐</span>
                                        </div>
                                    </button>
                                    <button id="slide3BtnTidakSama" class="w-full bg-gradient-to-r from-orange-500 via-red-500 to-pink-500 hover:from-orange-600 hover:via-red-600 hover:to-pink-600 text-white px-6 py-4 rounded-xl font-bold text-lg transition-all duration-300 transform hover:scale-105 shadow-lg border-2 border-orange-400 hover:shadow-xl" onclick="answerSlide3('tidak sama')">
                                        <div class="flex items-center justify-center space-x-3">
                                            <span class="text-2xl">❌</span>
                                            <span>Tidak Sama</span>
                                            <span class="text-2xl animate-bounce">🤷</span>
                                        </div>
                                    </button>
                                </div>
                                <div id="slide3Answer" class="mt-4 p-4 rounded-lg hidden">
                                    <!-- Answer will appear here -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Slide 4 -->
                <div id="slide4" class="slide-content hidden">
                    <div class="text-center mb-6">
                        <h3 class="text-2xl md:text-3xl font-bold text-gray-800 mb-4">Menemukan Hubungan</h3>
                    </div>
                    <div class="flex flex-col lg:flex-row items-center gap-6">
                        <div class="w-full lg:w-1/2">
                            <div class="bg-gradient-to-r from-teal-500 to-cyan-500 text-white p-8 rounded-xl text-center">
                                <div class="text-6xl mb-4">🔗</div>
                                <p class="text-lg font-semibold">Hubungan Segitiga</p>
                            </div>
                        </div>
                        <div class="w-full lg:w-1/2 text-center lg:text-left">
                            <div class="bg-gradient-to-r from-pink-100 to-red-100 p-6 rounded-xl">
                                <h4 class="text-xl md:text-2xl font-bold text-gray-800 mb-4">🤔 Pertanyaan:</h4>
                                <p class="text-lg md:text-xl text-gray-700 font-semibold leading-relaxed mb-4">
                                    Menurutmu, apa hubungan antara segitiga putih dan segitiga merah?
                                </p>
                                <textarea id="slide4Answer" class="w-full p-4 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none" rows="4" placeholder="Tuliskan pendapat Anda di sini..." oninput="checkSlide4Answer()"></textarea>
                                <div id="slide4Feedback" class="mt-4 p-4 rounded-lg hidden">
                                    <p class="text-green-600 font-semibold">✅ Terima kasih atas jawaban Anda! Sekarang Anda bisa melanjutkan ke slide berikutnya.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Slide 5 -->
                <div id="slide5" class="slide-content hidden">
                    <div class="text-center mb-6">
                        <h3 class="text-2xl md:text-3xl font-bold text-gray-800 mb-4">Konsep Kesebangunan</h3>
                    </div>
                    <div class="space-y-6">
                        <div class="bg-gradient-to-r from-indigo-100 to-purple-100 p-6 rounded-xl">
                            <p class="text-lg text-gray-700 mb-4 leading-relaxed">
                                Segitiga putih dan segitiga merah merupakan dua segitiga yang sebangun.
                            </p>
                            <p class="text-lg text-gray-700 mb-4 leading-relaxed">
                                Kesebangunan adalah hubungan dua bangun yang memiliki bentuk sama tetapi ukuran belum tentu sama. Dua bangun dikatakan sebangun jika:
                            </p>
                            <div class="bg-white p-4 rounded-lg">
                                <ul class="text-left space-y-2 text-gray-700">
                                    <li class="flex items-start"><span class="text-blue-500 mr-2">•</span> Bentuknya sama (sudut-sudut yang bersesuaian sama besar).</li>
                                    <li class="flex items-start"><span class="text-blue-500 mr-2">•</span> Perbandingan panjang sisi-sisi yang bersesuaian sama.</li>
                                </ul>
                            </div>
                        </div>
                        <div class="text-center mb-6">
                            <div class="bg-gradient-to-r from-green-500 to-teal-500 text-white p-8 rounded-xl">
                                <div class="text-6xl mb-4">📐</div>
                                <p class="text-xl font-semibold">Ilustrasi Kesebangunan</p>
                            </div>
                        </div>
                        <div class="bg-gradient-to-r from-orange-100 to-red-100 p-6 rounded-xl mb-6">
                            <h4 class="text-xl md:text-2xl font-bold text-gray-800 mb-4 text-center">Rumus perbandingan sisi:</h4>
                            <div class="text-center">
                                <div class="bg-gradient-to-r from-orange-500 to-red-500 text-white p-8 rounded-xl">
                                    <div class="text-6xl mb-4">📊</div>
                                    <p class="text-xl font-semibold">Rumus Perbandingan Sisi</p>
                                    <p class="text-lg mt-2">a₁/a₂ = b₁/b₂ = c₁/c₂</p>
                                </div>
                            </div>
                        </div>
                        <div class="bg-gradient-to-r from-yellow-100 to-orange-100 p-6 rounded-xl text-center">
                            <h4 class="text-xl font-bold text-gray-800 mb-2">Simbol kesebangunan:</h4>
                            <div class="text-center mb-4">
                                <p class="text-2xl font-bold text-gray-800">∆ABC ~ ∆DEF</p>
                            </div>
                            <p class="text-lg text-gray-700 mt-2">yang artinya segitiga ABC sebangun dengan segitiga DEF.</p>
                        </div>
                    </div>
                </div>

                <!-- Slide 6 -->
                <div id="slide6" class="slide-content hidden">
                    <div class="text-center mb-6">
                        <h3 class="text-2xl md:text-3xl font-bold text-gray-800 mb-4">Contoh Soal</h3>
                    </div>
                    <div class="space-y-6">
                        <div class="bg-gradient-to-r from-blue-100 to-indigo-100 p-6 rounded-xl">
                            <h4 class="text-xl md:text-2xl font-bold text-gray-800 mb-4">📝 Contoh Soal:</h4>
                            <div class="text-center mb-4">
                                <div class="bg-gradient-to-r from-blue-500 to-purple-500 text-white p-6 rounded-xl text-center">
                                    <div class="text-4xl mb-2">📐</div>
                                    <p class="font-semibold">Contoh Soal Kesebangunan</p>
                                </div>
                            </div>
                            <p class="text-lg text-gray-700 leading-relaxed text-center">
                                Jika panjang alas segitiga putih adalah <strong>8 m</strong>, dan panjang alas segitiga merah adalah <strong>4 m</strong>, serta tinggi segitiga merah adalah <strong>3 m</strong>, berapakah tinggi segitiga putih?
                            </p>
                        </div>
                        <div class="bg-gradient-to-r from-green-100 to-teal-100 p-6 rounded-xl">
                            <h4 class="text-xl md:text-2xl font-bold text-gray-800 mb-4">✅ Jawaban:</h4>
                            <div class="space-y-4">
                                <div class="bg-white p-4 rounded-lg">
                                    <h5 class="text-lg font-bold text-gray-800 mb-2">Langkah Pertama (Memahami masalah)</h5>
                                    <p class="text-gray-700 mb-2"><strong>Diketahui:</strong></p>
                                    <ul class="text-gray-700 ml-4 space-y-1">
                                        <li>• Segitiga putih sebangun dengan segitiga merah</li>
                                        <li>• Panjang alas segitiga putih = 8 m</li>
                                        <li>• Panjang alas segitiga merah = 4 m</li>
                                        <li>• Tinggi segitiga merah = 3 m</li>
                                    </ul>
                                    <p class="text-gray-700 mt-2"><strong>Ditanyakan:</strong></p>
                                    <p class="text-gray-700 ml-4">Berapa tinggi segitiga putih?</p>
                                </div>
                                <div class="bg-white p-4 rounded-lg">
                                    <h5 class="text-lg font-bold text-gray-800 mb-2">Langkah Kedua (Merencanakan masalah)</h5>
                                    <p class="text-gray-700 mb-2">Karena kedua segitiga sebangun, perbandingan sisi-sisi yang bersesuaian adalah sama. Tuliskan perbandingan sisi yang bersesuaian.</p>
                                    <div class="text-center my-4">
                                        <div class="bg-gradient-to-r from-blue-500 to-purple-500 text-white p-6 rounded-xl mb-6">
                                            <div class="text-4xl mb-2">📊</div>
                                            <p class="text-xl font-semibold">Perbandingan Sisi</p>
                                            <p class="text-lg mt-2">alas putih / alas merah = tinggi putih / tinggi merah</p>
                                        </div>
                                        <div class="bg-gradient-to-r from-green-500 to-teal-500 text-white p-6 rounded-xl">
                                            <div class="text-4xl mb-2">🔢</div>
                                            <p class="text-xl font-semibold">Substitusi Nilai</p>
                                            <p class="text-lg mt-2">8 / 4 = tinggi putih / 3</p>
                                        </div>
                                    </div>
                                    <p class="text-gray-700">Kemudian mencari nilai tinggi △putih (menggunakan perkalian silang).</p>
                                </div>
                                <div class="bg-white p-4 rounded-lg">
                                    <h5 class="text-lg font-bold text-gray-800 mb-2">Langkah Ketiga (Menjalankan rencana)</h5>
                                    <p class="text-gray-700 mb-2">Menentukan nilai tinggi △putih</p>
                                    <div class="text-center">
                                        <div class="bg-gradient-to-r from-green-500 to-blue-500 text-white p-6 rounded-xl text-center">
                                            <div class="text-4xl mb-2">✅</div>
                                            <p class="text-xl font-semibold mb-2">Penyelesaian:</p>
                                            <p class="text-lg">8 × 3 = 4 × tinggi putih</p>
                                            <p class="text-lg">24 = 4 × tinggi putih</p>
                                            <p class="text-lg">tinggi putih = 24 ÷ 4 = 6 m</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="bg-white p-4 rounded-lg">
                                    <h5 class="text-lg font-bold text-gray-800 mb-2">Langkah Keempat (Memeriksa kebenaran)</h5>
                                    <p class="text-gray-700 mb-2">Dengan menggunakan perbandingan sisi pada bangun yang sebangun, maka diperoleh tinggi segitiga putih yaitu 6 m.</p>
                                    <p class="text-gray-700 mb-2">Perbandingan sisi-sisi yang bersesuaian sama:</p>
                                    <div class="text-center mb-2">
                                        <div class="bg-gradient-to-r from-purple-500 to-indigo-500 text-white p-4 rounded-xl text-center">
                                            <div class="text-2xl mb-2">✓</div>
                                            <p class="font-semibold">8/4 = 6/3 = 2</p>
                                        </div>
                                    </div>
                                    <p class="text-gray-700">Karena semua perbandingan sisi yang bersesuaian sama, maka benar segitiga putih dan segitiga merah sebangun dan tinggi segitiga putih adalah 6 m.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Navigation Controls -->
            <div class="flex justify-between items-center mt-8 pt-6 border-t-2 border-gray-200">
                <button id="prevBtn" class="bg-gradient-to-r from-gray-500 to-gray-600 hover:from-gray-600 hover:to-gray-700 text-white px-6 py-3 rounded-full font-bold transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed" onclick="playSound('click'); changeSlide(-1)">
                    ⬅️ Sebelumnya
                </button>
                <div class="flex space-x-2">
                    <span id="slideIndicator1" class="slide-indicator active w-3 h-3 rounded-full bg-blue-500 cursor-pointer" onclick="playSound('click'); goToSlide(1)"></span>
                    <span id="slideIndicator2" class="slide-indicator w-3 h-3 rounded-full bg-gray-300 cursor-pointer" onclick="playSound('click'); goToSlide(2)"></span>
                    <span id="slideIndicator3" class="slide-indicator w-3 h-3 rounded-full bg-gray-300 cursor-pointer" onclick="playSound('click'); goToSlide(3)"></span>
                    <span id="slideIndicator4" class="slide-indicator w-3 h-3 rounded-full bg-gray-300 cursor-pointer" onclick="playSound('click'); goToSlide(4)"></span>
                    <span id="slideIndicator5" class="slide-indicator w-3 h-3 rounded-full bg-gray-300 cursor-pointer" onclick="playSound('click'); goToSlide(5)"></span>
                    <span id="slideIndicator6" class="slide-indicator w-3 h-3 rounded-full bg-gray-300 cursor-pointer" onclick="playSound('click'); goToSlide(6)"></span>
                </div>
                <button id="nextBtn" class="neon-button text-black px-6 py-3 rounded-full font-bold transition-all duration-300 transform hover:scale-105" onclick="playSound('click'); changeSlide(1)">
                    Selanjutnya ➡️
                </button>
            </div>

            <!-- Slide Counter -->
            <div class="text-center mt-4">
                <span id="slideCounter" class="text-lg font-semibold text-gray-600">Slide 1 dari 6</span>
            </div>

            <!-- Back to Home Button -->
            <div class="text-center mt-8 pt-6 border-t-2 border-gray-200">
                <button class="neon-button px-8 py-4 rounded-full text-lg font-bold" onclick="playSound('click'); showPage('homePage')">
                    🏠 Kembali ke Beranda
                </button>
            </div>
        </div>
    </div>

    <!-- Popup Modal for Slide 1 -->
    <div id="slide1PopupModal" class="hidden fixed inset-0 bg-black/50 flex items-center justify-center z-50">
        <div class="glass-card rounded-3xl p-8 max-w-md mx-4 shadow-2xl bounce-in-3d glow-effect">
            <div class="text-center">
                <div class="text-6xl mb-4">🎉</div>
                <h3 class="text-2xl md:text-3xl font-bold text-gray-800 mb-4">Jawaban Benar!</h3>
                <div class="bg-gradient-to-r from-green-100 to-blue-100 p-6 rounded-xl mb-6">
                    <p class="text-lg md:text-xl text-gray-700 font-semibold leading-relaxed">
                        Ya benar! Yang berbentuk segitiga adalah bagian atapnya! 🏠
                    </p>
                </div>
                <div class="text-4xl mb-4">✅</div>
                <button class="neon-button text-black px-8 py-3 rounded-full font-bold transition-all duration-300 transform hover:scale-105" onclick="playSound('correct'); hideSlide1Popup()">
                    👍 Mengerti!
                </button>
            </div>
        </div>
    </div>







    <!-- Halaman Input Nama -->
    <div id="nameInputPage" class="hidden min-h-screen flex items-center justify-center p-4">
        <div class="glass-card rounded-3xl p-8 max-w-md mx-auto w-full holographic">
            <div class="text-center mb-8">
                <div class="relative mb-6">
                    <div class="absolute -inset-4 bg-gradient-to-r from-pink-400 via-purple-500 to-indigo-500 rounded-3xl blur-xl opacity-30 animate-pulse"></div>
                    <div class="relative">
                        <h2 class="text-3xl md:text-4xl font-bold mb-4 game-title">📝 Masukkan Nama</h2>
                        <div class="text-4xl md:text-6xl mb-4 floating">👤</div>
                        <p class="text-lg md:text-xl text-white neon-text">Siapa nama kamu?</p>
                    </div>
                </div>
            </div>

            <div class="bg-gradient-to-br from-white via-blue-50 to-purple-50 rounded-3xl p-6 shadow-2xl border-2 border-white/50">
                <div class="mb-6">
                    <label for="playerName" class="block text-lg font-bold text-gray-800 mb-3 text-center">
                        🌟 Nama Lengkap Kamu:
                    </label>
                    <input 
                        type="text" 
                        id="playerName" 
                        class="w-full px-6 py-4 text-lg border-3 border-gray-300 rounded-2xl focus:border-blue-500 focus:outline-none focus:ring-4 focus:ring-blue-200 transition-all duration-300 text-center font-semibold bg-white shadow-lg"
                        placeholder="Masukkan nama kamu"
                        maxlength="50"
                        onkeypress="if(event.key==='Enter') startQuizWithName()"
                        oninput="checkNameInput()"
                    >
                    <div id="nameError" class="hidden mt-3 p-3 bg-red-100 border-l-4 border-red-500 rounded-lg">
                        <p class="text-red-700 font-semibold text-center">
                            ⚠️ Nama harus diisi minimal 2 karakter!
                        </p>
                    </div>
                </div>

                <div class="space-y-4">
                    <button 
                        id="startQuizBtn" 
                        class="w-full neon-button text-black px-8 py-4 rounded-full font-bold text-lg transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg" 
                        onclick="playSound('click'); startQuizWithName()"
                        disabled
                    >
                        🚀 Mulai Latihan Soal
                    </button>
                    <button 
                        class="w-full bg-gradient-to-r from-gray-500 to-gray-600 hover:from-gray-600 hover:to-gray-700 text-white px-8 py-4 rounded-full font-bold text-lg transition-all duration-300 transform hover:scale-105 shadow-lg" 
                        onclick="playSound('click'); showPage('homePage')"
                    >
                        ⬅️ Kembali ke Beranda
                    </button>
                </div>


            </div>
        </div>
    </div>

    <!-- Halaman Memory Game -->
    <div id="memoryGamePage" class="hidden min-h-screen flex items-center justify-center p-4">
        <div class="glass-card rounded-3xl p-6 max-w-6xl mx-auto w-full">
            <!-- Memory Game Header -->
            <div class="text-center mb-6">
                <h2 class="text-3xl md:text-4xl font-bold mb-4 game-title">🎮 Cocokin Yuk! 🧩</h2>
                <div class="text-4xl md:text-6xl mb-4 floating">🥁</div>
                <p class="text-lg md:text-xl text-white neon-text">Game Memori Rebana Melayu</p>
                <!-- Game Stats -->
                <div class="flex justify-center space-x-8 mt-6 mb-4">
                    <div class="bg-gradient-to-r from-blue-100 to-purple-100 px-6 py-3 rounded-xl">
                        <div class="text-2xl font-bold text-gray-800">⏰ <span id="memoryGameTimer" class="text-blue-600">0:00</span></div>
                        <div class="text-sm text-gray-600">Waktu</div>
                    </div>
                    <div class="bg-gradient-to-r from-green-100 to-teal-100 px-6 py-3 rounded-xl">
                        <div class="text-2xl font-bold text-gray-800">🎯 <span id="memoryGameMatches" class="text-green-600">0</span>/6</div>
                        <div class="text-sm text-gray-600">Pasangan</div>
                    </div>
                </div>
                <!-- Instructions -->
                <div class="bg-gradient-to-r from-yellow-100 to-orange-100 p-4 rounded-xl mb-6">
                    <h3 class="text-lg font-bold text-gray-800 mb-2">📋 Cara Bermain:</h3>
                    <p class="text-gray-700">Klik kartu untuk membaliknya dan temukan pasangan gambar rebana yang sebangun!</p>
                </div>
            </div>

            <!-- Memory Game Board -->
            <div class="bg-white/95 rounded-2xl p-4 md:p-6 shadow-2xl">
                <div id="memoryGameBoard" class="memory-game-board">
                    <!-- Cards will be generated here -->
                </div>
            </div>

            <!-- Control Buttons -->
            <div class="flex justify-center space-x-4 mt-6">
                <button class="bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600 text-white px-6 py-3 rounded-full font-bold transition-all duration-300 transform hover:scale-105" onclick="playSound('click'); resetMemoryGame()">
                    🔄 Reset Game
                </button>
                <button class="bg-gradient-to-r from-gray-500 to-gray-600 hover:from-gray-600 hover:to-gray-700 text-white px-6 py-3 rounded-full font-bold transition-all duration-300 transform hover:scale-105" onclick="playSound('click'); showPage('homePage')">
                    🏠 Kembali ke Beranda
                </button>
            </div>
        </div>
    </div>

    <!-- Memory Game Results Modal -->
    <div id="memoryGameResultsModal" class="hidden fixed inset-0 bg-black/50 flex items-center justify-center z-50">
        <div class="glass-card rounded-3xl p-8 max-w-lg mx-4 shadow-2xl bounce-in-3d glow-effect">
            <div class="text-center">
                <div id="memoryResultEmoji" class="text-8xl mb-4">🎉</div>
                <h3 class="text-3xl font-bold text-gray-800 mb-4">Selamat!</h3>
                <div class="bg-gradient-to-r from-blue-100 to-purple-100 p-6 rounded-xl mb-6">
                    <p class="text-xl text-gray-700 font-semibold mb-2">
                        Kamu berhasil mencocokkan semua pasangan rebana!
                    </p>
                    <p class="text-2xl font-bold text-gray-800 mb-2">
                        ⏰ Waktu: <span id="memoryFinalTime" class="text-blue-600">0:00</span>
                    </p>
                    <p id="memoryScoreMessage" class="text-lg text-gray-700 font-semibold">
                        Hebat sekali!
                    </p>
                </div>
                <div class="space-y-4">
                    <button class="w-full neon-button text-black px-8 py-3 rounded-full font-bold transition-all duration-300 transform hover:scale-105" onclick="playSound('click'); restartMemoryGame()">
                        🔄 Main Lagi
                    </button>
                    <button class="w-full bg-gradient-to-r from-gray-500 to-gray-600 hover:from-gray-600 hover:to-gray-700 text-white px-8 py-3 rounded-full font-bold transition-all duration-300 transform hover:scale-105" onclick="playSound('click'); closeMemoryGameResults(); showPage('homePage')">
                        🏠 Kembali ke Beranda
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Halaman Quiz -->
    <div id="quizPage" class="hidden min-h-screen flex items-center justify-center p-4">
        <div class="glass-card rounded-3xl p-6 max-w-6xl mx-auto w-full holographic">
            <!-- Quiz Header -->
            <div class="text-center mb-6">
                <div class="relative mb-6">
                    <div class="absolute -inset-4 bg-gradient-to-r from-pink-400 via-purple-500 to-indigo-500 rounded-3xl blur-xl opacity-30 animate-pulse"></div>
                    <div class="relative">
                        <h2 class="text-3xl md:text-4xl font-bold mb-4 game-title">🚀 Latihan Soal 🎮</h2>
                        <div class="text-4xl md:text-6xl mb-4 floating">📝</div>
                        <p class="text-lg md:text-xl text-white neon-text">Uji Pemahaman Kesebangunan</p>
                    </div>
                </div>
                
                <!-- Player Name Display -->
                <div class="text-center mb-4">
                    <div class="bg-gradient-to-r from-yellow-400 via-orange-500 to-red-500 p-1 rounded-2xl shadow-2xl inline-block">
                        <div class="bg-white/95 px-6 py-3 rounded-xl">
                            <div class="text-lg md:text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-orange-600 to-red-600">
                                👋 Hai <span id="playerNameDisplay" class="text-orange-600">Peserta</span>!
                            </div>
                            <div class="text-sm text-gray-600 font-semibold">Selamat mengerjakan quiz</div>
                        </div>
                    </div>
                </div>

                <!-- Quiz Stats -->
                <div class="flex justify-center space-x-8 mt-6 mb-4">
                    <div class="text-center">
                        <div class="text-xl md:text-2xl font-bold text-white mb-2">✅ <span id="quizCorrectCount" class="text-green-400">0</span></div>
                        <div class="text-sm text-white font-semibold">Skor</div>
                    </div>
                    <div class="text-center">
                        <div class="text-xl md:text-2xl font-bold text-white mb-2">⏰ <span id="quizTimer" class="text-blue-400">25:00</span></div>
                        <div class="text-sm text-white font-semibold">Waktu</div>
                    </div>
                </div>
            </div>

            <!-- Quiz Content -->
            <div class="bg-gradient-to-br from-white via-blue-50 to-purple-50 rounded-3xl p-4 md:p-8 shadow-2xl min-h-[600px] border-2 border-white/50">
                <!-- Question Header -->
                <div class="text-center mb-6">
                    <div class="bg-gradient-to-r from-orange-400 via-pink-500 to-purple-600 p-1 rounded-2xl mb-4 inline-block">
                        <div class="bg-white px-6 py-3 rounded-xl">
                            <h3 id="quizQuestionTitle" class="text-2xl md:text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-orange-500 to-purple-600 mb-2">Pertanyaan 1</h3>
                            <p id="quizQuestionDescription" class="text-lg md:text-xl text-gray-700 font-semibold mb-0">Perhatikan gambar kain corak insang diatas!</p>
                        </div>
                    </div>
                </div>

                <!-- Question Image -->
                <div class="text-center mb-6">
                    <div class="bg-gradient-to-br from-yellow-400 via-orange-500 to-red-500 p-1 rounded-2xl shadow-2xl transform hover:scale-105 transition-all duration-300 inline-block">
                        <div id="quizImageContainer" class="bg-white p-6 rounded-xl">
                            <div class="text-6xl mb-4">📐</div>
                            <p class="text-lg font-semibold text-gray-800">Gambar Soal</p>
                        </div>
                    </div>
                </div>

                <!-- Question Context -->
                <div class="bg-gradient-to-r from-yellow-400 via-orange-400 to-red-400 p-1 rounded-2xl mb-6 shadow-lg">
                    <div class="bg-gradient-to-r from-yellow-50 via-orange-50 to-red-50 p-6 rounded-xl">
                        <div class="flex items-center justify-center mb-3">
                            <div class="text-3xl mr-3">📋</div>
                            <h4 class="text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-orange-600 to-red-600">Informasi Soal</h4>
                        </div>
                        <p id="quizQuestionContext" class="text-gray-700 leading-relaxed text-center font-medium">
                            <!-- Context will be inserted here -->
                        </p>
                    </div>
                </div>

                <!-- Sub Question -->
                <div class="bg-gradient-to-r from-blue-400 via-indigo-500 to-purple-500 p-1 rounded-2xl mb-6 shadow-lg">
                    <div class="bg-gradient-to-r from-blue-50 via-indigo-50 to-purple-50 p-6 rounded-xl">
                        <div class="flex items-center justify-center mb-3">
                            <div class="text-3xl mr-3">❓</div>
                            <h4 class="text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600">Pertanyaan</h4>
                        </div>
                        <h4 id="quizSubQuestion" class="text-xl md:text-2xl font-bold text-gray-800 text-center">
                            <!-- Sub question will be inserted here -->
                        </h4>
                    </div>
                </div>

                <!-- Answer Options -->
                <div class="bg-gradient-to-r from-green-400 via-teal-500 to-cyan-500 p-1 rounded-2xl mb-8 shadow-lg">
                    <div class="bg-gradient-to-r from-green-50 via-teal-50 to-cyan-50 p-6 rounded-xl">
                        <div class="flex items-center justify-center mb-4">
                            <div class="text-3xl mr-3">🎯</div>
                            <h4 class="text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-green-600 to-cyan-600">Pilihan Jawaban</h4>
                        </div>
                        <div id="quizOptions" class="space-y-4">
                            <!-- Options will be generated here -->
                        </div>
                    </div>
                </div>

                <!-- Navigation Controls -->
                <div class="flex justify-between items-center pt-6 border-t-4 border-gradient-to-r from-pink-300 via-purple-300 to-indigo-300">
                    <button id="quizPrevBtn" class="bg-gradient-to-r from-gray-500 via-gray-600 to-gray-700 hover:from-gray-600 hover:via-gray-700 hover:to-gray-800 text-white px-6 py-3 rounded-full font-bold transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg border-2 border-gray-400" onclick="playSound('click'); previousQuizQuestion()">
                        ⬅️ Sebelumnya
                    </button>
                    
                    <div class="text-center bg-gradient-to-r from-indigo-100 to-purple-100 px-6 py-3 rounded-full border-2 border-indigo-300">
                        <div class="text-lg font-bold text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-purple-600">
                            Soal <span id="quizProgress2" class="text-purple-700">1</span> dari <span class="text-indigo-700">12</span>
                        </div>
                    </div>
                    
                    <button id="quizNextBtn" class="neon-button text-black px-6 py-3 rounded-full font-bold transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg" onclick="playSound('click'); nextQuizQuestion()" disabled>
                        Selanjutnya ➡️
                    </button>
                </div>
            </div>

            <!-- Back to Home Button -->
            <div class="text-center mt-8 pt-6 border-t-4 border-gradient-to-r from-pink-300 via-purple-300 to-indigo-300">
                <button class="bg-gradient-to-r from-red-500 via-pink-500 to-purple-500 hover:from-red-600 hover:via-pink-600 hover:to-purple-600 text-white px-8 py-4 rounded-full text-lg font-bold transition-all duration-300 transform hover:scale-105 shadow-2xl border-2 border-red-400" onclick="playSound('click'); confirmExitQuiz()">
                    🏠 Keluar Quiz
                </button>
            </div>
        </div>
    </div>

    <!-- Quiz Results Modal -->
    <div id="quizResultsModal" class="hidden fixed inset-0 bg-black/50 flex items-center justify-center z-50">
        <div class="glass-card rounded-3xl p-8 max-w-lg mx-4 shadow-2xl bounce-in-3d glow-effect">
            <div class="text-center">
                <div id="quizResultEmoji" class="text-8xl mb-4">🎉</div>
                <h3 id="quizResultTitle" class="text-3xl font-bold text-gray-800 mb-4">Selamat!</h3>
                <div class="bg-gradient-to-r from-blue-100 to-purple-100 p-6 rounded-xl mb-6">
                    <div class="text-center mb-4">
                        <div class="text-4xl font-bold text-gray-800 mb-2">
                            <span id="quizFinalScore" class="text-blue-600">0</span>/<span id="quizTotalQuestions" class="text-gray-600">12</span>
                        </div>
                        <div class="text-lg text-gray-600 mb-4">Jawaban Benar</div>
                    </div>
                    <div class="text-center mb-4">
                        <div class="text-2xl font-bold text-gray-800">
                            ⏰ Waktu: <span id="quizFinalTime" class="text-purple-600">0:00</span>
                        </div>
                    </div>
                    <p id="quizScoreMessage" class="text-lg text-gray-700 font-semibold text-center">
                        Hebat sekali!
                    </p>
                </div>
                <div class="space-y-4">
                    <button class="w-full neon-button text-black px-8 py-3 rounded-full font-bold transition-all duration-300 transform hover:scale-105" onclick="playSound('click'); restartQuiz()">
                        🔄 Coba Lagi
                    </button>
                    <button class="w-full bg-gradient-to-r from-gray-500 to-gray-600 hover:from-gray-600 hover:to-gray-700 text-white px-8 py-3 rounded-full font-bold transition-all duration-300 transform hover:scale-105" onclick="playSound('click'); closeQuizResults(); showPage('homePage')">
                        🏠 Kembali ke Beranda
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Quiz Exit Confirmation Modal -->
    <div id="quizExitModal" class="hidden fixed inset-0 bg-black/50 flex items-center justify-center z-50">
        <div class="glass-card rounded-3xl p-8 max-w-md mx-4 shadow-2xl bounce-in-3d glow-effect">
            <div class="text-center">
                <div class="text-8xl mb-4">⚠️</div>
                <h3 class="text-3xl font-bold text-gray-800 mb-4">Keluar Quiz?</h3>
                <div class="bg-gradient-to-r from-yellow-100 to-orange-100 p-6 rounded-xl mb-6">
                    <p class="text-xl text-gray-700 font-semibold mb-2">
                        Apakah kamu yakin ingin keluar?
                    </p>
                    <p class="text-lg text-gray-600">
                        Progres quiz akan hilang dan tidak tersimpan.
                    </p>
                </div>
                <div class="space-y-4">
                    <button class="w-full bg-gradient-to-r from-red-500 to-pink-500 hover:from-red-600 hover:to-pink-600 text-white px-8 py-3 rounded-full font-bold transition-all duration-300 transform hover:scale-105" onclick="playSound('click'); exitQuiz()">
                        ✅ Ya, Keluar
                    </button>
                    <button class="w-full neon-button text-black px-8 py-3 rounded-full font-bold transition-all duration-300 transform hover:scale-105" onclick="playSound('click'); closeExitQuiz()">
                        ❌ Batal
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Quiz Coming Soon Modal -->
    <div id="quizComingSoonModal" class="hidden fixed inset-0 bg-black/50 flex items-center justify-center z-50">
        <div class="glass-card rounded-3xl p-8 max-w-md mx-4 shadow-2xl bounce-in-3d glow-effect">
            <div class="text-center">
                <div class="text-8xl mb-4">🚧</div>
                <h3 class="text-3xl font-bold text-gray-800 mb-4">Segera Hadir!</h3>
                <div class="bg-gradient-to-r from-yellow-100 to-orange-100 p-6 rounded-xl mb-6">
                    <p class="text-xl text-gray-700 font-semibold mb-2">
                        Fitur Latihan Soal sedang dalam pengembangan
                    </p>
                    <p class="text-lg text-gray-600">
                        Nantikan update selanjutnya! 🎯
                    </p>
                </div>
                <button class="neon-button text-black px-8 py-3 rounded-full font-bold transition-all duration-300 transform hover:scale-105" onclick="playSound('click'); closeQuizComingSoon()">
                    👍 Mengerti!
                </button>
            </div>
        </div>
    </div>

    <script>
        // Global Variables
        let audioContext;
        let isAudioPlaying = false;
        let currentSlide = 1;
        let totalSlides = 6;
        let playerName = '';

        let memoryGameTimer;
        let memoryGameStartTime;
        let memoryGameMatches = 0;
        let memoryCards = [];
        let flippedCards = [];
        let canFlip = true;
        
        // Slide answer tracking
        let slide2Answered = false;
        let slide3Answered = false;
        let slide4Answered = false;



        // Memory Game Cards (Rebana pairs)
        const memoryCardImages = [
            'https://i.imgur.com/b1Zlbkt.png',
            'https://i.imgur.com/Ejy16gR.png',
            'https://i.imgur.com/80ICXOO.png',
            'https://i.imgur.com/gcJxB4M.png',
            'https://i.imgur.com/Veak9do.png',
            'https://i.imgur.com/w12jWLf.png',
            'https://i.imgur.com/0fxX71F.png',
            'https://i.imgur.com/bsv7VA7.png',
            'https://i.imgur.com/hDz2ArX.png',
            'https://i.imgur.com/974FBWr.png',
            'https://i.imgur.com/2witPyO.png',
            'https://i.imgur.com/xte0thx.png'
        ];

        // Memory Game Card Pairs
        const memoryCardPairs = [
            ['https://i.imgur.com/b1Zlbkt.png', 'https://i.imgur.com/Ejy16gR.png'],
            ['https://i.imgur.com/80ICXOO.png', 'https://i.imgur.com/gcJxB4M.png'],
            ['https://i.imgur.com/Veak9do.png', 'https://i.imgur.com/w12jWLf.png'],
            ['https://i.imgur.com/0fxX71F.png', 'https://i.imgur.com/bsv7VA7.png'],
            ['https://i.imgur.com/hDz2ArX.png', 'https://i.imgur.com/974FBWr.png'],
            ['https://i.imgur.com/2witPyO.png', 'https://i.imgur.com/xte0thx.png']
        ];

        // Audio Functions
        function initAudioContext() {
            if (!audioContext) {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
            }
            if (audioContext.state === 'suspended') {
                audioContext.resume();
            }
        }

        function toggleAudio() {
            const audio = document.getElementById('backgroundAudio');
            const audioIcon = document.getElementById('audioIcon');
            const audioTooltip = document.getElementById('audioTooltip');
            
            initAudioContext();
            
            if (isAudioPlaying) {
                audio.pause();
                audioIcon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z" clip-rule="evenodd"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2"></path>';
                audioTooltip.textContent = 'Nyalakan Musik';
                isAudioPlaying = false;
            } else {
                audio.play().then(() => {
                    audioIcon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"></path>';
                    audioTooltip.textContent = 'Matikan Musik';
                    isAudioPlaying = true;
                }).catch(e => console.log('Audio play failed:', e));
            }
        }

        function playSound(type) {
            initAudioContext();
            
            switch(type) {
                case 'click':
                    playClickSound();
                    break;
                case 'correct':
                    playCorrectSound();
                    break;
                case 'wrong':
                    playWrongSound();
                    break;
                case 'start':
                    playStartSound();
                    break;
                case 'complete':
                    playCompleteSound();
                    break;
                case 'select':
                    playSelectSound();
                    break;
                case 'hover':
                    playHoverSound();
                    break;
                case 'celebration':
                    playCelebrationSound();
                    break;
                case 'warning':
                    playWarningSound();
                    break;
                default:
                    playClickSound();
            }
        }

        function playClickSound() {
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
            oscillator.type = 'sine';
            
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.05, audioContext.currentTime + 0.1);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.1);
        }

        function playSelectSound() {
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.setValueAtTime(600, audioContext.currentTime);
            oscillator.frequency.exponentialRampToValueAtTime(900, audioContext.currentTime + 0.15);
            oscillator.type = 'triangle';
            
            gainNode.gain.setValueAtTime(0.25, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.05, audioContext.currentTime + 0.15);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.15);
        }

        function playCorrectSound() {
            // Play a cheerful ascending melody
            const frequencies = [523, 659, 784, 1047]; // C5, E5, G5, C6
            const duration = 0.15;
            
            frequencies.forEach((freq, index) => {
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.setValueAtTime(freq, audioContext.currentTime);
                oscillator.type = 'triangle';
                
                const startTime = audioContext.currentTime + (index * 0.1);
                gainNode.gain.setValueAtTime(0.3, startTime);
                gainNode.gain.exponentialRampToValueAtTime(0.05, startTime + duration);
                
                oscillator.start(startTime);
                oscillator.stop(startTime + duration);
            });
        }

        function playWrongSound() {
            // Play a descending "wrong" sound
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.setValueAtTime(400, audioContext.currentTime);
            oscillator.frequency.exponentialRampToValueAtTime(200, audioContext.currentTime + 0.5);
            oscillator.type = 'sawtooth';
            
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.05, audioContext.currentTime + 0.5);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.5);
        }

        function playStartSound() {
            // Play an energetic start sound
            const frequencies = [440, 554, 659, 880]; // A4, C#5, E5, A5
            
            frequencies.forEach((freq, index) => {
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.setValueAtTime(freq, audioContext.currentTime);
                oscillator.type = 'square';
                
                const startTime = audioContext.currentTime + (index * 0.05);
                gainNode.gain.setValueAtTime(0.2, startTime);
                gainNode.gain.exponentialRampToValueAtTime(0.05, startTime + 0.2);
                
                oscillator.start(startTime);
                oscillator.stop(startTime + 0.2);
            });
        }

        function playCompleteSound() {
            // Play a victory fanfare
            const melody = [
                {freq: 523, time: 0},     // C5
                {freq: 659, time: 0.1},   // E5
                {freq: 784, time: 0.2},   // G5
                {freq: 1047, time: 0.3},  // C6
                {freq: 1047, time: 0.5},  // C6
                {freq: 1047, time: 0.7}   // C6
            ];
            
            melody.forEach(note => {
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.setValueAtTime(note.freq, audioContext.currentTime);
                oscillator.type = 'triangle';
                
                const startTime = audioContext.currentTime + note.time;
                gainNode.gain.setValueAtTime(0.3, startTime);
                gainNode.gain.exponentialRampToValueAtTime(0.05, startTime + 0.3);
                
                oscillator.start(startTime);
                oscillator.stop(startTime + 0.3);
            });
        }

        function playHoverSound() {
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.setValueAtTime(1200, audioContext.currentTime);
            oscillator.type = 'sine';
            
            gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.05);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.05);
        }

        function playCelebrationSound() {
            // Play multiple celebration sounds
            for (let i = 0; i < 5; i++) {
                setTimeout(() => {
                    const oscillator = audioContext.createOscillator();
                    const gainNode = audioContext.createGain();
                    
                    oscillator.connect(gainNode);
                    gainNode.connect(audioContext.destination);
                    
                    const freq = 800 + Math.random() * 400;
                    oscillator.frequency.setValueAtTime(freq, audioContext.currentTime);
                    oscillator.type = 'triangle';
                    
                    gainNode.gain.setValueAtTime(0.2, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.05, audioContext.currentTime + 0.2);
                    
                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + 0.2);
                }, i * 100);
            }
        }

        function playWarningSound() {
            // Play warning beeps
            for (let i = 0; i < 3; i++) {
                setTimeout(() => {
                    const oscillator = audioContext.createOscillator();
                    const gainNode = audioContext.createGain();
                    
                    oscillator.connect(gainNode);
                    gainNode.connect(audioContext.destination);
                    
                    oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
                    oscillator.type = 'square';
                    
                    gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.05, audioContext.currentTime + 0.1);
                    
                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + 0.1);
                }, i * 150);
            }
        }

        // Page Navigation
        function showPage(pageId) {
            const pages = ['homePage', 'materialPage', 'memoryGamePage', 'quizPage', 'nameInputPage'];
            pages.forEach(page => {
                document.getElementById(page).classList.add('hidden');
            });
            document.getElementById(pageId).classList.remove('hidden');
            
            // Clear quiz timer if leaving quiz page
            if (pageId !== 'quizPage' && quizTimer) {
                clearInterval(quizTimer);
            }
        }

        function confirmExitQuiz() {
            document.getElementById('quizExitModal').classList.remove('hidden');
        }

        function exitQuiz() {
            document.getElementById('quizExitModal').classList.add('hidden');
            clearInterval(quizTimer);
            showPage('homePage');
        }

        function closeExitQuiz() {
            document.getElementById('quizExitModal').classList.add('hidden');
        }

        function showMaterial() {
            document.getElementById("homePage").classList.add("hidden");
            document.getElementById("materialPage").classList.remove("hidden");
            currentSlide = 1;
            updateSlideDisplay();
        }

        function showNameInput() {
            showPage('nameInputPage');
            document.getElementById('playerName').focus();
        }

        function checkNameInput() {
            const nameInput = document.getElementById('playerName');
            const startBtn = document.getElementById('startQuizBtn');
            const errorDiv = document.getElementById('nameError');
            
            const name = nameInput.value.trim();
            
            if (name.length >= 2) {
                startBtn.disabled = false;
                startBtn.classList.remove('opacity-50', 'cursor-not-allowed');
                errorDiv.classList.add('hidden');
            } else {
                startBtn.disabled = true;
                startBtn.classList.add('opacity-50', 'cursor-not-allowed');
                if (name.length > 0 && name.length < 2) {
                    errorDiv.classList.remove('hidden');
                } else {
                    errorDiv.classList.add('hidden');
                }
            }
        }

        function startQuizWithName() {
            const nameInput = document.getElementById('playerName');
            const name = nameInput.value.trim();
            
            if (name.length < 2) {
                document.getElementById('nameError').classList.remove('hidden');
                playSound('wrong');
                return;
            }
            
            playerName = name;
            showPage('quizPage');
            initQuiz();
        }

        function showMemoryGame() {
            document.getElementById("homePage").classList.add("hidden");
            document.getElementById("memoryGamePage").classList.remove("hidden");
            initMemoryGame();
        }

        // Material Slides Functions
        function changeSlide(direction) {
            // Check if trying to go forward and current slide requires an answer
            if (direction === 1) {
                if (currentSlide === 2 && !slide2Answered) {
                    playSound('wrong');
                    return;
                } else if (currentSlide === 3 && !slide3Answered) {
                    playSound('wrong');
                    return;
                } else if (currentSlide === 4 && !slide4Answered) {
                    playSound('wrong');
                    return;
                }
            }
            
            const newSlide = currentSlide + direction;
            if (newSlide >= 1 && newSlide <= totalSlides) {
                currentSlide = newSlide;
                updateSlideDisplay();
            }
        }

        function goToSlide(slideNumber) {
            if (slideNumber >= 1 && slideNumber <= totalSlides) {
                currentSlide = slideNumber;
                updateSlideDisplay();
            }
        }

        function updateSlideDisplay() {
            // Hide all slides
            for (let i = 1; i <= totalSlides; i++) {
                document.getElementById(`slide${i}`).classList.add('hidden');
            }
            
            // Show current slide
            document.getElementById(`slide${currentSlide}`).classList.remove('hidden');
            
            // Reset answer buttons and status when going back to slides 2, 3, or 4
            if (currentSlide === 2) {
                const btn1 = document.getElementById('slide2BtnSama');
                const btn2 = document.getElementById('slide2BtnTidakSama');
                const answerDiv = document.getElementById('slide2Answer');
                if (btn1 && btn2) {
                    btn1.disabled = false;
                    btn2.disabled = false;
                    btn1.classList.remove('opacity-50', 'cursor-not-allowed');
                    btn2.classList.remove('opacity-50', 'cursor-not-allowed');
                    if (answerDiv) {
                        answerDiv.classList.add('hidden');
                    }
                    slide2Answered = false;
                }
            } else if (currentSlide === 3) {
                const btn1 = document.getElementById('slide3BtnSama');
                const btn2 = document.getElementById('slide3BtnTidakSama');
                const answerDiv = document.getElementById('slide3Answer');
                if (btn1 && btn2) {
                    btn1.disabled = false;
                    btn2.disabled = false;
                    btn1.classList.remove('opacity-50', 'cursor-not-allowed');
                    btn2.classList.remove('opacity-50', 'cursor-not-allowed');
                    if (answerDiv) {
                        answerDiv.classList.add('hidden');
                    }
                    slide3Answered = false;
                }
            } else if (currentSlide === 4) {
                const textarea = document.getElementById('slide4Answer');
                const feedback = document.getElementById('slide4Feedback');
                if (textarea) {
                    textarea.value = '';
                }
                if (feedback) {
                    feedback.classList.add('hidden');
                }
                slide4Answered = false;
            }
            
            // Update indicators
            for (let i = 1; i <= totalSlides; i++) {
                const indicator = document.getElementById(`slideIndicator${i}`);
                if (i === currentSlide) {
                    indicator.classList.add('active');
                    indicator.classList.remove('bg-gray-300');
                    indicator.classList.add('bg-blue-500');
                } else {
                    indicator.classList.remove('active');
                    indicator.classList.remove('bg-blue-500');
                    indicator.classList.add('bg-gray-300');
                }
            }
            
            // Update navigation buttons
            updateNavigationButtons();
            
            // Update counter
            document.getElementById('slideCounter').textContent = `Slide ${currentSlide} dari ${totalSlides}`;
        }

        function updateNavigationButtons() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            
            prevBtn.disabled = currentSlide === 1;
            
            // Check if current slide requires an answer
            let canProceed = true;
            if (currentSlide === 2 && !slide2Answered) {
                canProceed = false;
            } else if (currentSlide === 3 && !slide3Answered) {
                canProceed = false;
            } else if (currentSlide === 4 && !slide4Answered) {
                canProceed = false;
            }
            
            nextBtn.disabled = !canProceed || currentSlide === totalSlides;
            
            // Add visual feedback for disabled state
            if (nextBtn.disabled) {
                nextBtn.classList.add('opacity-50', 'cursor-not-allowed');
                nextBtn.classList.remove('hover:scale-105');
            } else {
                nextBtn.classList.remove('opacity-50', 'cursor-not-allowed');
                nextBtn.classList.add('hover:scale-105');
            }
        }

        function showSlide1Popup() {
            document.getElementById('slide1PopupModal').classList.remove('hidden');
        }

        function hideSlide1Popup() {
            document.getElementById('slide1PopupModal').classList.add('hidden');
        }

        // Slide 2 Answer Function
        function answerSlide2(answer) {
            const answerDiv = document.getElementById('slide2Answer');
            answerDiv.classList.remove('hidden');
            
            // Mark as answered and update navigation
            slide2Answered = true;
            updateNavigationButtons();
            
            // Disable buttons after answering
            document.getElementById('slide2BtnSama').disabled = true;
            document.getElementById('slide2BtnTidakSama').disabled = true;
            document.getElementById('slide2BtnSama').classList.add('opacity-50', 'cursor-not-allowed');
            document.getElementById('slide2BtnTidakSama').classList.add('opacity-50', 'cursor-not-allowed');
            
            if (answer === 'sama') {
                answerDiv.innerHTML = `
                    <div class="bg-green-100 border-l-4 border-green-500 p-4">
                        <div class="flex items-center">
                            <div class="text-green-500 text-2xl mr-3">✅</div>
                            <p class="text-green-700 font-semibold">Ya, kamu benar. Segitiga putih dan segitiga merah memiliki bentuk yang sama.</p>
                        </div>
                    </div>
                `;
                playSound('correct');
            } else {
                answerDiv.innerHTML = `
                    <div class="bg-red-100 border-l-4 border-red-500 p-4">
                        <div class="flex items-center">
                            <div class="text-red-500 text-2xl mr-3">❌</div>
                            <p class="text-red-700 font-semibold">Belum tepat. Jawaban yang benar adalah segitiga putih dan segitiga merah memiliki bentuk yang sama.</p>
                        </div>
                    </div>
                `;
                playSound('wrong');
            }
        }

        // Slide 3 Answer Function
        function answerSlide3(answer) {
            const answerDiv = document.getElementById('slide3Answer');
            answerDiv.classList.remove('hidden');
            
            // Mark as answered and update navigation
            slide3Answered = true;
            updateNavigationButtons();
            
            // Disable buttons after answering
            document.getElementById('slide3BtnSama').disabled = true;
            document.getElementById('slide3BtnTidakSama').disabled = true;
            document.getElementById('slide3BtnSama').classList.add('opacity-50', 'cursor-not-allowed');
            document.getElementById('slide3BtnTidakSama').classList.add('opacity-50', 'cursor-not-allowed');
            
            if (answer === 'sama') {
                answerDiv.innerHTML = `
                    <div class="bg-green-100 border-l-4 border-green-500 p-4 mb-4">
                        <div class="flex items-center mb-3">
                            <div class="text-green-500 text-2xl mr-3">✅</div>
                            <p class="text-green-700 font-semibold">Ya, kamu benar. Sudut-sudut dan perbandingan sisi-sisi yang bersesuaian sama. Karena segitiga merah terbentuk dari garis yang sejajar dengan alas segitiga putih. Sehingga sudut-sudut yang bersesuaian sama besar. Jika dua segitiga memiliki sudut-sudut yang bersesuaian sama besar, maka sisi-sisi yang bersesuaian memiliki perbandingan yang sama.</p>
                        </div>
                    </div>
                    <div class="text-center">
                        <img src="https://i.imgur.com/x1f1LQy.png" alt="Penjelasan Sudut dan Sisi" class="w-full max-w-md mx-auto rounded-xl shadow-lg object-contain" style="max-height: 200px; height: auto;" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                        <div class="hidden bg-gradient-to-r from-blue-500 to-purple-500 text-white p-6 rounded-xl">
                            <div class="text-4xl mb-2">📐</div>
                            <p class="font-semibold">Penjelasan Sudut dan Sisi</p>
                        </div>
                    </div>
                `;
                playSound('correct');
            } else {
                answerDiv.innerHTML = `
                    <div class="bg-red-100 border-l-4 border-red-500 p-4 mb-4">
                        <div class="flex items-center mb-3">
                            <div class="text-red-500 text-2xl mr-3">❌</div>
                            <p class="text-red-700 font-semibold">Belum tepat. Jawaban yang benar adalah sudut-sudut dan perbandingan sisi-sisi yang bersesuaian sama. Karena segitiga merah terbentuk dari garis yang sejajar dengan alas segitiga putih. Sehingga sudut-sudut yang bersesuaian sama besar. Jika dua segitiga memiliki sudut-sudut yang bersesuaian sama besar, maka sisi-sisi yang bersesuaian memiliki perbandingan yang sama.</p>
                        </div>
                    </div>
                    <div class="text-center">
                        <img src="https://i.imgur.com/x1f1LQy.png" alt="Penjelasan Sudut dan Sisi" class="w-full max-w-md mx-auto rounded-xl shadow-lg object-contain" style="max-height: 200px; height: auto;" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                        <div class="hidden bg-gradient-to-r from-blue-500 to-purple-500 text-white p-6 rounded-xl">
                            <div class="text-4xl mb-2">📐</div>
                            <p class="font-semibold">Penjelasan Sudut dan Sisi</p>
                        </div>
                    </div>
                `;
                playSound('wrong');
            }
        }

        // Slide 4 Answer Check Function
        function checkSlide4Answer() {
            const answer = document.getElementById('slide4Answer').value.trim();
            const feedback = document.getElementById('slide4Feedback');
            
            if (answer.length > 0) {
                feedback.classList.remove('hidden');
                slide4Answered = true;
                updateNavigationButtons();
            } else {
                feedback.classList.add('hidden');
                slide4Answered = false;
                updateNavigationButtons();
            }
        }



        function showMaterial() {
            showPage('materialPage');
            currentSlide = 1;
            updateSlideDisplay();
        }

        function showMemoryGame() {
            showPage('memoryGamePage');
            initMemoryGame();
        }



        function toggleAudio() {
            const audio = document.getElementById("backgroundAudio");
            const audioIcon = document.getElementById('audioIcon');
            const audioTooltip = document.getElementById('audioTooltip');
            
            initAudioContext();
            
            if (isAudioPlaying) {
                audio.pause();
                audioIcon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z" clip-rule="evenodd"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2"></path>';
                audioTooltip.textContent = 'Nyalakan Musik';
                isAudioPlaying = false;
            } else {
                audio.play().then(() => {
                    audioIcon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"></path>';
                    audioTooltip.textContent = 'Matikan Musik';
                    isAudioPlaying = true;
                }).catch(e => console.log('Audio play failed:', e));
            }
        }

        // Memory Game Functions
        function initMemoryGame() {
            memoryGameMatches = 0;
            memoryGameStartTime = Date.now();
            flippedCards = [];
            canFlip = true;
            
            // Create card pairs using the 12 images
            memoryCards = [...memoryCardImages];
            shuffleArray(memoryCards);
            
            // Create game board
            const gameBoard = document.getElementById('memoryGameBoard');
            gameBoard.innerHTML = '';
            
            memoryCards.forEach((card, index) => {
                const cardElement = document.createElement('div');
                cardElement.className = 'memory-card';
                cardElement.dataset.index = index;
                cardElement.dataset.value = card;
                
                // Create front image (cover)
                const frontImg = document.createElement('img');
                frontImg.src = 'https://i.imgur.com/vHjoLP5.png';
                frontImg.alt = 'Kartu Rebana';
                frontImg.onerror = function() {
                    this.style.display = 'none';
                    cardElement.style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
                    cardElement.innerHTML = '🎵';
                };
                
                cardElement.appendChild(frontImg);
                cardElement.addEventListener('click', () => flipCard(index));
                gameBoard.appendChild(cardElement);
            });
            
            // Start timer
            startMemoryGameTimer();
            updateMemoryGameStats();
        }

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        function startMemoryGameTimer() {
            memoryGameTimer = setInterval(() => {
                const elapsed = Math.floor((Date.now() - memoryGameStartTime) / 1000);
                const minutes = Math.floor(elapsed / 60);
                const seconds = elapsed % 60;
                document.getElementById('memoryGameTimer').textContent = 
                    `${minutes}:${seconds.toString().padStart(2, '0')}`;
            }, 1000);
        }

        function flipCard(index) {
            if (!canFlip || flippedCards.includes(index)) return;
            
            const cardElement = document.querySelector(`[data-index="${index}"]`);
            const cardValue = cardElement.dataset.value;
            
            // Replace front image with back image
            const backImg = document.createElement('img');
            backImg.src = cardValue;
            backImg.alt = 'Rebana';
            backImg.onerror = function() {
                this.style.display = 'none';
                cardElement.style.background = 'linear-gradient(135deg, #FFD700 0%, #FFA500 100%)';
                cardElement.innerHTML = '🥁';
            };
            
            cardElement.innerHTML = '';
            cardElement.appendChild(backImg);
            cardElement.classList.add('flipped');
            flippedCards.push(index);
            
            playSound('select');
            
            if (flippedCards.length === 2) {
                canFlip = false;
                setTimeout(checkMatch, 1000);
            }
        }

        function checkMatch() {
            const [first, second] = flippedCards;
            const firstCard = document.querySelector(`[data-index="${first}"]`);
            const secondCard = document.querySelector(`[data-index="${second}"]`);
            
            const firstValue = firstCard.dataset.value;
            const secondValue = secondCard.dataset.value;
            
            // Check if cards are a matching pair
            let isMatch = false;
            for (let pair of memoryCardPairs) {
                if ((pair[0] === firstValue && pair[1] === secondValue) || 
                    (pair[1] === firstValue && pair[0] === secondValue)) {
                    isMatch = true;
                    break;
                }
            }
            
            if (isMatch) {
                // Match found
                firstCard.classList.add('matched');
                secondCard.classList.add('matched');
                memoryGameMatches++;
                updateMemoryGameStats();
                playSound('correct');
                
                if (memoryGameMatches === 6) {
                    // Game completed (6 pairs)
                    setTimeout(() => {
                        finishMemoryGame();
                        playSound('celebration');
                    }, 500);
                }
            } else {
                // No match - flip back to front
                const frontImg1 = document.createElement('img');
                frontImg1.src = 'https://i.imgur.com/vHjoLP5.png';
                frontImg1.alt = 'Kartu Rebana';
                frontImg1.onerror = function() {
                    this.style.display = 'none';
                    firstCard.style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
                    firstCard.innerHTML = '🎵';
                };
                
                const frontImg2 = document.createElement('img');
                frontImg2.src = 'https://i.imgur.com/vHjoLP5.png';
                frontImg2.alt = 'Kartu Rebana';
                frontImg2.onerror = function() {
                    this.style.display = 'none';
                    secondCard.style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
                    secondCard.innerHTML = '🎵';
                };
                
                firstCard.innerHTML = '';
                secondCard.innerHTML = '';
                firstCard.appendChild(frontImg1);
                secondCard.appendChild(frontImg2);
                firstCard.classList.remove('flipped');
                secondCard.classList.remove('flipped');
                playSound('wrong');
            }
            
            flippedCards = [];
            canFlip = true;
        }

        function updateMemoryGameStats() {
            document.getElementById('memoryGameMatches').textContent = memoryGameMatches;
        }

        function finishMemoryGame() {
            clearInterval(memoryGameTimer);
            const elapsed = Math.floor((Date.now() - memoryGameStartTime) / 1000);
            const minutes = Math.floor(elapsed / 60);
            const seconds = elapsed % 60;
            const timeString = `${minutes}:${seconds.toString().padStart(2, '0')}`;
            
            showMemoryGameResults(timeString);
            playSound('complete');
        }

        function showMemoryGameResults(finalTime) {
            document.getElementById('memoryFinalTime').textContent = finalTime;
            
            const resultEmoji = document.getElementById('memoryResultEmoji');
            const scoreMessage = document.getElementById('memoryScoreMessage');
            
            const totalSeconds = parseInt(finalTime.split(':')[0]) * 60 + parseInt(finalTime.split(':')[1]);
            
            if (totalSeconds <= 60) {
                resultEmoji.textContent = '🏆';
                scoreMessage.textContent = 'Luar biasa! Kamu sangat cepat!';
            } else if (totalSeconds <= 120) {
                resultEmoji.textContent = '🎉';
                scoreMessage.textContent = 'Hebat! Waktu yang bagus!';
            } else if (totalSeconds <= 180) {
                resultEmoji.textContent = '👍';
                scoreMessage.textContent = 'Bagus! Terus berlatih!';
            } else {
                resultEmoji.textContent = '😊';
                scoreMessage.textContent = 'Tidak buruk! Coba lagi untuk waktu yang lebih baik!';
            }
            
            document.getElementById('memoryGameResultsModal').classList.remove('hidden');
        }

        function resetMemoryGame() {
            clearInterval(memoryGameTimer);
            initMemoryGame();
        }

        function restartMemoryGame() {
            document.getElementById('memoryGameResultsModal').classList.add('hidden');
            resetMemoryGame();
        }

        function closeMemoryGameResults() {
            document.getElementById('memoryGameResultsModal').classList.add('hidden');
        }

        // Quiz Variables
        let currentQuizQuestion = 0;
        let currentSubQuestion = 0;
        let quizTimer;
        let quizStartTime;
        let quizTimeLimit = 25 * 60; // 25 minutes in seconds
        let quizScore = 0;
        let quizCorrectCount = 0; // Track correct answers in real-time
        let totalQuizQuestions = 12; // 3 main questions × 4 sub-questions each
        let userAnswers = [];
        let lockedAnswers = []; // Track which answers are locked (can't be changed)

        // Quiz Data
        const quizData = [
            {
                title: "Pertanyaan 1",
                description: "Perhatikan gambar kain corak insang diatas!",
                image: "https://i.imgur.com/6FTTPjc.png",
                context: "Pada gambar terdapat dua segitiga, yaitu segitiga dengan garis tepi merah dan segitiga dengan garis tepi hitam. Diketahui panjang sisi alas segitiga merah adalah 12 cm, dan tinggi segitiga merah adalah 8 cm. Segitiga hitam berada di dalam segitiga merah dan sebangun dengan segitiga merah. Panjang sisi alas segitiga hitam adalah 6 cm.",
                questions: [
                    {
                        question: "Apa informasi yang belum diketahui dari soal tersebut?",
                        options: ["tinggi segitiga merah", "tinggi segitiga hitam"],
                        correct: 1
                    },
                    {
                        question: "Tentukan perbandingan panjang sisi alas segitiga hitam dan panjang sisi alas segitiga merah.",
                        options: ["⅓", "½"],
                        correct: 1
                    },
                    {
                        question: "Berapa tinggi segitiga hitam?",
                        options: ["6", "4"],
                        correct: 1
                    },
                    {
                        question: "Tentukan perbandingan tinggi segitiga hitam dan tinggi segitiga merah.",
                        options: ["¼", "½"],
                        correct: 1
                    }
                ]
            },
            {
                title: "Pertanyaan 2",
                description: "Perhatikan gambar diatas!",
                image: "https://i.imgur.com/3hiKbI9.png",
                context: "Atap rumah adat Melayu berbentuk segitiga sama kaki dengan alas 15 m dan tinggi 9 m. Di bawah atap utama ada segitiga hiasan dengan alas 5 m.",
                questions: [
                    {
                        question: "Apakah segitiga hiasan dan segitiga besar merupakan dua segitiga yang sebangun?",
                        options: ["Sebangun", "Tidak sebangun"],
                        correct: 0
                    },
                    {
                        question: "Apakah benar perbandingan alas segitiga hiasan dan alas segitiga besar adalah ⅓?",
                        options: ["benar", "salah"],
                        correct: 0
                    },
                    {
                        question: "Tinggi segitiga hiasan adalah …",
                        options: ["6 m", "3 m"],
                        correct: 1
                    },
                    {
                        question: "Apakah perbandingan tinggi segitiga hiasan dan tinggi segitiga besar sama dengan perbandingan alas segitiga hiasan dan alas segitiga besar?",
                        options: ["sama", "tidak sama"],
                        correct: 0
                    }
                ]
            },
            {
                title: "Pertanyaan 3",
                description: "Perhatikan gambar diatas!",
                image: "https://i.imgur.com/Z76rW2C.png",
                context: "Pintu rumah adat Melayu tersebut memiliki tinggi 210 cm dan lebar 90 cm. Pada pintu tersebut terdapat panel-panel berbentuk persegi panjang yang sebangun dengan pintu utama. Panel pada pintu memiliki lebar 60 cm.",
                questions: [
                    {
                        question: "Apa informasi yang belum diketahui dari soal tersebut?",
                        options: ["tinggi panel", "lebar pintu utama"],
                        correct: 0
                    },
                    {
                        question: "Perbandingan sisi bersesuaian yang tepat digunakan adalah …",
                        options: ["<img src='https://i.imgur.com/FpFnPXB.png' alt='Rumus A' class='w-full max-w-xs mx-auto rounded-lg shadow-md' onerror='this.style.display=\"none\"; this.nextElementSibling.style.display=\"block\";'><div class='hidden text-center bg-blue-100 p-3 rounded-lg'><span class='font-bold'>tinggi panel / tinggi pintu = lebar panel / lebar pintu</span></div>", "<img src='https://i.imgur.com/8RIOUZ4.png' alt='Rumus B' class='w-full max-w-xs mx-auto rounded-lg shadow-md' onerror='this.style.display=\"none\"; this.nextElementSibling.style.display=\"block\";'><div class='hidden text-center bg-orange-100 p-3 rounded-lg'><span class='font-bold'>tinggi panel / lebar panel = tinggi pintu / lebar pintu</span></div>"],
                        correct: 0
                    },
                    {
                        question: "Berapa tinggi panel?",
                        options: ["140", "120"],
                        correct: 0
                    },
                    {
                        question: "Apakah perbandingan tinggi panel dan tinggi pintu sama dengan perbandingan lebar panel dan lebar pintu?",
                        options: ["sama", "tidak sama"],
                        correct: 0
                    }
                ]
            }
        ];

        function showQuiz() {
            document.getElementById("homePage").classList.add("hidden");
            document.getElementById("quizPage").classList.remove("hidden");
            initQuiz();
        }

        function initQuiz() {
            currentQuizQuestion = 0;
            currentSubQuestion = 0;
            quizScore = 0;
            quizCorrectCount = 0;
            userAnswers = [];
            lockedAnswers = [];
            quizStartTime = Date.now();
            
            // Display player name
            document.getElementById('playerNameDisplay').textContent = playerName;
            
            // Start timer
            startQuizTimer();
            
            // Show first question
            displayQuizQuestion();
            
            playSound('start');
        }

        function startQuizTimer() {
            quizTimer = setInterval(() => {
                const elapsed = Math.floor((Date.now() - quizStartTime) / 1000);
                const remaining = Math.max(0, quizTimeLimit - elapsed);
                
                const minutes = Math.floor(remaining / 60);
                const seconds = remaining % 60;
                
                document.getElementById('quizTimer').textContent = 
                    `${minutes}:${seconds.toString().padStart(2, '0')}`;
                
                // Update progress bar
                const progress = ((quizTimeLimit - remaining) / quizTimeLimit) * 100;
                document.getElementById('quizTimerProgress').style.width = progress + '%';
                
                // Change color based on remaining time
                const progressBar = document.getElementById('quizTimerProgress');
                if (remaining < 300) { // Less than 5 minutes
                    progressBar.style.background = 'linear-gradient(90deg, #EF4444, #DC2626)';
                } else if (remaining < 600) { // Less than 10 minutes
                    progressBar.style.background = 'linear-gradient(90deg, #F59E0B, #D97706)';
                } else {
                    progressBar.style.background = 'linear-gradient(90deg, #10B981, #059669)';
                }
                
                if (remaining === 0) {
                    clearInterval(quizTimer);
                    finishQuiz();
                    playSound('warning');
                }
            }, 1000);
        }

        function displayQuizQuestion() {
            const currentData = quizData[currentQuizQuestion];
            const currentQ = currentData.questions[currentSubQuestion];
            
            // Update question info
            document.getElementById('quizQuestionTitle').textContent = currentData.title;
            document.getElementById('quizQuestionDescription').textContent = currentData.description;
            document.getElementById('quizQuestionContext').textContent = currentData.context;
            
            // Update image container based on question
            const imageContainer = document.getElementById('quizImageContainer');
            
            imageContainer.innerHTML = `
                <img src="${currentData.image}" alt="Gambar Soal" class="w-full max-w-lg mx-auto rounded-xl shadow-lg object-contain" style="max-height: 300px; height: auto;" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                <div class="hidden text-center">
                    <div class="text-6xl mb-4">${currentQuizQuestion === 0 ? '🎨' : currentQuizQuestion === 1 ? '🏠' : '🚪'}</div>
                    <p class="text-lg font-semibold">${currentQuizQuestion === 0 ? 'Kain Corak Insang' : currentQuizQuestion === 1 ? 'Atap Rumah Adat Melayu' : 'Pintu Rumah Adat Melayu'}</p>
                </div>
            `;
            imageContainer.className = 'bg-white p-4 rounded-xl border-2 border-gray-200';
            
            // Update sub-question
            document.getElementById('quizSubQuestion').textContent = `${currentSubQuestion + 1}. ${currentQ.question}`;
            
            // Update options
            const optionsContainer = document.getElementById('quizOptions');
            optionsContainer.innerHTML = '';
            
            const answerKey = `${currentQuizQuestion}-${currentSubQuestion}`;
            const isLocked = lockedAnswers.includes(answerKey);
            
            currentQ.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.className = 'quiz-option w-full text-left';
                button.innerHTML = `<span class="font-bold">${String.fromCharCode(65 + index)}.</span> ${option}`;
                
                if (isLocked) {
                    button.disabled = true;
                    button.classList.add('opacity-50', 'cursor-not-allowed');
                    button.onclick = null;
                } else {
                    button.onclick = () => selectQuizAnswer(index);
                }
                
                optionsContainer.appendChild(button);
            });
            
            // Update progress
            const totalAnswered = (currentQuizQuestion * 4) + currentSubQuestion;
            const currentQuestionNumber = totalAnswered + 1;
            
            // Update both progress displays
            const progressElement = document.getElementById('quizProgress');
            const progress2Element = document.getElementById('quizProgress2');
            
            if (progressElement) {
                progressElement.textContent = `${currentQuestionNumber}/${totalQuizQuestions}`;
            }
            if (progress2Element) {
                progress2Element.textContent = `${currentQuestionNumber}`;
            }
            
            document.getElementById('quizCorrectCount').textContent = quizCorrectCount;
            
            // Update progress bars (if they exist)
            const progressPercentage = (currentQuestionNumber / totalQuizQuestions) * 100;
            const progressBar = document.getElementById('quizProgressBar');
            if (progressBar) {
                progressBar.style.width = progressPercentage + '%';
            }
            
            const scorePercentage = (quizCorrectCount / totalQuizQuestions) * 100;
            const scoreBar = document.getElementById('quizScoreBar');
            if (scoreBar) {
                scoreBar.style.width = scorePercentage + '%';
            }
            
            // Update navigation buttons
            updateQuizNavigation();
        }

        function selectQuizAnswer(selectedIndex) {
            const answerKey = `${currentQuizQuestion}-${currentSubQuestion}`;
            
            // Check if answer is already locked
            if (lockedAnswers.includes(answerKey)) {
                return;
            }
            
            const options = document.querySelectorAll('.quiz-option');
            options.forEach((option, index) => {
                option.classList.remove('selected', 'correct', 'incorrect');
                if (index === selectedIndex) {
                    option.classList.add('selected');
                }
            });
            
            // Store answer
            userAnswers[answerKey] = selectedIndex;
            
            playSound('select');
            
            // Check if answer is correct and show feedback
            const currentData = quizData[currentQuizQuestion];
            const currentQ = currentData.questions[currentSubQuestion];
            const isCorrect = selectedIndex === currentQ.correct;
            
            // Show correct/incorrect feedback
            setTimeout(() => {
                options.forEach((option, index) => {
                    if (index === currentQ.correct) {
                        option.classList.add('correct');
                    } else if (index === selectedIndex && !isCorrect) {
                        option.classList.add('incorrect');
                    }
                });
                
                // Lock this answer so it can't be changed
                lockedAnswers.push(answerKey);
                
                // Update correct count if answer is correct
                if (isCorrect) {
                    quizCorrectCount++;
                    document.getElementById('quizCorrectCount').textContent = quizCorrectCount;
                    
                    // Update score progress bar
                    const scorePercentage = (quizCorrectCount / totalQuizQuestions) * 100;
                    document.getElementById('quizScoreBar').style.width = scorePercentage + '%';
                }
                
                // Enable next button immediately after answer is selected
                const nextBtn = document.getElementById('quizNextBtn');
                nextBtn.disabled = false;
                nextBtn.classList.remove('opacity-50', 'cursor-not-allowed');
                
                // Disable all option buttons
                options.forEach(option => {
                    option.disabled = true;
                    option.classList.add('cursor-not-allowed');
                    option.onclick = null;
                });
                
                if (isCorrect) {
                    playSound('correct');
                } else {
                    playSound('wrong');
                }
                
                // Store timeout ID so we can clear it if user clicks next manually
                const autoAdvanceTimeout = setTimeout(() => {
                    nextQuizQuestion();
                }, 10000);
                
                // Set up next button click handler to clear auto-advance
                const originalNextHandler = nextBtn.onclick;
                nextBtn.onclick = () => {
                    clearTimeout(autoAdvanceTimeout);
                    playSound('click');
                    nextQuizQuestion();
                };
                
            }, 500);
        }

        function nextQuizQuestion() {
            const answerKey = `${currentQuizQuestion}-${currentSubQuestion}`;
            if (userAnswers[answerKey] === undefined) {
                playSound('wrong');
                return;
            }
            
            // Score is already updated in selectQuizAnswer function
            // Just use the current quizCorrectCount as the final score
            quizScore = quizCorrectCount;
            
            // Move to next question
            currentSubQuestion++;
            
            if (currentSubQuestion >= quizData[currentQuizQuestion].questions.length) {
                // Move to next main question
                currentQuizQuestion++;
                currentSubQuestion = 0;
                
                if (currentQuizQuestion >= quizData.length) {
                    // Quiz finished
                    finishQuiz();
                    return;
                }
            }
            
            displayQuizQuestion();
        }

        function previousQuizQuestion() {
            if (currentSubQuestion > 0) {
                currentSubQuestion--;
            } else if (currentQuizQuestion > 0) {
                currentQuizQuestion--;
                currentSubQuestion = quizData[currentQuizQuestion].questions.length - 1;
            }
            
            displayQuizQuestion();
            
            // Check if this question was already answered
            const answerKey = `${currentQuizQuestion}-${currentSubQuestion}`;
            if (userAnswers[answerKey] !== undefined) {
                const options = document.querySelectorAll('.quiz-option');
                const selectedIndex = userAnswers[answerKey];
                
                if (lockedAnswers.includes(answerKey)) {
                    // Show the final state with correct/incorrect colors
                    const currentData = quizData[currentQuizQuestion];
                    const currentQ = currentData.questions[currentSubQuestion];
                    
                    options.forEach((option, index) => {
                        if (index === currentQ.correct) {
                            option.classList.add('correct');
                        } else if (index === selectedIndex && selectedIndex !== currentQ.correct) {
                            option.classList.add('incorrect');
                        }
                        option.disabled = true;
                        option.classList.add('cursor-not-allowed');
                        option.onclick = null;
                    });
                } else {
                    options[selectedIndex].classList.add('selected');
                }
                
                document.getElementById('quizNextBtn').disabled = false;
                document.getElementById('quizNextBtn').classList.remove('opacity-50', 'cursor-not-allowed');
            }
        }

        function updateQuizNavigation() {
            const prevBtn = document.getElementById('quizPrevBtn');
            const nextBtn = document.getElementById('quizNextBtn');
            
            // Previous button
            prevBtn.disabled = (currentQuizQuestion === 0 && currentSubQuestion === 0);
            
            // Next button
            const answerKey = `${currentQuizQuestion}-${currentSubQuestion}`;
            const hasAnswer = userAnswers[answerKey] !== undefined;
            
            nextBtn.disabled = !hasAnswer;
            if (nextBtn.disabled) {
                nextBtn.classList.add('opacity-50', 'cursor-not-allowed');
            } else {
                nextBtn.classList.remove('opacity-50', 'cursor-not-allowed');
            }
            
            // Set up next button click handler
            nextBtn.onclick = () => {
                playSound('click');
                nextQuizQuestion();
            };
            
            // Update button text for last question
            const isLastQuestion = (currentQuizQuestion === quizData.length - 1) && 
                                 (currentSubQuestion === quizData[currentQuizQuestion].questions.length - 1);
            nextBtn.textContent = isLastQuestion ? '🏁 Selesai' : 'Selanjutnya ➡️';
        }

        function finishQuiz() {
            clearInterval(quizTimer);
            
            const elapsed = Math.floor((Date.now() - quizStartTime) / 1000);
            const minutes = Math.floor(elapsed / 60);
            const seconds = elapsed % 60;
            const timeString = `${minutes}:${seconds.toString().padStart(2, '0')}`;
            
            showQuizResults(timeString);
            playSound('complete');
        }

        function showQuizResults(finalTime) {
            document.getElementById('quizFinalScore').textContent = quizScore;
            document.getElementById('quizTotalQuestions').textContent = totalQuizQuestions;
            document.getElementById('quizFinalTime').textContent = finalTime;
            
            const resultEmoji = document.getElementById('quizResultEmoji');
            const scoreMessage = document.getElementById('quizScoreMessage');
            const resultTitle = document.getElementById('quizResultTitle');
            
            if (quizScore >= 11) {
                resultEmoji.textContent = '🏆';
                resultTitle.textContent = `Luar Biasa, ${playerName}!`;
                scoreMessage.textContent = 'Kamu menguasai konsep kesebangunan dengan sempurna!';
            } else if (quizScore >= 9) {
                resultEmoji.textContent = '🎉';
                resultTitle.textContent = `Hebat, ${playerName}!`;
                scoreMessage.textContent = 'Pemahaman kamu tentang kesebangunan sangat baik!';
            } else if (quizScore >= 7) {
                resultEmoji.textContent = '👍';
                resultTitle.textContent = `Bagus, ${playerName}!`;
                scoreMessage.textContent = 'Kamu sudah memahami dasar-dasar kesebangunan!';
            } else if (quizScore >= 5) {
                resultEmoji.textContent = '😊';
                resultTitle.textContent = `Cukup Baik, ${playerName}!`;
                scoreMessage.textContent = 'Terus belajar untuk meningkatkan pemahaman!';
            } else {
                resultEmoji.textContent = '💪';
                resultTitle.textContent = `Semangat, ${playerName}!`;
                scoreMessage.textContent = 'Jangan menyerah! Pelajari materi lagi dan coba sekali lagi!';
            }
            
            document.getElementById('quizResultsModal').classList.remove('hidden');
        }

        function restartQuiz() {
            document.getElementById('quizResultsModal').classList.add('hidden');
            initQuiz();
        }

        function closeQuizResults() {
            document.getElementById('quizResultsModal').classList.add('hidden');
        }



        // Initialize particles and matrix rain
        function initParticles() {
            if (typeof particlesJS !== 'undefined') {
                particlesJS('particles-js', {
                    particles: {
                        number: { value: 80, density: { enable: true, value_area: 800 } },
                        color: { value: '#ffffff' },
                        shape: { type: 'circle' },
                        opacity: { value: 0.5, random: false },
                        size: { value: 3, random: true },
                        line_linked: { enable: true, distance: 150, color: '#ffffff', opacity: 0.4, width: 1 },
                        move: { enable: true, speed: 6, direction: 'none', random: false, straight: false, out_mode: 'out', bounce: false }
                    },
                    interactivity: {
                        detect_on: 'canvas',
                        events: { onhover: { enable: true, mode: 'repulse' }, onclick: { enable: true, mode: 'push' }, resize: true },
                        modes: { grab: { distance: 400, line_linked: { opacity: 1 } }, bubble: { distance: 400, size: 40, duration: 2, opacity: 8, speed: 3 }, repulse: { distance: 200, duration: 0.4 }, push: { particles_nb: 4 }, remove: { particles_nb: 2 } }
                    },
                    retina_detect: true
                });
            }
        }

        function initMatrixRain() {
            const matrixContainer = document.getElementById('matrixRain');
            const characters = '01';
            
            for (let i = 0; i < 50; i++) {
                const drop = document.createElement('div');
                drop.className = 'matrix-drop';
                drop.style.left = Math.random() * 100 + '%';
                drop.style.animationDuration = (Math.random() * 3 + 2) + 's';
                drop.style.animationDelay = Math.random() * 2 + 's';
                drop.textContent = characters[Math.floor(Math.random() * characters.length)];
                matrixContainer.appendChild(drop);
            }
        }

        // Initialize everything when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initParticles();
            initMatrixRain();
            
            // Auto-start background music after user interaction
            document.addEventListener('click', function() {
                if (!isAudioPlaying) {
                    const audio = document.getElementById('backgroundAudio');
                    audio.play().then(() => {
                        isAudioPlaying = true;
                        const audioIcon = document.getElementById('audioIcon');
                        const audioTooltip = document.getElementById('audioTooltip');
                        audioIcon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"></path>';
                        audioTooltip.textContent = 'Matikan Musik';
                    }).catch(e => console.log('Auto-play failed:', e));
                }
            }, { once: true });
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'980f5a1ee5aaf8da',t:'MTc1ODE4Mjg3MS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
