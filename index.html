<!doctype html>
<html lang="id">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ETHNOMATH - Ethnomathematics Twin Shapes</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&amp;display=swap" rel="stylesheet">
  <style>
        body {
            box-sizing: border-box;
            background: url('https://i.imgur.com/tSUqoTm.png') center center no-repeat, linear-gradient(135deg, #FF6B9D 0%, #FEC163 25%, #A8E6CF 50%, #FFD93D 75%, #FF6B9D 100%);
            background-size: cover, 100% 100%;
            background-attachment: fixed;
            min-height: 100%;
            width: 100%;
            position: relative;
            animation: gradientShift 15s ease infinite;
        }
        
        html {
            height: 100%;
            width: 100%;
        }
        
        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        
        @media (max-width: 768px) {
            body {
                background-size: cover;
                background-attachment: scroll;
            }
        }
        
        @media (min-width: 769px) and (max-width: 1024px) {
            body {
                background-size: cover;
            }
        }
        
        @media (min-width: 1025px) {
            body {
                background-size: contain;
            }
        }
        
        .glass-card {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 25px 45px rgba(0, 0, 0, 0.1);
        }

        .neon-button {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 25%, #FF8C00 50%, #FF6347 75%, #FF4500 100%);
            box-shadow: 0 10px 30px rgba(255, 215, 0, 0.4);
            text-shadow: 2px 2px 4px rgba(255, 255, 255, 0.9);
            border: 3px solid rgba(255, 215, 0, 0.6);
            color: black;
            font-weight: bold;
            padding: 12px 24px;
            border-radius: 25px;
            transition: all 0.3s ease;
        }
        
        .neon-button:hover {
            background: linear-gradient(135deg, #FFA500 0%, #FF8C00 25%, #FF6347 50%, #FF4500 75%, #DC143C 100%);
            transform: scale(1.05);
        }

        .game-title {
            background: linear-gradient(45deg, #FF6B6B, #4ECDC4, #45B7D1, #96CEB4, #FFEAA7);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .floating {
            animation: floating 3s ease-in-out infinite;
        }

        @keyframes floating {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .bounce-in-3d {
            animation: bounceIn3D 1s ease-out;
        }

        @keyframes bounceIn3D {
            0% {
                transform: scale3d(0.3, 0.3, 0.3);
                opacity: 0;
            }
            50% {
                transform: scale3d(1.1, 1.1, 1.1);
                opacity: 1;
            }
            100% {
                transform: scale3d(1, 1, 1);
                opacity: 1;
            }
        }

        .card-hover {
            transition: all 0.3s ease;
        }

        .card-hover:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.2);
        }

        .quiz-option {
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .quiz-option:hover {
            transform: scale(1.02);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .quiz-option.correct {
            background: linear-gradient(135deg, #10B981, #059669);
            color: white;
            animation: correctAnswer 0.5s ease;
        }

        .quiz-option.incorrect {
            background: linear-gradient(135deg, #EF4444, #DC2626);
            color: white;
            animation: incorrectAnswer 0.5s ease;
        }

        @keyframes correctAnswer {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        @keyframes incorrectAnswer {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
            100% { transform: translateX(0); }
        }

        @keyframes popupBounce {
            0% {
                transform: translate(-50%, -50%) scale(0);
                opacity: 0;
            }
            50% {
                transform: translate(-50%, -50%) scale(1.1);
            }
            100% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
            }
        }

        @keyframes popupFadeOut {
            0% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
            100% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.8);
            }
        }

        @keyframes confetti {
            0% { transform: translateY(0) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
        }

        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            z-index: 9999;
            animation: confetti 3s ease-out forwards;
        }

        @keyframes slideUpFade {
            0% {
                opacity: 0;
                transform: translateY(30px);
            }
            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .slide-up {
            animation: slideUpFade 0.6s ease-out forwards;
        }

        @keyframes fadeIn {
            0% { opacity: 0; }
            100% { opacity: 1; }
        }

        @keyframes fadeOut {
            0% { opacity: 1; }
            100% { opacity: 0; }
        }

        @media (max-width: 768px) {
            .glass-card {
                margin: 8px;
                padding: 16px !important;
            }
            
            .text-6xl {
                font-size: 2.5rem !important;
            }
            
            .text-5xl {
                font-size: 2rem !important;
            }
            
            .text-4xl {
                font-size: 1.75rem !important;
            }
            
            .text-3xl {
                font-size: 1.5rem !important;
            }
            
            .text-2xl {
                font-size: 1.25rem !important;
            }
            
            .text-xl {
                font-size: 1.1rem !important;
            }
            
            button, .neon-button {
                min-height: 48px !important;
                padding: 12px 16px !important;
                font-size: 16px !important;
            }
            
            /* Improve spacing on mobile */
            .space-y-6 > * + * {
                margin-top: 1rem !important;
            }
            
            .space-y-4 > * + * {
                margin-top: 0.75rem !important;
            }
            
            /* Make cards more compact on mobile */
            .grid.grid-cols-2 {
                gap: 0.75rem !important;
            }
            
            .grid.grid-cols-4 {
                grid-template-columns: repeat(2, minmax(0, 1fr)) !important;
            }
            
            /* Adjust padding for mobile */
            .p-8 {
                padding: 1.25rem !important;
            }
            
            .p-6 {
                padding: 1rem !important;
            }
            
            .p-4 {
                padding: 0.75rem !important;
            }
            
            /* Fix container width on mobile */
            .max-w-4xl,
            .max-w-2xl {
                max-width: 100% !important;
                margin-left: 0.5rem !important;
                margin-right: 0.5rem !important;
            }
            
            /* Make images more responsive */
            img {
                max-width: 100% !important;
                height: auto !important;
                display: block;
            }
            
            /* Prevent image overflow */
            .slide-content img,
            #quizContent img {
                max-width: 100% !important;
                width: auto !important;
                height: auto !important;
                object-fit: contain !important;
            }
            
            /* Ensure containers don't overflow */
            .slide-content,
            #quizContent {
                overflow-x: hidden;
                max-width: 100%;
            }
            
            /* Improve quiz layout on mobile */
            .quiz-option {
                padding: 0.75rem !important;
                font-size: 0.95rem !important;
            }
            
            /* Memory game cards on mobile */
            #memoryBoard {
                gap: 0.5rem !important;
            }
            
            /* Adjust modal sizes on mobile */
            .max-w-md {
                max-width: 95% !important;
            }
            
            .max-w-2xl {
                max-width: 95% !important;
            }
            
            .max-w-4xl {
                max-width: 95% !important;
            }
            
            /* Make tables scrollable on mobile */
            .overflow-x-auto {
                -webkit-overflow-scrolling: touch;
            }
            
            /* Adjust host dashboard on mobile */
            .grid.grid-cols-2.md\\:grid-cols-4 {
                grid-template-columns: repeat(2, minmax(0, 1fr)) !important;
                gap: 0.75rem !important;
            }
            
            /* Improve tab navigation on mobile */
            .flex.flex-wrap.gap-2 {
                gap: 0.5rem !important;
            }
            
            .tab-button {
                padding: 0.75rem 1rem !important;
                font-size: 0.9rem !important;
            }
        }
        
        /* Extra small devices (phones in portrait, less than 375px) */
        @media (max-width: 374px) {
            .text-6xl {
                font-size: 2rem !important;
            }
            
            .text-4xl {
                font-size: 1.5rem !important;
            }
            
            .text-3xl {
                font-size: 1.25rem !important;
            }
            
            .grid.grid-cols-2 {
                grid-template-columns: 1fr !important;
            }
            
            #memoryBoard {
                grid-template-columns: repeat(3, minmax(0, 1fr)) !important;
            }
        }
    
/* Memory game - responsive proportional images */
#memoryBoard img {
    width: 100%;
    height: auto;
    aspect-ratio: 1 / 1;
    object-fit: contain;
    max-height: 70px;
}
@media (max-width: 1024px) {
    #memoryBoard img { max-height: 60px; }
}
@media (max-width: 768px) {
    #memoryBoard img { max-height: 52px; }
}
@media (max-width: 420px) {
    #memoryBoard img { max-height: 44px; }
}

</style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="min-h-screen"><!-- Background Music -->
  <audio id="backgroundMusic" loop preload="auto"><source src="https://raw.githubusercontent.com/venisiswiandini/Ethnomath_/refs/heads/main/BS.mp3" type="audio/mpeg">
  </audio><!-- Enhanced Audio Control Button - Top Right --> <button id="audioButton" class="fixed top-4 right-4 z-50 neon-button rounded-full shadow-2xl flex items-center justify-center" style="z-index: 99999 !important; position: fixed !important; width: 56px !important; height: 56px !important; min-width: 56px !important; min-height: 56px !important; max-width: 56px !important; max-height: 56px !important; padding: 12px !important;" onclick="toggleAudio()">
   <svg id="audioIcon" class="w-6 h-6 flex-shrink-0" fill="none" stroke="currentColor" viewbox="0 0 24 24" style="width: 24px !important; height: 24px !important;"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"></path>
   </svg></button> <!-- Connection Status Indicator - Top Right (below audio button) -->
  <div id="connectionStatus" class="fixed top-20 right-4 z-50 bg-white/90 backdrop-blur-sm rounded-full px-3 py-2 shadow-lg border-2 border-gray-200" style="z-index: 99999 !important; position: fixed !important;">
   <div class="flex items-center space-x-2">
    <div id="connectionDot" class="w-3 h-3 rounded-full bg-yellow-500 animate-pulse"></div><span id="connectionText" class="text-xs font-bold text-gray-700">Testing...</span>
   </div>
  </div><!-- Host Button - Bottom Left --> <button id="hostButton" class="fixed bottom-4 left-4 z-50 bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white rounded-full shadow-2xl flex items-center justify-center transition-all duration-300 hover:scale-110" style="z-index: 99999 !important; position: fixed !important; width: 56px !important; height: 56px !important; min-width: 56px !important; min-height: 56px !important; max-width: 56px !important; max-height: 56px !important; padding: 12px !important;" onclick="showHostLogin()">
   <svg class="w-6 h-6 flex-shrink-0" fill="none" stroke="currentColor" viewbox="0 0 24 24" style="width: 24px !important; height: 24px !important;"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
   </svg></button> <!-- Host Login Modal -->
  <div id="hostLoginModal" class="hidden fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4" style="z-index: 99999 !important;">
   <div class="glass-card rounded-3xl p-8 max-w-md mx-auto w-full" style="animation: popupBounce 0.5s ease-out;">
    <div class="text-center mb-6">
     <div class="text-6xl mb-4">
      ğŸ”
     </div>
     <h2 class="text-3xl font-bold text-white mb-2">Host Login</h2>
     <p class="text-lg text-white/80">Masukkan password untuk akses dashboard</p>
    </div>
    <div class="bg-white/95 rounded-2xl p-6 shadow-2xl">
     <div class="mb-4"><label for="hostPassword" class="block text-lg font-bold text-gray-800 mb-3">ğŸ”‘ Password:</label> <input type="password" id="hostPassword" class="w-full px-6 py-4 text-lg border-3 border-gray-300 rounded-2xl focus:border-purple-500 focus:outline-none text-center font-semibold bg-white shadow-lg" placeholder="Masukkan password" onkeypress="if(event.key==='Enter') submitHostLogin()">
     </div>
     <div id="hostLoginError" class="hidden mb-4 p-4 bg-red-100 rounded-xl text-center">
      <p class="text-red-800 font-bold">âŒ Password salah!</p>
     </div>
     <div class="space-y-3"><button class="w-full bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white px-8 py-4 rounded-full font-bold text-lg" onclick="submitHostLogin()"> ğŸ”“ Login </button> <button class="w-full bg-gradient-to-r from-gray-500 to-gray-600 hover:from-gray-600 hover:to-gray-700 text-white px-8 py-4 rounded-full font-bold text-lg" onclick="closeHostLogin()"> âŒ Batal </button>
     </div>
    </div>
   </div>
  </div><!-- Name Input Page -->
  <div id="nameInputPage" class="hidden min-h-screen flex items-center justify-center p-4">
   <div class="glass-card rounded-3xl p-8 max-w-md mx-auto w-full">
    <div class="text-center mb-8">
     <h2 class="text-3xl md:text-4xl font-bold mb-4 game-title">ğŸ“ Masukkan Nama</h2>
     <div class="text-4xl md:text-6xl mb-4 floating">
      ğŸ‘¤
     </div>
     <p class="text-lg md:text-xl text-white">Siapa nama kamu?</p>
    </div>
    <div class="bg-white/95 rounded-3xl p-6 shadow-2xl">
     <div class="mb-6"><label for="nameInput" class="block text-lg font-bold text-gray-800 mb-3 text-center">ğŸŒŸ Nama Lengkap Kamu:</label> <input type="text" id="nameInput" class="w-full px-6 py-4 text-lg border-3 border-gray-300 rounded-2xl focus:border-blue-500 focus:outline-none text-center font-semibold bg-white shadow-lg" placeholder="Masukkan nama kamu" maxlength="50" onkeypress="if(event.key==='Enter') submitNameFromPage()" oninput="checkNameInput()" style="z-index: 99999 !important;">
     </div>
     <div id="nameWarning" class="hidden mb-4 p-4 bg-yellow-100 rounded-xl text-center">
      <p class="text-yellow-800 font-bold">âš ï¸ Silakan isi nama terlebih dahulu!</p>
     </div>
     <div class="space-y-4"><button id="startActivityBtn" class="w-full neon-button text-black px-8 py-4 rounded-full font-bold text-lg disabled:opacity-50" onclick="submitNameFromPage()" disabled style="z-index: 99999 !important;"> ğŸš€ Mulai </button> <button class="w-full bg-gradient-to-r from-gray-500 to-gray-600 hover:from-gray-600 hover:to-gray-700 text-white px-8 py-4 rounded-full font-bold text-lg" onclick="showPage('homePage')" style="z-index: 99999 !important;"> â¬…ï¸ Kembali ke Beranda </button>
     </div>
    </div>
   </div>
  </div><!-- Home Page -->
  <div id="homePage" class="min-h-screen flex items-center justify-center p-4">
   <div class="max-w-4xl mx-auto text-center w-full">
    <div class="glass-card rounded-3xl p-8 shadow-2xl bounce-in-3d card-hover">
     <div class="mb-8">
      <div class="text-6xl mb-4 floating">
       ğŸ®ğŸŒˆğŸ“âœ¨
      </div>
      <div class="flex justify-center mb-8">
       <div class="relative group w-full max-w-2xl">
        <div class="absolute -inset-6 bg-gradient-to-r from-yellow-400 via-orange-500 to-red-500 rounded-3xl blur-2xl opacity-30 group-hover:opacity-50 transition-all duration-500 animate-pulse"></div>
        <div class="relative glass-card rounded-3xl p-4 md:p-8 border-2 border-white/20 shadow-2xl">
         <div class="text-center bg-gradient-to-r from-yellow-600 to-orange-600 text-white p-4 md:p-8 rounded-2xl"><img src="https://i.imgur.com/sWMWajt.png" alt="ETHNOMATH Twin Shapes by Veni Siswiandini" class="w-full h-auto max-h-64 md:max-h-96 object-contain rounded-lg mx-auto" onerror="this.style.display='none'; this.parentElement.innerHTML='<div class=\'text-6xl mb-4\'>ğŸ“</div><h3 class=\'text-2xl font-bold text-white\'>ETHNOMATH</h3><p class=\'text-lg text-white\'>Twin Shapes by Veni Siswiandini</p>';" style="max-width: 100%;">
         </div>
        </div>
       </div>
      </div>
      <div class="text-2xl font-bold mb-6 text-center game-title">
       <div id="appTitle" style="font-family: 'Orbitron', monospace; font-weight: 600; font-size: 2.2rem; color: #FFFFFF; text-shadow: 2px 2px 4px rgba(0,0,0,0.5);">
        ETHNOMATH Twin Shapes
       </div>
       <div style="font-family: 'Orbitron', monospace; font-weight: 600; font-size: 1.2rem; color: #FFFFFF; text-shadow: 2px 2px 4px rgba(0,0,0,0.5);">
        by Veni Siswiandini
       </div>
      </div>
      <div class="text-3xl mb-6 floating">
       ğŸ¯ğŸªğŸš€ğŸŠ
      </div>
     </div><!-- Feature Cards -->
     <div class="grid grid-cols-2 md:grid-cols-4 gap-6 mb-8">
      <div class="glass-card rounded-2xl p-6 card-hover" style="border: 3px solid rgba(255, 107, 157, 0.8); background: linear-gradient(135deg, rgba(255, 107, 157, 0.3), rgba(255, 182, 193, 0.3));">
       <div class="text-5xl floating mb-3">
        ğŸ²
       </div>
       <div class="text-xl font-bold" style="color: #FF1493;">
        Seru &amp;
       </div>
       <div class="text-lg text-white font-bold">
        Menarik!
       </div>
      </div>
      <div class="glass-card rounded-2xl p-6 card-hover" style="border: 3px solid rgba(168, 230, 207, 0.8); background: linear-gradient(135deg, rgba(168, 230, 207, 0.3), rgba(144, 238, 144, 0.3));">
       <div class="text-5xl floating mb-3">
        â°
       </div>
       <div class="text-xl font-bold" style="color: #00C853;">
        Interaktif
       </div>
       <div class="text-lg text-white font-bold">
        Seru!
       </div>
      </div>
      <div class="glass-card rounded-2xl p-6 card-hover" style="border: 3px solid rgba(255, 217, 61, 0.8); background: linear-gradient(135deg, rgba(255, 217, 61, 0.3), rgba(255, 235, 59, 0.3));">
       <div class="text-5xl floating mb-3">
        ğŸ†
       </div>
       <div class="text-xl font-bold" style="color: #FF6F00;">
        Budaya
       </div>
       <div class="text-lg text-white font-bold">
        Melayu
       </div>
      </div>
      <div class="glass-card rounded-2xl p-6 card-hover" style="border: 3px solid rgba(186, 104, 200, 0.8); background: linear-gradient(135deg, rgba(186, 104, 200, 0.3), rgba(171, 71, 188, 0.3));">
       <div class="text-5xl floating mb-3">
        ğŸ¨
       </div>
       <div class="text-xl font-bold" style="color: #AA00FF;">
        Animasi
       </div>
       <div class="text-lg text-white font-bold">
        Keren!
       </div>
      </div>
     </div><!-- Main Menu Buttons -->
     <div class="space-y-6"><button class="w-full bg-gradient-to-r from-pink-400 via-rose-400 to-red-400 hover:from-pink-500 hover:via-rose-500 hover:to-red-500 text-white px-8 py-4 rounded-full font-bold text-lg transition-all duration-300 transform hover:scale-105 shadow-2xl" style="text-shadow: 2px 2px 4px rgba(0,0,0,0.3);" onclick="showMaterial()"> ğŸ“– Materi Pembelajaran ğŸ“š </button> <button class="w-full bg-gradient-to-r from-lime-400 via-green-400 to-emerald-500 hover:from-lime-500 hover:via-green-500 hover:to-emerald-600 text-white px-8 py-4 rounded-full font-bold text-lg transition-all duration-300 transform hover:scale-105 shadow-2xl" style="text-shadow: 2px 2px 4px rgba(0,0,0,0.3);" onclick="showQuiz()"> ğŸš€ Latihan Soal ğŸ® </button> <button class="w-full bg-gradient-to-r from-yellow-400 via-orange-400 to-pink-500 hover:from-yellow-500 hover:via-orange-500 hover:to-pink-600 text-white px-8 py-4 rounded-full font-bold text-lg transition-all duration-300 transform hover:scale-105 shadow-2xl" style="text-shadow: 2px 2px 4px rgba(0,0,0,0.3);" onclick="showMemoryGame()"> ğŸ® Cocokin Yuk! ğŸ§© </button>
     </div><!-- Footer -->
     <div class="mt-8 text-center">
      <div id="welcomeMessage" class="text-lg font-bold mb-4" style="color: #000000; text-shadow: 2px 2px 4px rgba(255, 255, 255, 0.9);">
       ğŸŒŸ Belajar Matematika Jadi Menyenangkan! ğŸŒŸ
      </div>
      <div class="flex justify-center space-x-3 text-3xl"><span class="animate-bounce floating">ğŸ‰</span> <span class="animate-bounce floating">ğŸŠ</span> <span class="animate-bounce floating">ğŸˆ</span> <span class="animate-bounce floating">ğŸ</span> <span class="animate-bounce floating">ğŸª</span>
      </div>
     </div>
    </div>
   </div>
  </div><!-- Material Page -->
  <div id="materialPage" class="hidden min-h-screen flex flex-col items-center justify-center p-4">
   <div class="text-center mb-4"><!-- User Greeting Box -->
    <div class="glass-card rounded-2xl px-6 py-3 mb-4 inline-block">
     <p class="text-xl font-bold text-white" style="text-shadow: 2px 2px 4px rgba(0,0,0,0.3);">ğŸ‘‹ Hai, <span id="materialUserName" class="text-yellow-300">User</span>!</p>
    </div>
    <h2 class="text-3xl font-bold mb-2 game-title">ğŸ“– Materi Pembelajaran ğŸ“š</h2>
    <div class="text-4xl mb-2 floating">
     ğŸ“š
    </div>
    <p class="text-2xl font-bold text-white" style="font-family: 'Orbitron', sans-serif; text-shadow: 2px 2px 8px rgba(0,0,0,0.3), 0 0 20px rgba(255,255,255,0.5); letter-spacing: 1px;">Kesebangunan dalam Budaya Melayu</p>
   </div>
   <div class="glass-card rounded-2xl p-6 max-w-4xl mx-auto w-full mb-4">
    <div class="bg-white/95 rounded-xl p-6 shadow-2xl min-h-[500px]"><!-- Slide Indicator -->
     <div class="text-center mb-6">
      <div class="text-lg font-bold text-gray-800">
       Slide <span id="currentSlide">1</span> dari 6
      </div>
     </div><!-- Slide 1 -->
     <div id="slide1" class="slide-content">
      <div class="text-center"><img src="https://i.imgur.com/1As20RS.png" alt="Rumah Adat Melayu" class="w-full h-auto max-h-60 md:max-h-80 object-contain rounded-lg mx-auto mb-6 cursor-pointer hover:scale-105 transition-transform" id="slide1Image" onclick="revealSlide1Answer()" onerror="this.style.display='none';" style="max-width: 100%;">
       <h3 class="text-xl md:text-2xl font-bold text-gray-800 mb-6">Bagian mana dari rumah adat ini yang berbentuk segitiga?</h3>
       <p class="text-lg text-gray-600 mb-4">Klik gambar untuk melihat jawaban! ğŸ‘†</p>
       <div id="slide1Answer" class="hidden mt-6 p-6 bg-gradient-to-r from-green-100 to-emerald-100 rounded-xl animate-bounce-in">
        <div class="text-6xl mb-4">
         âœ…
        </div>
        <p class="text-xl font-bold text-gray-800">Yang berbentuk segitiga adalah <span class="text-green-600">ATAP</span> rumah adat Melayu!</p>
       </div>
      </div>
     </div><!-- Slide 2 -->
     <div id="slide2" class="slide-content hidden">
      <div class="text-center"><img src="https://i.imgur.com/q0zRUtd.png" alt="Segitiga Putih dan Merah" class="w-full h-auto max-h-60 md:max-h-80 object-contain rounded-lg mx-auto mb-6" onerror="this.style.display='none';" style="max-width: 100%;">
       <h3 class="text-xl md:text-2xl font-bold text-gray-800 mb-6">Apakah segitiga putih dan segitiga merah memiliki bentuk yang sama?</h3>
       <div id="slide2Options" class="space-y-4 max-w-md mx-auto"><button class="w-full p-4 bg-gradient-to-r from-blue-100 to-purple-100 hover:from-blue-200 hover:to-purple-200 rounded-xl font-bold text-gray-800 transition-all" onclick="answerSlide2(true)"> Sama </button> <button class="w-full p-4 bg-gradient-to-r from-blue-100 to-purple-100 hover:from-blue-200 hover:to-purple-200 rounded-xl font-bold text-gray-800 transition-all" onclick="answerSlide2(false)"> Tidak Sama </button>
       </div>
       <div id="slide2Feedback" class="hidden mt-6"></div>
      </div>
     </div><!-- Slide 3 -->
     <div id="slide3" class="slide-content hidden">
      <div class="text-center"><img src="https://i.imgur.com/WjaUhR6.png" alt="Sudut dan Sisi Bersesuaian" class="w-full h-auto max-h-48 md:max-h-64 object-contain rounded-lg mx-auto mb-6" onerror="this.style.display='none';" style="max-width: 100%;">
       <h3 class="text-lg md:text-xl font-bold text-gray-800 mb-4">Apakah sudut-sudut yang bersesuaian pada kedua segitiga sama besar?</h3>
       <h3 class="text-lg md:text-xl font-bold text-gray-800 mb-6">Apakah sisi-sisi yang bersesuaian memiliki perbandingan yang sama?</h3>
       <div id="slide3Options" class="space-y-4 max-w-md mx-auto"><button class="w-full p-4 bg-gradient-to-r from-blue-100 to-purple-100 hover:from-blue-200 hover:to-purple-200 rounded-xl font-bold text-gray-800 transition-all" onclick="answerSlide3(true)"> Sama </button> <button class="w-full p-4 bg-gradient-to-r from-blue-100 to-purple-100 hover:from-blue-200 hover:to-purple-200 rounded-xl font-bold text-gray-800 transition-all" onclick="answerSlide3(false)"> Tidak Sama </button>
       </div>
       <div id="slide3Feedback" class="hidden mt-6"></div>
       <div id="slide3ExtraImage" class="hidden mt-6"><img src="https://i.imgur.com/x1f1LQy.png" alt="Penjelasan Sudut dan Sisi" class="w-full h-auto max-h-60 md:max-h-80 object-contain rounded-lg mx-auto" onerror="this.style.display='none';" style="max-width: 100%;">
       </div>
      </div>
     </div><!-- Slide 4 -->
     <div id="slide4" class="slide-content hidden">
      <div class="text-center"><img src="https://i.imgur.com/l5Ts113.png" alt="Hubungan Segitiga" class="w-full h-auto max-h-48 md:max-h-64 object-contain rounded-lg mx-auto mb-6" onerror="this.style.display='none';" style="max-width: 100%;">
       <h3 class="text-xl md:text-2xl font-bold text-gray-800 mb-6">Menurutmu, apa hubungan antara segitiga putih dan segitiga merah?</h3><textarea id="slide4Input" class="w-full max-w-2xl p-4 border-2 border-gray-300 rounded-xl focus:border-blue-500 focus:outline-none text-gray-800 min-h-[120px]" placeholder="Tuliskan pendapatmu di sini..."></textarea>
       <div id="slide4Warning" class="hidden mt-4 p-4 bg-yellow-100 rounded-lg">
        <p class="text-yellow-800 font-bold">âš ï¸ Silakan isi jawaban terlebih dahulu untuk melanjutkan!</p>
       </div>
      </div>
     </div><!-- Slide 5 -->
     <div id="slide5" class="slide-content hidden">
      <div class="text-center"><img src="https://i.imgur.com/l5Ts113.png" alt="Kesebangunan" class="w-full h-auto max-h-40 md:max-h-48 object-contain rounded-lg mx-auto mb-6" onerror="this.style.display='none';" style="max-width: 100%;">
       <div class="bg-gradient-to-r from-blue-100 to-purple-100 p-4 md:p-6 rounded-xl mb-6 text-left">
        <h3 class="text-xl md:text-2xl font-bold text-gray-800 mb-4 text-center">Kesebangunan</h3>
        <p class="text-lg text-gray-800 mb-4 leading-relaxed">Segitiga putih dan segitiga merah merupakan dua segitiga yang <span class="font-bold text-blue-600">sebangun</span>.</p>
        <p class="text-base text-gray-800 mb-4 leading-relaxed"><span class="font-bold">Kesebangunan</span> adalah hubungan dua bangun yang memiliki bentuk sama tetapi ukuran belum tentu sama.</p>
        <p class="text-base text-gray-800 mb-2 font-bold">Dua bangun dikatakan sebangun jika:</p>
        <ul class="list-disc list-inside text-base text-gray-800 space-y-2 ml-4">
         <li>Bentuknya sama (sudut-sudut yang bersesuaian sama besar).</li>
         <li>Perbandingan panjang sisi-sisi yang bersesuaian sama.</li>
        </ul>
       </div>
       <div class="bg-gradient-to-r from-yellow-100 to-amber-100 p-4 md:p-6 rounded-xl mb-6">
        <p class="text-base md:text-lg font-bold text-gray-800 mb-4 text-center">Ilustrasi Kesebangunan</p><img src="https://i.imgur.com/0BBJVdf.png" alt="Ilustrasi Kesebangunan" class="w-full h-auto max-h-40 md:max-h-48 object-contain rounded-lg mx-auto" onerror="this.style.display='none';" style="max-width: 100%;">
       </div>
       <div class="bg-gradient-to-r from-orange-100 to-red-100 p-4 md:p-6 rounded-xl mb-6">
        <p class="text-base md:text-lg font-bold text-gray-800 mb-4 text-center">Rumus perbandingan sisi:</p><img src="https://i.imgur.com/65FKX3K.png" alt="Rumus Perbandingan Sisi" class="w-full h-auto max-h-24 md:max-h-32 object-contain rounded-lg mx-auto" onerror="this.style.display='none';" style="max-width: 100%;">
       </div>
       <div class="bg-gradient-to-r from-green-100 to-teal-100 p-6 rounded-xl">
        <p class="text-lg font-bold text-gray-800 mb-2 text-center">Simbol kesebangunan:</p>
        <p class="text-2xl font-bold text-gray-800 text-center mb-2">âˆ†ABC ~ âˆ†DEF</p>
        <p class="text-base text-gray-700 text-center">yang artinya segitiga ABC sebangun dengan segitiga DEF.</p>
       </div>
      </div>
     </div><!-- Slide 6 -->
     <div id="slide6" class="slide-content hidden">
      <div class="text-left max-h-[600px] overflow-y-auto pr-2">
       <h3 class="text-xl md:text-2xl font-bold text-gray-800 mb-4 text-center">ğŸ“ Contoh Soal</h3>
       <div class="mb-6 text-center"><img src="https://i.imgur.com/3hiKbI9.png" alt="Contoh Soal Segitiga" class="w-full h-auto max-h-48 md:max-h-64 object-contain rounded-lg mx-auto mb-4" onerror="this.style.display='none';" style="max-width: 100%;">
        <p class="text-base md:text-lg text-gray-800 font-semibold">Jika panjang alas segitiga putih adalah 8 m, dan panjang alas segitiga merah adalah 4 m, serta tinggi segitiga merah adalah 3 m, berapakah tinggi segitiga putih?</p>
       </div>
       <div class="space-y-4"><!-- Langkah 1 -->
        <div class="bg-gradient-to-r from-blue-50 to-blue-100 p-4 rounded-xl">
         <h4 class="text-lg font-bold text-blue-800 mb-3">ğŸ“Œ Langkah Pertama (Memahami masalah)</h4>
         <div class="text-gray-800">
          <p class="font-bold mb-2">Diketahui:</p>
          <ul class="list-disc list-inside ml-4 space-y-1 mb-3">
           <li>Segitiga putih sebangun dengan segitiga merah</li>
           <li>Panjang alas segitiga putih = 8 m</li>
           <li>Panjang alas segitiga merah = 4 m</li>
           <li>Tinggi segitiga merah = 3 m</li>
          </ul>
          <p class="font-bold">Ditanyakan:</p>
          <p class="ml-4">Berapa tinggi segitiga putih?</p>
         </div>
        </div><!-- Langkah 2 -->
        <div class="bg-gradient-to-r from-purple-50 to-purple-100 p-4 rounded-xl">
         <h4 class="text-base md:text-lg font-bold text-purple-800 mb-3">ğŸ“ Langkah Kedua (Merencanakan masalah)</h4>
         <p class="text-sm md:text-base text-gray-800 mb-3">Karena kedua segitiga sebangun, perbandingan sisi-sisi yang bersesuaian adalah sama. Tuliskan perbandingan sisi yang bersesuaian.</p>
         <div class="text-center space-y-3"><img src="https://i.imgur.com/ASCSdxT.png" alt="Perbandingan Sisi 1" class="w-full h-auto max-h-20 md:max-h-24 object-contain rounded-lg mx-auto" onerror="this.style.display='none';" style="max-width: 100%;"> <img src="https://i.imgur.com/jIB1g1q.png" alt="Perbandingan Sisi 2" class="w-full h-auto max-h-20 md:max-h-24 object-contain rounded-lg mx-auto" onerror="this.style.display='none';" style="max-width: 100%;">
         </div>
         <p class="text-sm md:text-base text-gray-800 mt-3">Kemudian mencari nilai tinggi â–³putih (menggunakan perkalian silang).</p>
        </div><!-- Langkah 3 -->
        <div class="bg-gradient-to-r from-green-50 to-green-100 p-4 rounded-xl">
         <h4 class="text-base md:text-lg font-bold text-green-800 mb-3">âœï¸ Langkah Ketiga (Menjalankan rencana)</h4>
         <p class="text-sm md:text-base text-gray-800 font-semibold mb-3">Menentukan nilai tinggi â–³putih</p>
         <div class="text-center"><img src="https://i.imgur.com/oF3A155.png" alt="Perhitungan" class="w-full h-auto max-h-24 md:max-h-32 object-contain rounded-lg mx-auto" onerror="this.style.display='none';" style="max-width: 100%;">
         </div>
        </div><!-- Langkah 4 -->
        <div class="bg-gradient-to-r from-yellow-50 to-yellow-100 p-4 rounded-xl">
         <h4 class="text-base md:text-lg font-bold text-yellow-800 mb-3">âœ… Langkah Keempat (Memeriksa kebenaran)</h4>
         <p class="text-sm md:text-base text-gray-800 mb-3">Dengan menggunakan perbandingan sisi pada bangun yang sebangun, maka diperoleh tinggi segitiga putih yaitu <span class="font-bold text-green-600">6 m</span>.</p>
         <p class="text-sm md:text-base text-gray-800 font-semibold mb-2">Perbandingan sisi-sisi yang bersesuaian sama:</p>
         <div class="text-center mb-3"><img src="https://i.imgur.com/oQ20VAh.png" alt="Pemeriksaan" class="w-full h-auto max-h-20 md:max-h-24 object-contain rounded-lg mx-auto" onerror="this.style.display='none';" style="max-width: 100%;">
         </div>
         <p class="text-sm md:text-base text-gray-800">Karena semua perbandingan sisi yang bersesuaian sama, maka benar segitiga putih dan segitiga merah sebangun dan tinggi segitiga putih adalah <span class="font-bold text-green-600">6 m</span>.</p>
        </div>
       </div>
      </div>
     </div><!-- Slide Navigation - Bottom -->
     <div class="flex justify-between items-center mt-6 pt-4 border-t-2 border-gray-200"><button id="prevSlideBtn" class="bg-gradient-to-r from-gray-400 to-gray-500 hover:from-gray-500 hover:to-gray-600 text-white px-4 py-2 rounded-full font-bold disabled:opacity-50 disabled:cursor-not-allowed" onclick="previousSlide()" disabled> â† Sebelumnya </button> <button id="nextSlideBtn" class="bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white px-4 py-2 rounded-full font-bold disabled:opacity-50 disabled:cursor-not-allowed" onclick="nextSlide()"> Selanjutnya â†’ </button>
     </div>
    </div>
   </div>
   <div class="flex justify-center space-x-4 mt-4"><button class="bg-gradient-to-r from-gray-500 to-gray-600 hover:from-gray-600 hover:to-gray-700 text-white px-6 py-3 rounded-full font-bold" onclick="showPage('homePage')"> ğŸ  Beranda </button>
   </div>
  </div><!-- Quiz Page -->
  <div id="quizPage" class="hidden min-h-screen flex items-center justify-center p-4">
   <div class="glass-card rounded-3xl p-6 max-w-4xl mx-auto w-full">
    <div class="text-center mb-6"><!-- User Greeting Box -->
     <div class="glass-card rounded-2xl px-6 py-3 mb-4 inline-block">
      <p class="text-xl font-bold text-white" style="text-shadow: 2px 2px 4px rgba(0,0,0,0.3);">ğŸ‘‹ Hai, <span id="quizUserName" class="text-yellow-300">User</span>!</p>
     </div>
     <h2 class="text-4xl font-bold mb-4 game-title">ğŸš€ Latihan Soal ğŸ®</h2>
     <div class="text-6xl mb-4 floating">
      ğŸ“
     </div>
     <p class="text-xl text-white">Uji Pemahaman Kesebangunan</p>
    </div>
    <div class="bg-white/95 rounded-2xl p-6 shadow-2xl"><!-- Timer Box - Top -->
     <div class="mb-6">
      <div class="bg-gradient-to-r from-orange-100 to-red-100 rounded-2xl p-4 shadow-lg border-2 border-orange-300">
       <div class="flex items-center justify-center space-x-3">
        <div class="text-3xl">
         â°
        </div>
        <div>
         <div class="text-sm font-semibold text-gray-700">
          Waktu Tersisa
         </div>
         <div id="quizTimer" class="text-3xl font-bold text-orange-600" style="font-family: 'Orbitron', monospace;">
          30:00
         </div>
        </div>
       </div>
      </div>
     </div>
     <div class="text-center mb-6">
      <div class="text-2xl font-bold text-gray-800 mb-2">
       Soal <span id="currentQuestion">1</span> dari <span id="totalQuestions">12</span>
      </div>
      <div class="w-full bg-gray-200 rounded-full h-3 mb-4">
       <div id="progressBar" class="bg-gradient-to-r from-blue-500 to-purple-500 h-3 rounded-full transition-all duration-500" style="width: 8.33%"></div>
      </div>
      <div class="text-lg text-gray-600">
       Skor: <span id="quizScore" class="font-bold text-green-600">0</span>/12
      </div>
     </div>
     <div id="quizContent" class="min-h-[400px]"><!-- Quiz questions will be loaded here -->
     </div>
     <div id="quizComplete" class="hidden text-center p-6 bg-gradient-to-r from-green-100 to-blue-100 rounded-3xl">
      <div class="text-8xl mb-4">
       ğŸ‰
      </div>
      <h3 class="text-3xl font-bold text-gray-800 mb-4">Quiz Selesai!</h3>
      <p class="text-xl text-gray-800 mb-4">Skor Akhir: <span id="finalScore" class="font-bold text-green-600">0</span>/12</p>
      <div id="scoreMessage" class="text-lg text-gray-700 mb-6"></div><button class="bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white px-8 py-3 rounded-full font-bold" onclick="resetQuiz()"> ğŸ”„ Ulangi Quiz </button>
     </div>
    </div>
    <div class="flex justify-center space-x-4 mt-6"><button class="bg-gradient-to-r from-gray-500 to-gray-600 hover:from-gray-600 hover:to-gray-700 text-white px-6 py-3 rounded-full font-bold" onclick="showPage('homePage')"> ğŸ  Beranda </button>
    </div>
   </div>
  </div><!-- Host Dashboard Page -->
  <div id="hostDashboardPage" class="hidden min-h-screen flex items-center justify-center p-4">
   <div class="glass-card rounded-3xl p-6 max-w-6xl mx-auto w-full">
    <div class="text-center mb-6">
     <div class="flex justify-between items-center mb-4">
      <h2 class="text-4xl font-bold game-title">ğŸ‘¨â€ğŸ’¼ Dashboard Host</h2><button class="bg-gradient-to-r from-red-500 to-pink-600 hover:from-red-600 hover:to-pink-700 text-white px-6 py-3 rounded-full font-bold shadow-lg" onclick="logoutHost()"> ğŸšª Logout </button>
     </div>
     <div class="text-6xl mb-4 floating">
      ğŸ“Š
     </div>
     <p class="text-xl text-white">Statistik Pengguna &amp; Aktivitas</p><!-- Control Buttons -->
     <div class="flex flex-wrap justify-center gap-3 mt-4"><button class="bg-gradient-to-r from-blue-500 to-cyan-600 hover:from-blue-600 hover:to-cyan-700 text-white px-6 py-3 rounded-full font-bold shadow-lg transition-all transform hover:scale-105" onclick="refreshDashboard()"> ğŸ”„ Refresh Data </button> <button class="bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white px-6 py-3 rounded-full font-bold shadow-lg transition-all transform hover:scale-105" onclick="exportData()"> ğŸ“¥ Export Data </button> <button class="bg-gradient-to-r from-orange-500 to-red-600 hover:from-orange-600 hover:to-red-700 text-white px-6 py-3 rounded-full font-bold shadow-lg transition-all transform hover:scale-105" onclick="confirmResetData()"> ğŸ—‘ï¸ Reset Data </button>
     </div>
    </div>
    <div class="bg-white/95 rounded-2xl p-6 shadow-2xl"><!-- User Statistics -->
     <div class="mb-8">
      <h3 class="text-2xl font-bold text-gray-800 mb-4 flex items-center"><span class="text-3xl mr-3">ğŸ‘¥</span> Data Pengguna</h3>
      <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
       <div class="bg-gradient-to-br from-blue-400 to-indigo-500 p-6 rounded-2xl shadow-lg transform hover:scale-105 transition-all">
        <div class="text-4xl mb-2">
         ğŸ‘¤
        </div>
        <div class="text-3xl font-bold text-white" id="hostTotalUsers">
         0
        </div>
        <div class="text-sm text-white font-semibold">
         Total Pengguna
        </div>
       </div>
       <div class="bg-gradient-to-br from-green-400 to-emerald-500 p-6 rounded-2xl shadow-lg transform hover:scale-105 transition-all">
        <div class="text-4xl mb-2">
         ğŸ“–
        </div>
        <div class="text-3xl font-bold text-white" id="hostMaterialAttempts">
         0
        </div>
        <div class="text-sm text-white font-semibold">
         Materi Dipelajari
        </div>
       </div>
       <div class="bg-gradient-to-br from-yellow-400 to-orange-500 p-6 rounded-2xl shadow-lg transform hover:scale-105 transition-all">
        <div class="text-4xl mb-2">
         ğŸ“
        </div>
        <div class="text-3xl font-bold text-white" id="hostQuizAttempts">
         0
        </div>
        <div class="text-sm text-white font-semibold">
         Quiz Diselesaikan
        </div>
       </div>
       <div class="bg-gradient-to-br from-purple-400 to-pink-500 p-6 rounded-2xl shadow-lg transform hover:scale-105 transition-all">
        <div class="text-4xl mb-2">
         ğŸ®
        </div>
        <div class="text-3xl font-bold text-white" id="hostGameAttempts">
         0
        </div>
        <div class="text-sm text-white font-semibold">
         Game Dimainkan
        </div>
       </div>
      </div>
     </div><!-- Tab Navigation -->
     <div class="mb-6">
      <div class="flex flex-wrap gap-2 border-b-2 border-gray-200"><button id="tabUsers" class="tab-button active px-6 py-3 font-bold text-gray-600 border-b-4 border-transparent hover:text-blue-500 hover:border-blue-500 transition-all" onclick="switchTab('users')"> ğŸ‘¥ Daftar Pengguna </button> <button id="tabMaterial" class="tab-button px-6 py-3 font-bold text-gray-600 border-b-4 border-transparent hover:text-green-500 hover:border-green-500 transition-all" onclick="switchTab('material')"> ğŸ“– Aktivitas Materi </button> <button id="tabQuiz" class="tab-button px-6 py-3 font-bold text-gray-600 border-b-4 border-transparent hover:text-yellow-500 hover:border-yellow-500 transition-all" onclick="switchTab('quiz')"> ğŸ† Hasil Quiz </button> <button id="tabGame" class="tab-button px-6 py-3 font-bold text-gray-600 border-b-4 border-transparent hover:text-purple-500 hover:border-purple-500 transition-all" onclick="switchTab('game')"> ğŸ¯ Hasil Game </button>
      </div>
     </div><!-- Tab Content: User List -->
     <div id="contentUsers" class="tab-content">
      <div class="mb-4">
       <h3 class="text-2xl font-bold text-gray-800 mb-2 flex items-center"><span class="text-3xl mr-3">ğŸ“‹</span> Daftar Pengguna</h3>
       <p class="text-gray-600">Semua pengguna yang telah login ke aplikasi</p>
      </div>
      <div class="overflow-x-auto">
       <table class="w-full bg-white rounded-xl overflow-hidden shadow-lg">
        <thead class="bg-gradient-to-r from-blue-500 to-indigo-600 text-white">
         <tr>
          <th class="px-6 py-4 text-left font-bold">No</th>
          <th class="px-6 py-4 text-left font-bold">Nama</th>
          <th class="px-6 py-4 text-left font-bold">Waktu Login</th>
          <th class="px-6 py-4 text-left font-bold">Aktivitas</th>
         </tr>
        </thead>
        <tbody id="hostUserList" class="divide-y divide-gray-200">
         <tr>
          <td colspan="4" class="px-6 py-8 text-center text-gray-500">
           <div class="text-4xl mb-2">
            ğŸ“­
           </div><p>Belum ada pengguna yang login</p></td>
         </tr>
        </tbody>
       </table>
      </div>
     </div><!-- Tab Content: Material Activities -->
     <div id="contentMaterial" class="tab-content hidden">
      <div class="mb-4">
       <h3 class="text-2xl font-bold text-gray-800 mb-2 flex items-center"><span class="text-3xl mr-3">ğŸ“–</span> Aktivitas Materi Pembelajaran</h3>
       <p class="text-gray-600">Riwayat interaksi pengguna dengan materi pembelajaran</p>
      </div>
      <div class="overflow-x-auto">
       <table class="w-full bg-white rounded-xl overflow-hidden shadow-lg">
        <thead class="bg-gradient-to-r from-green-500 to-emerald-600 text-white">
         <tr>
          <th class="px-6 py-4 text-left font-bold">Nama</th>
          <th class="px-6 py-4 text-left font-bold">Slide</th>
          <th class="px-6 py-4 text-left font-bold">Jawaban</th>
          <th class="px-6 py-4 text-left font-bold">Waktu</th>
         </tr>
        </thead>
        <tbody id="hostMaterialActivities" class="divide-y divide-gray-200">
         <tr>
          <td colspan="4" class="px-6 py-8 text-center text-gray-500">
           <div class="text-4xl mb-2">
            ğŸ“­
           </div><p>Belum ada aktivitas materi</p></td>
         </tr>
        </tbody>
       </table>
      </div>
     </div><!-- Tab Content: Quiz Results -->
     <div id="contentQuiz" class="tab-content hidden">
      <div class="mb-4">
       <h3 class="text-2xl font-bold text-gray-800 mb-2 flex items-center"><span class="text-3xl mr-3">ğŸ†</span> Hasil Quiz Terbaru</h3>
       <p class="text-gray-600">Skor dan detail jawaban quiz dari setiap pengguna</p>
      </div>
      <div class="overflow-x-auto">
       <table class="w-full bg-white rounded-xl overflow-hidden shadow-lg">
        <thead class="bg-gradient-to-r from-yellow-500 to-orange-600 text-white">
         <tr>
          <th class="px-6 py-4 text-left font-bold">Nama</th>
          <th class="px-6 py-4 text-left font-bold">Skor</th>
          <th class="px-6 py-4 text-left font-bold">Persentase</th>
          <th class="px-6 py-4 text-left font-bold">Waktu</th>
         </tr>
        </thead>
        <tbody id="hostQuizResults" class="divide-y divide-gray-200">
         <tr>
          <td colspan="4" class="px-6 py-8 text-center text-gray-500">
           <div class="text-4xl mb-2">
            ğŸ“­
           </div><p>Belum ada hasil quiz</p></td>
         </tr>
        </tbody>
       </table>
      </div>
     </div><!-- Tab Content: Game Results -->
     <div id="contentGame" class="tab-content hidden">
      <div class="mb-4">
       <h3 class="text-2xl font-bold text-gray-800 mb-2 flex items-center"><span class="text-3xl mr-3">ğŸ¯</span> Hasil Game Terbaru</h3>
       <p class="text-gray-600">Performa pengguna dalam permainan memori</p>
      </div>
      <div class="overflow-x-auto">
       <table class="w-full bg-white rounded-xl overflow-hidden shadow-lg">
        <thead class="bg-gradient-to-r from-purple-500 to-pink-600 text-white">
         <tr>
          <th class="px-6 py-4 text-left font-bold">Nama</th>
          <th class="px-6 py-4 text-left font-bold">Waktu</th>
          <th class="px-6 py-4 text-left font-bold">Percobaan</th>
          <th class="px-6 py-4 text-left font-bold">Tanggal</th>
         </tr>
        </thead>
        <tbody id="hostGameResults" class="divide-y divide-gray-200">
         <tr>
          <td colspan="4" class="px-6 py-8 text-center text-gray-500">
           <div class="text-4xl mb-2">
            ğŸ“­
           </div><p>Belum ada hasil game</p></td>
         </tr>
        </tbody>
       </table>
      </div>
     </div>
    </div>
    <div class="flex justify-center space-x-4 mt-6"><button class="bg-gradient-to-r from-gray-500 to-gray-600 hover:from-gray-600 hover:to-gray-700 text-white px-6 py-3 rounded-full font-bold" onclick="showPage('homePage')"> ğŸ  Beranda </button>
    </div>
   </div>
  </div><!-- Memory Game Page -->
  <div id="memoryGamePage" class="hidden min-h-screen flex items-center justify-center p-4">
   <div class="glass-card rounded-3xl p-6 max-w-4xl mx-auto w-full">
    <div class="text-center mb-6"><!-- User Greeting Box -->
     <div class="glass-card rounded-2xl px-6 py-3 mb-4 inline-block">
      <p class="text-xl font-bold text-white" style="text-shadow: 2px 2px 4px rgba(0,0,0,0.3);">ğŸ‘‹ Hai, <span id="gameUserName" class="text-yellow-300">User</span>!</p>
     </div>
     <h2 class="text-4xl font-bold mb-4 game-title">ğŸ® Cocokin Yuk! ğŸ§©</h2>
     <div class="text-6xl mb-4 floating">
      ğŸ¥
     </div>
     <p class="text-xl text-white" style="font-family: 'Orbitron', sans-serif; font-weight: 600; letter-spacing: 1px;">Game Memori Rebana Sebangun</p>
    </div><!-- Cara Bermain Box -->
    <div class="bg-gradient-to-r from-yellow-100 to-amber-100 rounded-2xl p-4 shadow-lg mb-6 border-2 border-yellow-300">
     <div class="text-center">
      <p class="text-base font-bold text-gray-800 mb-1" style="font-family: 'Orbitron', sans-serif;">ğŸ“‹ Cara Bermain:</p>
      <p class="text-sm text-gray-700" style="font-family: 'Orbitron', sans-serif;">Klik kartu untuk membaliknya dan temukan pasangan gambar rebana yang sebangun!</p>
     </div>
    </div><!-- Game Stats - Outside the white box -->
    <div class="text-center mb-4">
     <div class="grid grid-cols-3 gap-4 max-w-2xl mx-auto">
      <div class="bg-gradient-to-br from-cyan-200 to-blue-300 rounded-2xl p-4 shadow-lg transform hover:scale-105 transition-all">
       <div class="text-4xl mb-2">
        â°
       </div>
       <div class="text-sm text-blue-900 mb-1 font-semibold" style="font-family: 'Orbitron', sans-serif;">
        WAKTU
       </div>
       <div class="text-3xl font-bold text-blue-900" style="font-family: 'Orbitron', sans-serif;" id="gameTimer">
        0:00
       </div>
      </div>
      <div class="bg-gradient-to-br from-fuchsia-200 to-purple-300 rounded-2xl p-4 shadow-lg transform hover:scale-105 transition-all">
       <div class="text-4xl mb-2">
        ğŸ¯
       </div>
       <div class="text-sm text-purple-900 mb-1 font-semibold" style="font-family: 'Orbitron', sans-serif;">
        PASANGAN
       </div>
       <div class="text-3xl font-bold text-purple-900" style="font-family: 'Orbitron', sans-serif;">
        <span id="gameMatches">0</span>/6
       </div>
      </div>
      <div class="bg-gradient-to-br from-pink-200 to-rose-300 rounded-2xl p-4 shadow-lg transform hover:scale-105 transition-all">
       <div class="text-4xl mb-2">
        ğŸ”„
       </div>
       <div class="text-sm text-pink-900 mb-1 font-semibold" style="font-family: 'Orbitron', sans-serif;">
        PERCOBAAN
       </div>
       <div class="text-3xl font-bold text-pink-900" style="font-family: 'Orbitron', sans-serif;" id="gameAttempts">
        0
       </div>
      </div>
     </div>
    </div>
    <div class="bg-white/95 rounded-2xl p-6 shadow-2xl">
     <div class="text-center mb-6">
      <div id="memoryBoard" class="grid grid-cols-4 gap-4 max-w-2xl mx-auto mb-6"><!-- Memory cards will be generated here -->
      </div>
      <div id="gameComplete" class="hidden"></div>
     </div>
     <div class="flex justify-center space-x-4 mt-6"><button class="bg-gradient-to-r from-gray-500 to-gray-600 hover:from-gray-600 hover:to-gray-700 text-white px-6 py-3 rounded-full font-bold" onclick="showPage('homePage')"> ğŸ  Beranda </button> <button class="bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600 text-white px-6 py-3 rounded-full font-bold" onclick="resetMemoryGame()"> ğŸ”„ Main Lagi </button>
     </div>
    </div>
   </div>
   <script>
        // Global Variables
        let isAudioPlaying = false;
        let currentQuestionIndex = 0;
        let quizScore = 0;
        let quizTimer = null;
        let quizTimeRemaining = 1800; // 30 minutes in seconds
        let gameTimer = null;
        let gameTime = 0;
        let memoryCards = [];
        let flippedCards = [];
        let matchedPairs = 0;
        let gameAttempts = 0;
        let userName = '';
        let isHostLoggedIn = false;
        
        // Google Apps Script URL
        const APPS_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbz6G3SGO_9hayXHrlHy-ciQD0xt1qRpy6emPhGTpdNbaMHjnUlXFgG_oUgLHajIJDtORg/exec';
        
        // Host Data Storage (local cache)
        let hostData = {
            users: [],
            quizResults: [],
            gameResults: [],
            materialActivities: []
        };

        // Configuration object for editable features
        const defaultConfig = {
            app_title: "ETHNOMATH Twin Shapes",
            welcome_message: "ğŸŒŸ Belajar Matematika Jadi Menyenangkan! ğŸŒŸ"
        };

        // Quiz Questions - UPDATED WITH NEW CONTENT
        const quizQuestions = [
            // Pertanyaan Set 1 - Kain Corak Insang
            {
                question: "<div class='bg-blue-50 p-4 rounded-lg mb-4'><p class='text-base leading-relaxed'>Pada gambar terdapat dua segitiga, yaitu segitiga dengan garis tepi merah dan segitiga dengan garis tepi hitam. Diketahui panjang sisi alas segitiga merah adalah 12 cm, dan tinggi segitiga merah adalah 8 cm. Segitiga hitam berada di dalam segitiga merah dan sebangun dengan segitiga merah. Panjang sisi alas segitiga hitam adalah 6 cm.</p></div><div class='bg-purple-50 p-4 rounded-lg'><p class='text-lg font-bold text-purple-600'>Apakah segitiga merah dan segitiga hitam sebangun?</p></div>",
                image: "https://i.imgur.com/6FTTPjc.jpg",
                options: [
                    "Ya",
                    "Tidak"
                ],
                correct: 0,
                explanation: "âœ… <strong>Ya</strong>, segitiga merah dan segitiga hitam sebangun karena memiliki bentuk yang sama dengan perbandingan sisi yang tetap."
            },
            {
                question: "<div class='bg-blue-50 p-4 rounded-lg mb-4'><p class='text-base leading-relaxed'>Pada gambar terdapat dua segitiga, yaitu segitiga dengan garis tepi merah dan segitiga dengan garis tepi hitam. Diketahui panjang sisi alas segitiga merah adalah 12 cm, dan tinggi segitiga merah adalah 8 cm. Segitiga hitam berada di dalam segitiga merah dan sebangun dengan segitiga merah. Panjang sisi alas segitiga hitam adalah 6 cm.</p></div><div class='bg-purple-50 p-4 rounded-lg'><p class='text-lg font-bold text-purple-600'>Tentukan perbandingan panjang sisi segitiga merah dan segitiga hitam.</p></div>",
                image: "https://i.imgur.com/6FTTPjc.jpg",
                options: [
                    "â…“",
                    "Â½"
                ],
                correct: 1,
                explanation: "âœ… Perbandingan = <strong>alas segitiga hitam : alas segitiga merah</strong> = 6 : 12 = <strong>Â½</strong>"
            },
            {
                question: "<div class='bg-blue-50 p-4 rounded-lg mb-4'><p class='text-base leading-relaxed'>Pada gambar terdapat dua segitiga, yaitu segitiga dengan garis tepi merah dan segitiga dengan garis tepi hitam. Diketahui panjang sisi alas segitiga merah adalah 12 cm, dan tinggi segitiga merah adalah 8 cm. Segitiga hitam berada di dalam segitiga merah dan sebangun dengan segitiga merah. Panjang sisi alas segitiga hitam adalah 6 cm.</p></div><div class='bg-purple-50 p-4 rounded-lg'><p class='text-lg font-bold text-purple-600'>Berapa tinggi segitiga hitam?</p></div>",
                image: "https://i.imgur.com/6FTTPjc.jpg",
                options: [
                    "6 cm",
                    "4 cm"
                ],
                correct: 1,
                explanation: "âœ… Karena perbandingan sisi adalah Â½, maka:<br><strong>Tinggi segitiga hitam = Â½ Ã— 8 cm = 4 cm</strong>"
            },
            {
                question: "<div class='bg-blue-50 p-4 rounded-lg mb-4'><p class='text-base leading-relaxed'>Pada gambar terdapat dua segitiga, yaitu segitiga dengan garis tepi merah dan segitiga dengan garis tepi hitam. Diketahui panjang sisi alas segitiga merah adalah 12 cm, dan tinggi segitiga merah adalah 8 cm. Segitiga hitam berada di dalam segitiga merah dan sebangun dengan segitiga merah. Panjang sisi alas segitiga hitam adalah 6 cm, dan tinggi segitiga hitam adalah 4 cm.</p></div><div class='bg-purple-50 p-4 rounded-lg'><p class='text-lg font-bold text-purple-600'>Jika luas segitiga merah adalah Lm, dan luas segitiga hitam adalah Lh, tentukan perbandingan Lh dan Lm!</p></div>",
                image: "https://i.imgur.com/6FTTPjc.jpg",
                options: [
                    "Â¼",
                    "â…‘"
                ],
                correct: 0,
                explanation: "âœ… Luas segitiga merah (Lm) = Â½ Ã— 12 Ã— 8 = 48 cmÂ²<br>Luas segitiga hitam (Lh) = Â½ Ã— 6 Ã— 4 = 12 cmÂ²<br>Perbandingan Lh : Lm = 12 : 48 = <strong>Â¼</strong>"
            },
            
            // Pertanyaan Set 2 - Atap Rumah Adat
            {
                question: "<div class='bg-green-50 p-4 rounded-lg mb-4'><p class='text-base leading-relaxed'>Atap rumah adat Melayu berbentuk segitiga sama kaki dengan alas 8 m dan tinggi 4,5 m. Di bawah atap utama ada segitiga hiasan dengan alas 3,2 m.</p></div><div class='bg-purple-50 p-4 rounded-lg'><p class='text-lg font-bold text-purple-600'>Apa yang ditanyakan dalam soal?</p></div>",
                image: "https://i.imgur.com/60w7w1L.jpg",
                options: [
                    "Luas segitiga besar",
                    "Tinggi segitiga hiasan"
                ],
                correct: 1,
                explanation: "âœ… Yang ditanyakan adalah <strong>tinggi segitiga hiasan</strong>."
            },
            {
                question: "<div class='bg-green-50 p-4 rounded-lg mb-4'><p class='text-base leading-relaxed'>Atap rumah adat Melayu berbentuk segitiga sama kaki dengan alas 8 m dan tinggi 4,5 m. Di bawah atap utama ada segitiga hiasan dengan alas 3,2 m.</p></div><div class='bg-purple-50 p-4 rounded-lg'><p class='text-lg font-bold text-purple-600'>Segitiga hiasan dan segitiga besar adalah â€¦</p></div>",
                image: "https://i.imgur.com/60w7w1L.jpg",
                options: [
                    "Sebangun",
                    "Tidak sebangun"
                ],
                correct: 0,
                explanation: "âœ… <strong>Sebangun</strong>! Kedua segitiga memiliki bentuk yang sama dengan perbandingan sisi yang tetap."
            },
            {
                question: "<div class='bg-green-50 p-4 rounded-lg mb-4'><p class='text-base leading-relaxed'>Atap rumah adat Melayu berbentuk segitiga sama kaki dengan alas 8 m dan tinggi 4,5 m. Di bawah atap utama ada segitiga hiasan dengan alas 3,2 m.</p></div><div class='bg-purple-50 p-4 rounded-lg'><p class='text-lg font-bold text-purple-600'>Perbandingan alas kedua segitiga adalah:</p><div class='text-center mt-3'><img src='https://i.imgur.com/2GcWm8J.jpg' alt='Rumus Perbandingan' class='inline-block max-h-16 rounded-lg' onerror='this.style.display=\"none\"'></div></div>",
                image: "https://i.imgur.com/60w7w1L.jpg",
                options: [
                    "0,4",
                    "0,6"
                ],
                correct: 0,
                explanation: "âœ… Perbandingan = alas segitiga hiasan : alas segitiga besar = 3,2 : 8 = <strong>0,4</strong>"
            },
            {
                question: "<div class='bg-green-50 p-4 rounded-lg mb-4'><p class='text-base leading-relaxed'>Atap rumah adat Melayu berbentuk segitiga sama kaki dengan alas 8 m dan tinggi 4,5 m. Di bawah atap utama ada segitiga hiasan dengan alas 3,2 m. Perbandingan alas adalah 0,4.</p></div><div class='bg-purple-50 p-4 rounded-lg'><p class='text-lg font-bold text-purple-600'>Tinggi segitiga hiasan adalah â€¦</p></div>",
                image: "https://i.imgur.com/60w7w1L.jpg",
                options: [
                    "1,8 m",
                    "2,5 m"
                ],
                correct: 0,
                explanation: "âœ… Tinggi segitiga hiasan = 0,4 Ã— 4,5 m = <strong>1,8 m</strong>"
            },
            
            // Pertanyaan Set 3 - Pintu Rumah Adat
            {
                question: "<div class='bg-orange-50 p-4 rounded-lg mb-4'><p class='text-base leading-relaxed'>Pintu rumah adat Melayu terdiri dari pintu besar dan pola panel persegi panjang di dalamnya. Panel-panel tersebut sebangun dengan bentuk pintu secara keseluruhan. Pintu rumah adat Melayu memiliki tinggi 210 cm dan lebar 90 cm. Panel di dalam pintu memiliki lebar 30 cm dan sebangun dengan pintu utama.</p></div><div class='bg-purple-50 p-4 rounded-lg'><p class='text-lg font-bold text-purple-600'>Apa yang ditanyakan pada soal ini?</p></div>",
                image: "https://i.imgur.com/KguukHd.jpg",
                options: [
                    "Tinggi panel",
                    "Lebar pintu utama"
                ],
                correct: 0,
                explanation: "âœ… Yang ditanyakan adalah <strong>tinggi panel</strong>. Lebar pintu utama sudah diketahui yaitu 90 cm."
            },
            {
                question: "<div class='bg-orange-50 p-4 rounded-lg mb-4'><p class='text-base leading-relaxed'>Pintu rumah adat Melayu memiliki tinggi 210 cm dan lebar 90 cm. Panel di dalam pintu memiliki lebar 30 cm dan sebangun dengan pintu utama.</p></div><div class='bg-purple-50 p-4 rounded-lg'><p class='text-lg font-bold text-purple-600'>Rumus kesebangunan yang tepat digunakan adalah â€¦</p></div>",
                image: "https://i.imgur.com/KguukHd.jpg",
                options: [
                    "<img src='https://i.imgur.com/FpFnPXB.jpg' alt='Rumus 1' class='inline-block max-h-12 rounded-lg' onerror='this.style.display=\"none\"; this.parentElement.textContent=\"Lebar panel / Lebar pintu = Tinggi panel / Tinggi pintu\"'>",
                    "<img src='https://i.imgur.com/8RIOUZ4.jpg' alt='Rumus 2' class='inline-block max-h-12 rounded-lg' onerror='this.style.display=\"none\"; this.parentElement.textContent=\"Lebar panel / Tinggi pintu = Tinggi panel / Lebar pintu\"'>"
                ],
                correct: 0,
                explanation: "âœ… Rumus yang tepat adalah:<br><img src='https://i.imgur.com/FpFnPXB.jpg' alt='Rumus Benar' class='inline-block max-h-16 rounded-lg my-2' onerror='this.style.display=\"none\"; this.parentElement.innerHTML=\"<strong>Lebar panel / Lebar pintu = Tinggi panel / Tinggi pintu</strong>\"'><br>Sisi-sisi yang bersesuaian harus dibandingkan dengan benar."
            },
            {
                question: "<div class='bg-orange-50 p-4 rounded-lg mb-4'><p class='text-base leading-relaxed'>Pintu rumah adat Melayu memiliki tinggi 210 cm dan lebar 90 cm. Panel di dalam pintu memiliki lebar 30 cm dan sebangun dengan pintu utama.</p></div><div class='bg-purple-50 p-4 rounded-lg'><p class='text-lg font-bold text-purple-600'>Berapa tinggi panel?</p></div>",
                image: "https://i.imgur.com/KguukHd.jpg",
                options: [
                    "70 cm",
                    "90 cm"
                ],
                correct: 0,
                explanation: "âœ… Perhitungan:<br>30/90 = Tinggi panel/210<br>Tinggi panel = (30 Ã— 210) / 90 = <strong>70 cm</strong>"
            },
            {
                question: "<div class='bg-orange-50 p-4 rounded-lg mb-4'><p class='text-base leading-relaxed'>Tinggi panel = 70 cm, tinggi pintu = 210 cm, lebar panel = 30 cm, lebar pintu = 90 cm.</p></div><div class='bg-purple-50 p-4 rounded-lg'><p class='text-lg font-bold text-purple-600'>Apakah benar <img src='https://i.imgur.com/HpeORSM.jpg' alt='Perbandingan' class='inline-block max-h-12 rounded-lg' onerror='this.style.display=\"none\"; this.parentElement.innerHTML+=\"perbandingan tinggi dan lebar sama?\"'></p></div>",
                image: "https://i.imgur.com/KguukHd.jpg",
                options: [
                    "Ya, sama â†’ hasil benar",
                    "Tidak, berbeda â†’ hasil salah"
                ],
                correct: 0,
                explanation: "âœ… <strong>Ya, sama!</strong> Perbandingan tinggi = 70:210 = â…“ dan perbandingan lebar = 30:90 = â…“. Ini membuktikan panel dan pintu sebangun."
            }
        ];

        // Audio Functions
        function createSoundEffect(frequency, duration, type = 'sine') {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.setValueAtTime(frequency, audioContext.currentTime);
            oscillator.type = type;
            
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + duration);
        }

        function playClickSound() {
            createSoundEffect(800, 0.1, 'square');
        }

        function playSuccessSound() {
            setTimeout(() => createSoundEffect(523, 0.15), 0);
            setTimeout(() => createSoundEffect(659, 0.15), 150);
            setTimeout(() => createSoundEffect(784, 0.3), 300);
        }

        function playErrorSound() {
            createSoundEffect(300, 0.2, 'sawtooth');
            setTimeout(() => createSoundEffect(250, 0.2, 'sawtooth'), 100);
        }

        function playMatchSound() {
            setTimeout(() => createSoundEffect(659, 0.1), 0);
            setTimeout(() => createSoundEffect(784, 0.1), 100);
            setTimeout(() => createSoundEffect(1047, 0.2), 200);
        }

        function playGameCompleteSound() {
            setTimeout(() => createSoundEffect(523, 0.15), 0);
            setTimeout(() => createSoundEffect(659, 0.15), 150);
            setTimeout(() => createSoundEffect(784, 0.15), 300);
            setTimeout(() => createSoundEffect(1047, 0.2), 450);
            setTimeout(() => createSoundEffect(1319, 0.2), 650);
            setTimeout(() => createSoundEffect(1568, 0.3), 850);
        }
        
        function playCelebrationSound() {
            setTimeout(() => createSoundEffect(659, 0.1), 0);
            setTimeout(() => createSoundEffect(784, 0.1), 100);
            setTimeout(() => createSoundEffect(880, 0.1), 200);
            setTimeout(() => createSoundEffect(1047, 0.2), 300);
        }

        function toggleAudio() {
            playClickSound();
            
            const audio = document.getElementById('backgroundMusic');
            const icon = document.getElementById('audioIcon');
            
            if (isAudioPlaying) {
                audio.pause();
                isAudioPlaying = false;
                icon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z" clip-rule="evenodd"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2"></path>';
            } else {
                audio.play().catch(e => console.log('Audio play failed:', e));
                isAudioPlaying = true;
                icon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"></path>';
            }
        }

        // Connection Status Functions
        function checkAudioConnection() {
            const audio = document.getElementById('backgroundMusic');
            const dot = document.getElementById('connectionDot');
            const text = document.getElementById('connectionText');
            
            audio.addEventListener('canplaythrough', function() {
                dot.className = 'w-3 h-3 rounded-full bg-green-500';
                text.textContent = 'Ready';
                text.className = 'text-xs font-bold text-green-700';
            });
            
            audio.addEventListener('error', function() {
                dot.className = 'w-3 h-3 rounded-full bg-red-500';
                text.textContent = 'Error';
                text.className = 'text-xs font-bold text-red-700';
            });
            
            audio.addEventListener('loadstart', function() {
                dot.className = 'w-3 h-3 rounded-full bg-blue-500 animate-pulse';
                text.textContent = 'Loading...';
                text.className = 'text-xs font-bold text-blue-700';
            });
        }

        // Host Functions
        function showHostLogin() {
            playClickSound();
            document.getElementById('hostLoginModal').classList.remove('hidden');
            document.getElementById('hostPassword').value = '';
            document.getElementById('hostLoginError').classList.add('hidden');
            setTimeout(() => {
                document.getElementById('hostPassword').focus();
            }, 100);
        }
        
        function closeHostLogin() {
            playClickSound();
            document.getElementById('hostLoginModal').classList.add('hidden');
        }
        
        async function submitHostLogin() {
            const password = document.getElementById('hostPassword').value;
            const errorDiv = document.getElementById('hostLoginError');
            
            if (password === 'host123') {
                isHostLoggedIn = true;
                playSuccessSound();
                closeHostLogin();
                await showHostDashboardWithData();
            } else {
                errorDiv.classList.remove('hidden');
                playErrorSound();
                document.getElementById('hostPassword').value = '';
                document.getElementById('hostPassword').focus();
            }
        }
        
        function logoutHost() {
            playClickSound();
            isHostLoggedIn = false;
            showPage('homePage');
        }
        
        async function showHostDashboardWithData() {
            showPage('hostDashboardPage');
            
            // Show loading indicator
            const loadingDiv = document.createElement('div');
            loadingDiv.id = 'dashboardLoading';
            loadingDiv.className = 'fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-50 bg-gradient-to-r from-blue-500 to-purple-500 px-8 py-6 rounded-3xl shadow-2xl text-center';
            loadingDiv.style.cssText = 'animation: popupBounce 0.5s ease-out;';
            loadingDiv.innerHTML = `
                <div class="text-5xl mb-3 animate-spin">â³</div>
                <p class="text-white font-bold text-lg">Memuat data...</p>
            `;
            document.body.appendChild(loadingDiv);
            
            // Load data from Google Sheets
            await loadFromGoogleSheets();
            
            // Remove loading indicator
            loadingDiv.remove();
            
            // Update dashboard
            updateHostDashboard();
        }
        
        async function refreshDashboard() {
            playClickSound();
            
            // Show loading notification
            const loadingNotification = document.createElement('div');
            loadingNotification.id = 'loadingNotification';
            loadingNotification.className = 'fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-50 bg-gradient-to-r from-blue-500 to-cyan-500 px-8 py-6 rounded-3xl shadow-2xl text-center';
            loadingNotification.style.cssText = 'animation: popupBounce 0.5s ease-out;';
            loadingNotification.innerHTML = `
                <div class="text-5xl mb-3 animate-spin">â³</div>
                <p class="text-white font-bold text-lg">Memuat data dari Google Sheets...</p>
            `;
            document.body.appendChild(loadingNotification);
            
            // Load data from Google Sheets
            const success = await loadFromGoogleSheets();
            
            // Remove loading notification
            loadingNotification.remove();
            
            // Update dashboard
            updateHostDashboard();
            
            // Show result notification
            const notification = document.createElement('div');
            notification.className = 'fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-50 px-8 py-6 rounded-3xl shadow-2xl text-center';
            notification.style.cssText = 'animation: popupBounce 0.5s ease-out;';
            
            if (success) {
                notification.className += ' bg-gradient-to-r from-green-500 to-emerald-500';
                notification.innerHTML = `
                    <div class="text-5xl mb-3">âœ…</div>
                    <p class="text-white font-bold text-lg">Data berhasil dimuat dari Google Sheets!</p>
                `;
                playSuccessSound();
            } else {
                notification.className += ' bg-gradient-to-r from-orange-500 to-yellow-500';
                notification.innerHTML = `
                    <div class="text-5xl mb-3">âš ï¸</div>
                    <p class="text-white font-bold text-lg">Menampilkan data lokal</p>
                `;
            }
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'popupFadeOut 0.3s ease-out';
                setTimeout(() => notification.remove(), 300);
            }, 2000);
        }
        
        function confirmResetData() {
            playClickSound();
            
            const overlay = document.createElement('div');
            overlay.id = 'resetConfirmOverlay';
            overlay.className = 'fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4';
            overlay.style.cssText = 'animation: fadeIn 0.3s ease-out;';
            
            overlay.innerHTML = `
                <div class="glass-card rounded-3xl p-8 max-w-md mx-auto w-full" style="animation: popupBounce 0.5s ease-out;">
                    <div class="text-center mb-6">
                        <div class="text-8xl mb-4">âš ï¸</div>
                        <h3 class="text-3xl font-bold text-white mb-4">Konfirmasi Reset Data</h3>
                        <p class="text-lg text-white/90 mb-2">Apakah Anda yakin ingin menghapus SEMUA data?</p>
                        <p class="text-base text-red-300 font-semibold">âš ï¸ Tindakan ini tidak dapat dibatalkan!</p>
                    </div>
                    <div class="bg-white/95 rounded-2xl p-6 shadow-2xl">
                        <div class="space-y-3">
                            <button class="w-full bg-gradient-to-r from-red-600 to-pink-600 hover:from-red-700 hover:to-pink-700 text-white px-8 py-4 rounded-full font-bold text-lg" onclick="executeResetData()">
                                ğŸ—‘ï¸ Ya, Hapus Semua Data
                            </button>
                            <button class="w-full bg-gradient-to-r from-gray-500 to-gray-600 hover:from-gray-600 hover:to-gray-700 text-white px-8 py-4 rounded-full font-bold text-lg" onclick="closeResetConfirm()">
                                âŒ Batal
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(overlay);
        }
        
        function closeResetConfirm() {
            playClickSound();
            const overlay = document.getElementById('resetConfirmOverlay');
            if (overlay) {
                overlay.style.animation = 'fadeOut 0.3s ease-out';
                setTimeout(() => overlay.remove(), 300);
            }
        }
        
        async function executeResetData() {
            playSuccessSound();
            
            // Show loading notification
            const loadingNotification = document.createElement('div');
            loadingNotification.id = 'resetLoadingNotification';
            loadingNotification.className = 'fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-50 bg-gradient-to-r from-orange-500 to-red-500 px-8 py-6 rounded-3xl shadow-2xl text-center';
            loadingNotification.style.cssText = 'animation: popupBounce 0.5s ease-out;';
            loadingNotification.innerHTML = `
                <div class="text-5xl mb-3 animate-spin">â³</div>
                <p class="text-white font-bold text-lg">Menghapus data dari Google Sheets...</p>
            `;
            document.body.appendChild(loadingNotification);
            
            // Send reset request to Google Sheets
            const success = await sendToGoogleSheets('resetData', {});
            
            // Remove loading notification
            loadingNotification.remove();
            
            // Reset local data
            hostData = {
                users: [],
                quizResults: [],
                gameResults: [],
                materialActivities: []
            };
            
            closeResetConfirm();
            updateHostDashboard();
            
            // Show result notification
            const notification = document.createElement('div');
            notification.className = 'fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-50 px-8 py-6 rounded-3xl shadow-2xl text-center';
            notification.style.cssText = 'animation: popupBounce 0.5s ease-out;';
            
            if (success) {
                notification.className += ' bg-gradient-to-r from-green-500 to-emerald-500';
                notification.innerHTML = `
                    <div class="text-5xl mb-3">âœ…</div>
                    <p class="text-white font-bold text-lg">Semua data berhasil dihapus dari Google Sheets!</p>
                `;
            } else {
                notification.className += ' bg-gradient-to-r from-yellow-500 to-orange-500';
                notification.innerHTML = `
                    <div class="text-5xl mb-3">âš ï¸</div>
                    <p class="text-white font-bold text-lg">Data lokal dihapus (Google Sheets mungkin tidak terhubung)</p>
                `;
            }
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'popupFadeOut 0.3s ease-out';
                setTimeout(() => notification.remove(), 300);
            }, 2000);
        }
        
        function exportData() {
            playClickSound();
            
            // Prepare export data
            const exportObject = {
                exported_at: new Date().toLocaleString('id-ID'),
                summary: {
                    total_users: hostData.users.length,
                    total_material_activities: (hostData.materialActivities || []).length,
                    total_quiz_attempts: hostData.quizResults.length,
                    total_game_attempts: hostData.gameResults.length
                },
                users: hostData.users.map(user => ({
                    name: user.name,
                    login_time: user.loginTime,
                    total_activities: user.activities.length,
                    activities: user.activities
                })),
                material_activities: (hostData.materialActivities || []).map(activity => ({
                    name: activity.name,
                    slide: activity.slide,
                    answer: activity.answer,
                    time: activity.time
                })),
                quiz_results: hostData.quizResults.map(result => ({
                    name: result.name,
                    score: result.score,
                    total: result.total,
                    percentage: result.percentage,
                    time: result.time,
                    details: result.details || []
                })),
                game_results: hostData.gameResults.map(result => ({
                    name: result.name,
                    time: result.time,
                    attempts: result.attempts,
                    date: result.date
                }))
            };
            
            // Create JSON file
            const jsonString = JSON.stringify(exportObject, null, 2);
            const blob = new Blob([jsonString], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            
            // Create download link
            const a = document.createElement('a');
            a.href = url;
            const timestamp = new Date().toISOString().replace(/[:.]/g, '-').slice(0, -5);
            a.download = `ETHNOMATH_Data_Export_${timestamp}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            playSuccessSound();
            
            // Show success notification
            const notification = document.createElement('div');
            notification.className = 'fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-50 bg-gradient-to-r from-green-500 to-emerald-500 px-8 py-6 rounded-3xl shadow-2xl text-center';
            notification.style.cssText = 'animation: popupBounce 0.5s ease-out;';
            notification.innerHTML = `
                <div class="text-5xl mb-3">ğŸ“¥</div>
                <p class="text-white font-bold text-lg">Data berhasil diexport!</p>
                <p class="text-white text-sm mt-2">File JSON telah diunduh</p>
            `;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'popupFadeOut 0.3s ease-out';
                setTimeout(() => notification.remove(), 300);
            }, 2000);
        }
        
        function toggleQuizDetails(detailsId) {
            const detailsDiv = document.getElementById(detailsId);
            if (detailsDiv) {
                detailsDiv.classList.toggle('hidden');
            }
        }
        
        // Function to generate device ID
        function getDeviceId() {
            let deviceId = localStorage.getItem('ethnomath_device_id');
            if (!deviceId) {
                deviceId = 'device_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
                localStorage.setItem('ethnomath_device_id', deviceId);
            }
            return deviceId;
        }
        
        // Function to send data to Google Sheets
        async function sendToGoogleSheets(action, data) {
            try {
                const deviceId = getDeviceId();
                const timestamp = new Date().toLocaleString('id-ID');
                
                // Add deviceId and timestamp to data
                const payload = {
                    action: action,
                    deviceId: deviceId,
                    timestamp: timestamp,
                    ...data
                };
                
                console.log('Sending to Google Sheets:', action, payload);
                
                // Use fetch with redirect: 'follow' to handle Google Apps Script redirects
                const response = await fetch(APPS_SCRIPT_URL, {
                    method: 'POST',
                    redirect: 'follow',
                    headers: {
                        'Content-Type': 'text/plain',
                    },
                    body: JSON.stringify(payload)
                });
                
                console.log('Response status:', response.status);
                
                // Try to read response text
                try {
                    const responseText = await response.text();
                    console.log('Response text:', responseText);
                } catch (e) {
                    console.log('Could not read response text');
                }
                
                return true;
            } catch (error) {
                console.error('Error sending to Google Sheets:', error);
                return false;
            }
        }
        
        // Function to load data from Google Sheets
        async function loadFromGoogleSheets() {
            try {
                const response = await fetch(APPS_SCRIPT_URL + '?action=getData&tab=DataUser');
                const data = await response.json();
                
                if (data && data.rows) {
                    // Parse the DataUser recap sheet
                    const recapData = data.rows;
                    
                    // Reset host data
                    hostData.users = [];
                    hostData.materialActivities = [];
                    hostData.quizResults = [];
                    hostData.gameResults = [];
                    
                    // Process each user's recap data
                    recapData.forEach(row => {
                        const name = row[0]; // Name
                        const materialCount = parseInt(row[1]) || 0; // MaterialAnswers count
                        const quizCount = parseInt(row[2]) || 0; // QuizResults count
                        const memoryCount = parseInt(row[3]) || 0; // MemoryResults count
                        const deviceId = row[4] || 'Unknown'; // DeviceId
                        const timestamp = row[5] || ''; // Timestamp
                        
                        // Add to users list
                        if (name && name !== 'Name') { // Skip header row
                            const activities = [];
                            if (materialCount > 0) activities.push('Materi');
                            if (quizCount > 0) activities.push('Quiz');
                            if (memoryCount > 0) activities.push('Game');
                            
                            hostData.users.push({
                                name: name,
                                loginTime: timestamp,
                                activities: activities
                            });
                        }
                    });
                    
                    // Load detailed material activities
                    const materialResponse = await fetch(APPS_SCRIPT_URL + '?action=getData&tab=MaterialAnswers');
                    const materialData = await materialResponse.json();
                    if (materialData && materialData.rows) {
                        materialData.rows.forEach(row => {
                            if (row[0] && row[0] !== 'Name') {
                                hostData.materialActivities.push({
                                    name: row[0],
                                    slide: row[1],
                                    answer: row[2],
                                    time: row[3]
                                });
                            }
                        });
                    }
                    
                    // Load quiz results
                    const quizResponse = await fetch(APPS_SCRIPT_URL + '?action=getData&tab=QuizResults');
                    const quizData = await quizResponse.json();
                    if (quizData && quizData.rows) {
                        quizData.rows.forEach(row => {
                            if (row[0] && row[0] !== 'Name') {
                                const score = row[1] || '0/12';
                                const scoreParts = score.split('/');
                                const scoreNum = parseInt(scoreParts[0]) || 0;
                                const totalNum = parseInt(scoreParts[1]) || 12;
                                const percentage = Math.round((scoreNum / totalNum) * 100);
                                
                                let details = [];
                                try {
                                    details = JSON.parse(row[2] || '[]');
                                } catch (e) {
                                    details = [];
                                }
                                
                                hostData.quizResults.push({
                                    name: row[0],
                                    score: scoreNum,
                                    total: totalNum,
                                    percentage: percentage,
                                    time: row[4],
                                    details: details
                                });
                            }
                        });
                    }
                    
                    // Load memory game results
                    const memoryResponse = await fetch(APPS_SCRIPT_URL + '?action=getData&tab=MemoryResults');
                    const memoryData = await memoryResponse.json();
                    if (memoryData && memoryData.rows) {
                        memoryData.rows.forEach(row => {
                            if (row[0] && row[0] !== 'Name') {
                                hostData.gameResults.push({
                                    name: row[0],
                                    time: row[1],
                                    attempts: parseInt(row[2]) || 0,
                                    date: row[3]
                                });
                            }
                        });
                    }
                    
                    console.log('Data loaded from Google Sheets');
                    return true;
                }
            } catch (error) {
                console.error('Error loading from Google Sheets:', error);
            }
            return false;
        }
        
        function trackUserLogin(name) {
            const userData = {
                name: name,
                loginTime: new Date().toLocaleString('id-ID'),
                activities: []
            };
            
            // Always add to local data for display
            const existingUser = hostData.users.find(u => u.name === name);
            if (!existingUser) {
                hostData.users.push(userData);
            }
            
            // ALWAYS send to Google Sheets (even if user exists locally)
            // This ensures every login from every device is recorded
            sendToGoogleSheets('addUser', userData);
        }
        
        function trackMaterialActivity(name, slide, answer) {
            if (!hostData.materialActivities) {
                hostData.materialActivities = [];
            }
            
            const activityData = {
                name: name,
                slide: slide,
                answer: answer,
                time: new Date().toLocaleString('id-ID')
            };
            
            hostData.materialActivities.push(activityData);
            
            const user = hostData.users.find(u => u.name === name);
            if (user) {
                user.activities.push('Materi');
            }
            
            // Send to Google Sheets with correct action name
            sendToGoogleSheets('submitMaterial', {
                name: name,
                slide: slide,
                answer: answer
            });
        }
        
        function trackQuizResult(name, score, total) {
            const percentage = Math.round((score / total) * 100);
            const timeUsed = 1800 - quizTimeRemaining;
            const minutesUsed = Math.floor(timeUsed / 60);
            const secondsUsed = timeUsed % 60;
            const timeUsedText = `${minutesUsed}:${secondsUsed.toString().padStart(2, '0')}`;
            
            const quizData = {
                name: name,
                score: score,
                total: total,
                percentage: percentage,
                time: new Date().toLocaleString('id-ID'),
                details: window.quizAnswerDetails || []
            };
            
            hostData.quizResults.push(quizData);
            
            const user = hostData.users.find(u => u.name === name);
            if (user) {
                user.activities.push('Quiz');
            }
            
            // Send to Google Sheets with correct format
            sendToGoogleSheets('submitQuiz', {
                name: name,
                score: `${score}/${total}`,  // Format: "8/12"
                answers: JSON.stringify(window.quizAnswerDetails || []),  // JSON string
                time: timeUsedText,  // Format: "5:30"
                timeSeconds: timeUsed  // Also send seconds for compatibility
            });
            
            // Reset quiz details for next attempt
            window.quizAnswerDetails = [];
        }
        
        function trackGameResult(name, time, attempts) {
            const gameData = {
                name: name,
                time: time,
                attempts: attempts,
                date: new Date().toLocaleString('id-ID')
            };
            
            hostData.gameResults.push(gameData);
            
            const user = hostData.users.find(u => u.name === name);
            if (user) {
                user.activities.push('Game');
            }
            
            // Send to Google Sheets with correct action name
            // Convert time string to seconds for Google Sheets
            const timeParts = time.split(':');
            const timeSeconds = parseInt(timeParts[0]) * 60 + parseInt(timeParts[1]);
            
            sendToGoogleSheets('submitMemory', {
                name: name,
                time: time,
                timeSeconds: timeSeconds
            });
        }
        
        function updateHostDashboard() {
            // Update statistics
            document.getElementById('hostTotalUsers').textContent = hostData.users.length;
            document.getElementById('hostMaterialAttempts').textContent = (hostData.materialActivities || []).length;
            document.getElementById('hostQuizAttempts').textContent = hostData.quizResults.length;
            document.getElementById('hostGameAttempts').textContent = hostData.gameResults.length;
            
            // Update material activities
            const materialActivities = document.getElementById('hostMaterialActivities');
            if (!hostData.materialActivities || hostData.materialActivities.length === 0) {
                materialActivities.innerHTML = `
                    <tr>
                        <td colspan="4" class="px-6 py-8 text-center text-gray-500">
                            <div class="text-4xl mb-2">ğŸ“­</div>
                            <p>Belum ada aktivitas materi</p>
                        </td>
                    </tr>
                `;
            } else {
                materialActivities.innerHTML = hostData.materialActivities.slice(-20).reverse().map(activity => `
                    <tr class="hover:bg-gray-50">
                        <td class="px-6 py-4 font-semibold text-gray-800">${activity.name}</td>
                        <td class="px-6 py-4 text-gray-600">${activity.slide}</td>
                        <td class="px-6 py-4 text-gray-600 text-sm">${activity.answer}</td>
                        <td class="px-6 py-4 text-gray-600 text-sm">${activity.time}</td>
                    </tr>
                `).join('');
            }
            
            // Update user list
            const userList = document.getElementById('hostUserList');
            if (hostData.users.length === 0) {
                userList.innerHTML = `
                    <tr>
                        <td colspan="4" class="px-6 py-8 text-center text-gray-500">
                            <div class="text-4xl mb-2">ğŸ“­</div>
                            <p>Belum ada pengguna yang login</p>
                        </td>
                    </tr>
                `;
            } else {
                userList.innerHTML = hostData.users.map((user, index) => `
                    <tr class="hover:bg-gray-50">
                        <td class="px-6 py-4 font-semibold text-gray-800">${index + 1}</td>
                        <td class="px-6 py-4 font-semibold text-gray-800">${user.name}</td>
                        <td class="px-6 py-4 text-gray-600">${user.loginTime}</td>
                        <td class="px-6 py-4">
                            <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-bold bg-blue-100 text-blue-800">
                                ${user.activities.length} aktivitas
                            </span>
                        </td>
                    </tr>
                `).join('');
            }
            
            // Update quiz results
            const quizResults = document.getElementById('hostQuizResults');
            if (hostData.quizResults.length === 0) {
                quizResults.innerHTML = `
                    <tr>
                        <td colspan="4" class="px-6 py-8 text-center text-gray-500">
                            <div class="text-4xl mb-2">ğŸ“­</div>
                            <p>Belum ada hasil quiz</p>
                        </td>
                    </tr>
                `;
            } else {
                quizResults.innerHTML = hostData.quizResults.slice(-10).reverse().map((result, index) => {
                    const detailsId = 'quizDetails' + index;
                    return `
                    <tr class="hover:bg-gray-50">
                        <td class="px-6 py-4 font-semibold text-gray-800">${result.name}</td>
                        <td class="px-6 py-4 text-gray-600">${result.score}/${result.total}</td>
                        <td class="px-6 py-4">
                            <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-bold ${
                                result.percentage >= 80 ? 'bg-green-100 text-green-800' :
                                result.percentage >= 60 ? 'bg-yellow-100 text-yellow-800' :
                                'bg-red-100 text-red-800'
                            }">
                                ${result.percentage}%
                            </span>
                        </td>
                        <td class="px-6 py-4 text-gray-600">${result.time}</td>
                    </tr>
                    ${result.details && result.details.length > 0 ? `
                    <tr class="bg-gray-50">
                        <td colspan="4" class="px-6 py-4">
                            <button onclick="toggleQuizDetails('${detailsId}')" class="text-blue-600 hover:text-blue-800 font-semibold text-sm mb-2">
                                ğŸ“‹ Lihat Detail Jawaban
                            </button>
                            <div id="${detailsId}" class="hidden mt-2 space-y-2">
                                ${result.details.map(detail => `
                                    <div class="flex items-start space-x-2 text-sm p-2 rounded ${detail.isCorrect ? 'bg-green-50' : 'bg-red-50'}">
                                        <span class="font-bold ${detail.isCorrect ? 'text-green-600' : 'text-red-600'}">${detail.isCorrect ? 'âœ“' : 'âœ—'}</span>
                                        <div class="flex-1">
                                            <div class="font-semibold text-gray-700">Soal ${detail.questionNumber}</div>
                                            <div class="text-gray-600">Jawaban: ${detail.userAnswer}</div>
                                            ${!detail.isCorrect ? `<div class="text-gray-500 text-xs">Benar: ${detail.correctAnswer}</div>` : ''}
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </td>
                    </tr>
                    ` : ''}
                `;
                }).join('');
            }
            
            // Update game results
            const gameResults = document.getElementById('hostGameResults');
            if (hostData.gameResults.length === 0) {
                gameResults.innerHTML = `
                    <tr>
                        <td colspan="4" class="px-6 py-8 text-center text-gray-500">
                            <div class="text-4xl mb-2">ğŸ“­</div>
                            <p>Belum ada hasil game</p>
                        </td>
                    </tr>
                `;
            } else {
                gameResults.innerHTML = hostData.gameResults.slice(-10).reverse().map(result => `
                    <tr class="hover:bg-gray-50">
                        <td class="px-6 py-4 font-semibold text-gray-800">${result.name}</td>
                        <td class="px-6 py-4 text-gray-600">${result.time}</td>
                        <td class="px-6 py-4">
                            <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-bold ${
                                result.attempts <= 8 ? 'bg-green-100 text-green-800' :
                                result.attempts <= 12 ? 'bg-yellow-100 text-yellow-800' :
                                'bg-red-100 text-red-800'
                            }">
                                ${result.attempts} percobaan
                            </span>
                        </td>
                        <td class="px-6 py-4 text-gray-600">${result.date}</td>
                    </tr>
                `).join('');
            }
        }

        // Page Navigation
        function showPage(pageId) {
            const pages = ['homePage', 'materialPage', 'quizPage', 'memoryGamePage', 'nameInputPage', 'hostDashboardPage'];
            pages.forEach(page => {
                document.getElementById(page).classList.add('hidden');
            });
            document.getElementById(pageId).classList.remove('hidden');
            
            // Show/hide host button based on page
            const hostButton = document.getElementById('hostButton');
            if (pageId === 'homePage') {
                hostButton.classList.remove('hidden');
            } else {
                hostButton.classList.add('hidden');
            }
        }

        function checkNameInput() {
            const nameInput = document.getElementById('nameInput');
            const startBtn = document.getElementById('startActivityBtn');
            const name = nameInput.value.trim();
            
            if (name.length > 0) {
                startBtn.disabled = false;
                document.getElementById('nameWarning').classList.add('hidden');
            } else {
                startBtn.disabled = true;
            }
        }

        function submitNameFromPage() {
            const nameInput = document.getElementById('nameInput');
            const name = nameInput.value.trim();
            const warning = document.getElementById('nameWarning');
            
            if (name === '') {
                warning.classList.remove('hidden');
                playErrorSound();
                nameInput.focus();
                return;
            }
            
            userName = name;
            trackUserLogin(name);
            playSuccessSound();
            
            if (window.namePopupCallback) {
                window.namePopupCallback();
                window.namePopupCallback = null;
            }
        }

        function showNamePopup(callback, buttonText = 'âœ¨ Mulai Belajar') {
            if (userName) {
                callback();
                return;
            }
            
            playClickSound();
            
            window.namePopupCallback = callback;
            
            showPage('nameInputPage');
            
            document.getElementById('startActivityBtn').innerHTML = buttonText;
            
            document.getElementById('nameInput').value = '';
            document.getElementById('startActivityBtn').disabled = true;
            document.getElementById('nameWarning').classList.add('hidden');
            
            setTimeout(() => {
                document.getElementById('nameInput').focus();
            }, 100);
        }

        function closeNamePopup() {
            playClickSound();
            showPage('homePage');
            window.namePopupCallback = null;
        }

        function showMaterial() {
            showNamePopup(() => {
                playClickSound();
                showPage('materialPage');
                document.getElementById('materialUserName').textContent = userName;
                currentSlideNumber = 1;
                slide1Answered = false;
                slide2Answered = false;
                slide3Answered = false;
                slide4Answered = false;
                updateSlideNavigation();
            }, 'âœ¨ Mulai Belajar');
        }

        function showQuiz() {
            showNamePopup(() => {
                playClickSound();
                showPage('quizPage');
                document.getElementById('quizUserName').textContent = userName;
                initQuiz();
            }, 'âœ¨ Mulai Belajar');
        }

        function showMemoryGame() {
            showNamePopup(() => {
                playClickSound();
                showPage('memoryGamePage');
                document.getElementById('gameUserName').textContent = userName;
                initMemoryGame();
            }, 'ğŸ® Mulai Bermain');
        }

        // Material Functions - Slide Navigation
        let currentSlideNumber = 1;
        let slide1Answered = false;
        let slide2Answered = false;
        let slide3Answered = false;
        let slide4Answered = false;

        function updateSlideNavigation() {
            document.getElementById('currentSlide').textContent = currentSlideNumber;
            document.getElementById('prevSlideBtn').disabled = currentSlideNumber === 1;
            document.getElementById('nextSlideBtn').disabled = currentSlideNumber === 6;
            
            for (let i = 1; i <= 6; i++) {
                document.getElementById('slide' + i).classList.add('hidden');
            }
            
            document.getElementById('slide' + currentSlideNumber).classList.remove('hidden');
        }

        function canProceedToNextSlide() {
            if (currentSlideNumber === 1 && !slide1Answered) {
                showSlideWarning('Silakan klik gambar untuk melihat jawaban terlebih dahulu!');
                return false;
            }
            if (currentSlideNumber === 2 && !slide2Answered) {
                showSlideWarning('Silakan pilih salah satu jawaban terlebih dahulu!');
                return false;
            }
            if (currentSlideNumber === 3 && !slide3Answered) {
                showSlideWarning('Silakan pilih salah satu jawaban terlebih dahulu!');
                return false;
            }
            if (currentSlideNumber === 4 && !slide4Answered) {
                const input = document.getElementById('slide4Input').value.trim();
                if (input === '') {
                    document.getElementById('slide4Warning').classList.remove('hidden');
                    playErrorSound();
                    return false;
                } else {
                    document.getElementById('slide4Warning').classList.add('hidden');
                    slide4Answered = true;
                    // Track slide 4 answer
                    trackMaterialActivity(userName, 'Slide 4', 'Jawaban: ' + input.substring(0, 50) + (input.length > 50 ? '...' : ''));
                }
            }
            return true;
        }

        function showSlideWarning(message) {
            const warning = document.createElement('div');
            warning.className = 'fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-50 bg-gradient-to-r from-yellow-400 to-orange-500 px-8 py-6 rounded-3xl shadow-2xl text-center';
            warning.style.cssText = 'animation: popupBounce 0.5s ease-out;';
            warning.innerHTML = `
                <div class="text-5xl mb-3">âš ï¸</div>
                <p class="text-white font-bold text-lg">${message}</p>
            `;
            document.body.appendChild(warning);
            playErrorSound();
            
            setTimeout(() => {
                warning.style.animation = 'popupFadeOut 0.3s ease-out';
                setTimeout(() => warning.remove(), 300);
            }, 2000);
        }

        function nextSlide() {
            if (!canProceedToNextSlide()) {
                return;
            }
            
            if (currentSlideNumber < 6) {
                currentSlideNumber++;
                updateSlideNavigation();
                playClickSound();
            }
        }

        function previousSlide() {
            if (currentSlideNumber > 1) {
                currentSlideNumber--;
                updateSlideNavigation();
                playClickSound();
            }
        }

        function revealSlide1Answer() {
            document.getElementById('slide1Answer').classList.remove('hidden');
            slide1Answered = true;
            playSuccessSound();
            
            // Track material activity
            trackMaterialActivity(userName, 'Slide 1', 'Melihat jawaban atap rumah adat');
        }

        function answerSlide2(isCorrect) {
            const feedbackDiv = document.getElementById('slide2Feedback');
            const optionsDiv = document.getElementById('slide2Options');
            
            slide2Answered = true;
            
            optionsDiv.querySelectorAll('button').forEach(btn => btn.disabled = true);
            
            if (isCorrect) {
                feedbackDiv.innerHTML = `
                    <div class="p-6 bg-gradient-to-r from-green-100 to-emerald-100 rounded-xl">
                        <div class="text-6xl mb-4">âœ…</div>
                        <p class="text-xl font-bold text-gray-800">Ya, kamu benar. Segitiga putih dan segitiga merah memiliki bentuk yang sama.</p>
                    </div>
                `;
                playSuccessSound();
                trackMaterialActivity(userName, 'Slide 2', 'Jawaban: Sama (Benar)');
            } else {
                feedbackDiv.innerHTML = `
                    <div class="p-6 bg-gradient-to-r from-red-100 to-rose-100 rounded-xl">
                        <div class="text-6xl mb-4">âŒ</div>
                        <p class="text-xl font-bold text-gray-800">Belum tepat. Jawaban yang benar adalah segitiga putih dan segitiga merah memiliki bentuk yang sama.</p>
                    </div>
                `;
                playErrorSound();
                trackMaterialActivity(userName, 'Slide 2', 'Jawaban: Tidak Sama (Salah)');
            }
            
            feedbackDiv.classList.remove('hidden');
        }

        function answerSlide3(isCorrect) {
            const feedbackDiv = document.getElementById('slide3Feedback');
            const optionsDiv = document.getElementById('slide3Options');
            const extraImage = document.getElementById('slide3ExtraImage');
            
            slide3Answered = true;
            
            optionsDiv.querySelectorAll('button').forEach(btn => btn.disabled = true);
            
            if (isCorrect) {
                feedbackDiv.innerHTML = `
                    <div class="p-6 bg-gradient-to-r from-green-100 to-emerald-100 rounded-xl">
                        <div class="text-6xl mb-4">âœ…</div>
                        <p class="text-lg font-bold text-gray-800 leading-relaxed">Ya, kamu benar. Sudut-sudut dan perbandingan sisi-sisi yang bersesuaian sama. Karena segitiga merah terbentuk dari garis yang sejajar dengan alas segitiga putih. Sehingga sudut-sudut yang bersesuaian sama besar. Jika dua segitiga memiliki sudut-sudut yang bersesuaian sama besar, maka sisi-sisi yang bersesuaian memiliki perbandingan yang sama.</p>
                    </div>
                `;
                playSuccessSound();
                trackMaterialActivity(userName, 'Slide 3', 'Jawaban: Sama (Benar)');
            } else {
                feedbackDiv.innerHTML = `
                    <div class="p-6 bg-gradient-to-r from-red-100 to-rose-100 rounded-xl">
                        <div class="text-6xl mb-4">âŒ</div>
                        <p class="text-lg font-bold text-gray-800 leading-relaxed">Belum tepat. Jawaban yang benar adalah sudut-sudut dan perbandingan sisi-sisi yang bersesuaian sama. Karena segitiga merah terbentuk dari garis yang sejajar dengan alas segitiga putih. Sehingga sudut-sudut yang bersesuaian sama besar. Jika dua segitiga memiliki sudut-sudut yang bersesuaian sama besar, maka sisi-sisi yang bersesuaian memiliki perbandingan yang sama.</p>
                    </div>
                `;
                playErrorSound();
                trackMaterialActivity(userName, 'Slide 3', 'Jawaban: Tidak Sama (Salah)');
            }
            
            feedbackDiv.classList.remove('hidden');
            extraImage.classList.remove('hidden');
        }

        function showPopup(message, type) {
            const existingPopup = document.getElementById('answerPopup');
            if (existingPopup) {
                existingPopup.remove();
            }
            
            const popup = document.createElement('div');
            popup.id = 'answerPopup';
            popup.className = 'fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-50 rounded-3xl shadow-2xl text-center overflow-hidden';
            popup.style.cssText = 'animation: popupBounce 0.5s ease-out; max-width: 90%; width: 400px;';
            
            if (type === 'success') {
                playCelebrationSound();
                popup.innerHTML = `
                    <div class="bg-gradient-to-r from-green-400 via-emerald-400 to-teal-500 px-12 py-10 relative overflow-hidden">
                        <div class="absolute inset-0 opacity-20">
                            <div class="absolute top-0 left-0 w-24 h-24 bg-white rounded-full -translate-x-12 -translate-y-12"></div>
                            <div class="absolute bottom-0 right-0 w-32 h-32 bg-white rounded-full translate-x-16 translate-y-16"></div>
                        </div>
                        <div class="relative z-10">
                            <div class="text-8xl mb-4 animate-bounce">ğŸ‰</div>
                            <div class="text-3xl font-bold text-white mb-3" style="text-shadow: 2px 2px 4px rgba(0,0,0,0.2);">Benar!</div>
                            <div class="text-6xl mb-3">âœ…</div>
                            <div class="text-xl font-semibold text-white" style="text-shadow: 1px 1px 2px rgba(0,0,0,0.2);">Jawaban kamu tepat!</div>
                        </div>
                    </div>
                `;
            } else {
                popup.innerHTML = `
                    <div class="bg-gradient-to-r from-red-400 via-rose-400 to-pink-500 px-12 py-10 relative overflow-hidden">
                        <div class="absolute inset-0 opacity-20">
                            <div class="absolute top-0 left-0 w-24 h-24 bg-white rounded-full -translate-x-12 -translate-y-12"></div>
                            <div class="absolute bottom-0 right-0 w-32 h-32 bg-white rounded-full translate-x-16 translate-y-16"></div>
                        </div>
                        <div class="relative z-10">
                            <div class="text-8xl mb-4">ğŸ˜”</div>
                            <div class="text-3xl font-bold text-white mb-3" style="text-shadow: 2px 2px 4px rgba(0,0,0,0.2);">Salah!</div>
                            <div class="text-6xl mb-3">âŒ</div>
                            <div class="text-xl font-semibold text-white" style="text-shadow: 1px 1px 2px rgba(0,0,0,0.2);">Jawaban kamu belum tepat!</div>
                        </div>
                    </div>
                `;
            }
            
            document.body.appendChild(popup);
            
            setTimeout(() => {
                popup.style.animation = 'popupFadeOut 0.3s ease-out';
                setTimeout(() => popup.remove(), 300);
            }, 1500);
        }

        // Quiz Functions
        function initQuiz() {
            currentQuestionIndex = 0;
            quizScore = 0;
            quizTimeRemaining = 1800; // Reset to 30 minutes
            window.quizAnswerDetails = [];
            document.getElementById('quizComplete').classList.add('hidden');
            startQuizTimer();
            loadQuestion();
        }

        function startQuizTimer() {
            // Clear any existing timer
            if (quizTimer) {
                clearInterval(quizTimer);
            }
            
            updateQuizTimerDisplay();
            
            quizTimer = setInterval(() => {
                quizTimeRemaining--;
                updateQuizTimerDisplay();
                
                // Check if time is running out
                if (quizTimeRemaining <= 60) {
                    // Last minute - make timer red and pulse
                    const timerElement = document.getElementById('quizTimer');
                    if (timerElement) {
                        timerElement.classList.add('animate-pulse');
                        timerElement.style.color = '#DC2626'; // red-600
                    }
                }
                
                // Time's up!
                if (quizTimeRemaining <= 0) {
                    clearInterval(quizTimer);
                    timeUpQuiz();
                }
            }, 1000);
        }

        function updateQuizTimerDisplay() {
            const minutes = Math.floor(quizTimeRemaining / 60);
            const seconds = quizTimeRemaining % 60;
            const timerElement = document.getElementById('quizTimer');
            
            if (timerElement) {
                timerElement.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
                
                // Change color based on time remaining
                if (quizTimeRemaining > 300) { // More than 5 minutes
                    timerElement.style.color = '#059669'; // green-600
                } else if (quizTimeRemaining > 60) { // More than 1 minute
                    timerElement.style.color = '#D97706'; // orange-600
                } else { // Last minute
                    timerElement.style.color = '#DC2626'; // red-600
                }
            }
        }

        function timeUpQuiz() {
            playErrorSound();
            
            // Disable all quiz options
            const options = document.querySelectorAll('.quiz-option');
            options.forEach(option => {
                option.onclick = null;
                option.style.opacity = '0.5';
                option.style.cursor = 'not-allowed';
            });
            
            // Show time's up message
            const overlay = document.createElement('div');
            overlay.className = 'fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4';
            overlay.style.cssText = 'animation: fadeIn 0.3s ease-out;';
            
            overlay.innerHTML = `
                <div class="relative rounded-3xl p-8 max-w-md mx-4 shadow-2xl overflow-hidden backdrop-blur-xl bg-white/10 border border-white/20" style="animation: popupBounce 0.6s ease-out;">
                    <div class="absolute inset-0 bg-gradient-to-br from-red-400/20 via-orange-500/20 to-yellow-600/20"></div>
                    
                    <div class="relative z-10 text-center">
                        <div class="text-8xl mb-4">â°</div>
                        <h3 class="text-4xl font-bold text-white mb-4" style="text-shadow: 0 0 30px rgba(255,255,255,0.5);">
                            Waktu Habis!
                        </h3>
                        <p class="text-xl text-white/90 mb-6" style="text-shadow: 0 2px 10px rgba(0,0,0,0.3);">
                            30 menit telah berlalu. Quiz akan diselesaikan otomatis.
                        </p>
                        <button onclick="closeTimeUpAndFinish()" class="w-full backdrop-blur-lg bg-gradient-to-r from-orange-500/80 to-red-500/80 hover:from-orange-600/90 hover:to-red-600/90 border border-white/30 text-white px-6 py-4 rounded-full font-bold text-lg transition-all duration-300 transform hover:scale-105 shadow-2xl">
                            âœ… Lihat Hasil
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(overlay);
        }

        function closeTimeUpAndFinish() {
            const overlay = document.querySelector('.fixed.inset-0.bg-black\\/50');
            if (overlay) {
                overlay.remove();
            }
            showQuizResults();
        }

        function loadQuestion() {
            const question = quizQuestions[currentQuestionIndex];
            const content = document.getElementById('quizContent');
            
            // Determine question set and color scheme
            let questionSetTitle = '';
            let questionSetDescription = '';
            let headerGradient = '';
            let imageGradient = '';
            
            if (currentQuestionIndex < 4) {
                questionSetTitle = 'Pertanyaan 1';
                questionSetDescription = 'Perhatikan gambar kain corak insang berikut!';
                headerGradient = 'from-blue-400 via-indigo-500 to-purple-600';
                imageGradient = 'from-blue-400 via-indigo-500 to-purple-500';
            } else if (currentQuestionIndex < 8) {
                questionSetTitle = 'Pertanyaan 2';
                questionSetDescription = 'Perhatikan gambar atap rumah adat berikut!';
                headerGradient = 'from-green-400 via-emerald-500 to-teal-600';
                imageGradient = 'from-green-400 via-emerald-500 to-teal-500';
            } else {
                questionSetTitle = 'Pertanyaan 3';
                questionSetDescription = 'Perhatikan gambar pintu rumah adat berikut!';
                headerGradient = 'from-orange-400 via-pink-500 to-purple-600';
                imageGradient = 'from-orange-400 via-pink-500 to-red-500';
            }
            
            content.innerHTML = `
                <div class="bg-gradient-to-br from-white via-blue-50 to-purple-50 rounded-3xl p-4 md:p-8 shadow-2xl min-h-[600px] border-2 border-white/50">
                    <!-- Question Header -->
                    <div class="text-center mb-6">
                        <div class="bg-gradient-to-r ${headerGradient} p-1 rounded-2xl mb-4 inline-block">
                            <div class="bg-white px-6 py-3 rounded-xl">
                                <h3 class="text-2xl md:text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r ${headerGradient} mb-2">${questionSetTitle}</h3>
                                <p class="text-lg md:text-xl text-gray-700 font-semibold mb-0">${questionSetDescription}</p>
                            </div>
                        </div>
                    </div>

                    <!-- Question Image -->
                    <div class="text-center mb-6">
                        <div class="bg-gradient-to-br ${imageGradient} p-1 rounded-2xl shadow-2xl transform hover:scale-105 transition-all duration-300 inline-block max-w-full">
                            <div class="bg-white p-3 md:p-6 rounded-xl">
                                ${question.image.startsWith('http') ? 
                                    `<img src="${question.image}" alt="Gambar soal" class="w-full max-w-full md:max-w-md mx-auto rounded-lg h-auto object-contain" style="max-height: 300px;" onerror="this.style.display='none'; this.parentElement.innerHTML='<div class=\\'text-6xl mb-4\\'>ğŸ“</div><p class=\\'text-lg font-semibold text-gray-800\\'>Gambar Soal</p>';">` : 
                                    `<div class="text-6xl mb-4">${question.image}</div><p class="text-lg font-semibold text-gray-800">Gambar Soal</p>`
                                }
                            </div>
                        </div>
                    </div>

                    <!-- Question Context -->
                    <div class="bg-gradient-to-r from-yellow-400 via-orange-400 to-red-400 p-1 rounded-2xl mb-6 shadow-lg">
                        <div class="bg-gradient-to-r from-yellow-50 via-orange-50 to-red-50 p-6 rounded-xl">
                            <div class="flex items-center justify-center mb-3">
                                <div class="text-3xl mr-3">ğŸ“‹</div>
                                <h4 class="text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-orange-600 to-red-600">Informasi Soal</h4>
                            </div>
                            <div class="text-gray-700 leading-relaxed text-center font-medium">${question.question}</div>
                        </div>
                    </div>

                    <!-- Answer Options -->
                    <div class="bg-gradient-to-r from-green-400 via-teal-500 to-cyan-500 p-1 rounded-2xl mb-8 shadow-lg">
                        <div class="bg-gradient-to-r from-green-50 via-teal-50 to-cyan-50 p-6 rounded-xl">
                            <div class="flex items-center justify-center mb-4">
                                <div class="text-3xl mr-3">ğŸ¯</div>
                                <h4 class="text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-green-600 to-cyan-600">Pilihan Jawaban</h4>
                            </div>
                            <div class="space-y-4">
                                ${question.options.map((option, index) => `
                                    <button class="quiz-option w-full p-4 bg-white hover:bg-gradient-to-r hover:from-green-100 hover:to-cyan-100 rounded-xl text-left font-semibold text-gray-800 border-2 border-gray-200 hover:border-green-400 transition-all duration-300 shadow-md hover:shadow-lg" onclick="selectAnswer(${index})">
                                        <span class="inline-flex items-center justify-center w-8 h-8 rounded-full bg-gradient-to-r from-green-400 to-cyan-500 text-white font-bold mr-3">${String.fromCharCode(65 + index)}</span>
                                        ${option}
                                    </button>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            updateQuizProgress();
        }

        function selectAnswer(selectedIndex) {
            const question = quizQuestions[currentQuestionIndex];
            const options = document.querySelectorAll('.quiz-option');
            
            options.forEach(option => option.onclick = null);
            
            const isCorrect = selectedIndex === question.correct;
            
            if (isCorrect) {
                options[selectedIndex].classList.add('correct');
                quizScore++;
                playSuccessSound();
                showPopup('ğŸ‰ Benar!', 'success');
            } else {
                options[selectedIndex].classList.add('incorrect');
                options[question.correct].classList.add('correct');
                playErrorSound();
                showPopup('âŒ Salah!', 'error');
            }
            
            // Track quiz answer details
            if (!window.quizAnswerDetails) {
                window.quizAnswerDetails = [];
            }
            window.quizAnswerDetails.push({
                questionNumber: currentQuestionIndex + 1,
                userAnswer: question.options[selectedIndex],
                correctAnswer: question.options[question.correct],
                isCorrect: isCorrect
            });
            
            document.getElementById('quizScore').textContent = quizScore;
            
            setTimeout(() => {
                nextQuestion();
            }, 1500);
        }

        function nextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex < quizQuestions.length) {
                loadQuestion();
            } else {
                showQuizResults();
            }
        }

        function showQuizResults() {
            // Stop the quiz timer
            if (quizTimer) {
                clearInterval(quizTimer);
                quizTimer = null;
            }
            
            document.getElementById('quizContent').classList.add('hidden');
            
            // Track quiz result for host dashboard
            trackQuizResult(userName, quizScore, quizQuestions.length);
            
            playGameCompleteSound();
            createConfetti();
            
            const percentage = (quizScore / quizQuestions.length) * 100;
            const wrongAnswers = quizQuestions.length - quizScore;
            
            // Calculate time used
            const timeUsed = 1800 - quizTimeRemaining;
            const minutesUsed = Math.floor(timeUsed / 60);
            const secondsUsed = timeUsed % 60;
            const timeUsedText = `${minutesUsed}:${secondsUsed.toString().padStart(2, '0')}`;
            
            let performanceText = '';
            let performanceEmoji = '';
            
            if (percentage >= 80) {
                performanceText = 'Luar biasa! Kamu sangat memahami konsep kesebangunan!';
                performanceEmoji = 'ğŸ†';
            } else if (percentage >= 60) {
                performanceText = 'Bagus! Kamu cukup memahami materi ini!';
                performanceEmoji = 'ğŸ¯';
            } else {
                performanceText = 'Tetap semangat! Coba pelajari materi lagi ya!';
                performanceEmoji = 'ğŸ“š';
            }
            
            const overlay = document.createElement('div');
            overlay.id = 'quizCompleteOverlay';
            overlay.className = 'fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4';
            overlay.style.cssText = 'animation: fadeIn 0.3s ease-out;';
            
            overlay.innerHTML = `
                <div class="relative rounded-3xl p-8 max-w-2xl mx-4 shadow-2xl overflow-hidden backdrop-blur-xl bg-white/10 border border-white/20" style="animation: popupBounce 0.6s ease-out;">
                    <!-- Animated Background Gradient -->
                    <div class="absolute inset-0 bg-gradient-to-br from-cyan-400/20 via-blue-500/20 to-purple-600/20 animate-pulse"></div>
                    <div class="absolute inset-0 bg-gradient-to-tr from-pink-400/10 via-transparent to-yellow-400/10"></div>
                    
                    <!-- Floating Orbs -->
                    <div class="absolute top-10 left-10 w-32 h-32 bg-gradient-to-br from-cyan-400/30 to-blue-500/30 rounded-full blur-3xl animate-pulse"></div>
                    <div class="absolute bottom-10 right-10 w-40 h-40 bg-gradient-to-br from-purple-400/30 to-pink-500/30 rounded-full blur-3xl animate-pulse" style="animation-delay: 0.5s;"></div>
                    
                    <div class="relative z-10 text-center">
                        <div class="text-8xl mb-4 animate-bounce">ğŸ‰</div>
                        
                        <!-- User Greeting -->
                        <div class="mb-6">
                            <h3 class="text-4xl font-bold text-white mb-2" style="text-shadow: 0 0 30px rgba(255,255,255,0.5), 0 0 60px rgba(59,130,246,0.3);">
                                Selamat, ${userName}! ğŸŒŸ
                            </h3>
                            <p class="text-xl text-white/90 font-semibold" style="text-shadow: 0 2px 10px rgba(0,0,0,0.3);">
                                Kamu telah menyelesaikan quiz!
                            </p>
                        </div>
                        
                        <!-- Results Card -->
                        <div class="backdrop-blur-xl bg-white/20 border border-white/30 p-8 rounded-3xl mb-6 shadow-2xl">
                            <div class="text-7xl mb-4 drop-shadow-lg">${performanceEmoji}</div>
                            <h4 class="text-2xl font-bold text-white mb-6" style="text-shadow: 0 2px 15px rgba(0,0,0,0.2);">Hasil Quiz Kamu</h4>
                            
                            <!-- Stats Grid -->
                            <div class="grid grid-cols-2 md:grid-cols-5 gap-4 mb-6">
                                <div class="backdrop-blur-lg bg-gradient-to-br from-blue-500/30 to-cyan-500/30 border border-white/30 p-5 rounded-2xl transform hover:scale-105 transition-all shadow-lg">
                                    <div class="text-3xl font-bold text-white drop-shadow-lg">${quizScore}</div>
                                    <div class="text-sm text-white/90 font-semibold mt-1">Skor Total</div>
                                </div>
                                <div class="backdrop-blur-lg bg-gradient-to-br from-green-500/30 to-emerald-500/30 border border-white/30 p-5 rounded-2xl transform hover:scale-105 transition-all shadow-lg">
                                    <div class="text-3xl font-bold text-white drop-shadow-lg">${quizScore}</div>
                                    <div class="text-sm text-white/90 font-semibold mt-1">Benar</div>
                                </div>
                                <div class="backdrop-blur-lg bg-gradient-to-br from-red-500/30 to-pink-500/30 border border-white/30 p-5 rounded-2xl transform hover:scale-105 transition-all shadow-lg">
                                    <div class="text-3xl font-bold text-white drop-shadow-lg">${wrongAnswers}</div>
                                    <div class="text-sm text-white/90 font-semibold mt-1">Salah</div>
                                </div>
                                <div class="backdrop-blur-lg bg-gradient-to-br from-purple-500/30 to-indigo-500/30 border border-white/30 p-5 rounded-2xl transform hover:scale-105 transition-all shadow-lg">
                                    <div class="text-3xl font-bold text-white drop-shadow-lg">${Math.round(percentage)}%</div>
                                    <div class="text-sm text-white/90 font-semibold mt-1">Persentase</div>
                                </div>
                                <div class="backdrop-blur-lg bg-gradient-to-br from-orange-500/30 to-yellow-500/30 border border-white/30 p-5 rounded-2xl transform hover:scale-105 transition-all shadow-lg">
                                    <div class="text-3xl font-bold text-white drop-shadow-lg">${timeUsedText}</div>
                                    <div class="text-sm text-white/90 font-semibold mt-1">Waktu</div>
                                </div>
                            </div>
                            
                            <!-- Performance Message -->
                            <div class="backdrop-blur-md bg-white/20 border border-white/30 p-4 rounded-2xl">
                                <p class="text-lg font-semibold text-white" style="text-shadow: 0 2px 10px rgba(0,0,0,0.2);">${performanceText}</p>
                            </div>
                        </div>
                        
                        <!-- Action Buttons -->
                        <div class="space-y-3">
                            <button onclick="closeQuizComplete()" class="w-full backdrop-blur-lg bg-gradient-to-r from-blue-500/80 to-purple-500/80 hover:from-blue-600/90 hover:to-purple-600/90 border border-white/30 text-white px-6 py-4 rounded-full font-bold text-lg transition-all duration-300 transform hover:scale-105 shadow-2xl" style="text-shadow: 0 2px 10px rgba(0,0,0,0.3);">
                                ğŸ”„ Ulangi Quiz
                            </button>
                            <button onclick="closeQuizCompleteToHome()" class="w-full backdrop-blur-lg bg-white/20 hover:bg-white/30 border border-white/30 text-white px-6 py-4 rounded-full font-bold text-lg transition-all duration-300 transform hover:scale-105 shadow-2xl" style="text-shadow: 0 2px 10px rgba(0,0,0,0.3);">
                                ğŸ  Kembali ke Beranda
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(overlay);
        }
        
        function closeQuizComplete() {
            const overlay = document.getElementById('quizCompleteOverlay');
            if (overlay) {
                playClickSound();
                overlay.style.animation = 'fadeOut 0.3s ease-out';
                setTimeout(() => {
                    overlay.remove();
                    resetQuiz();
                }, 300);
            }
        }
        
        function closeQuizCompleteToHome() {
            const overlay = document.getElementById('quizCompleteOverlay');
            if (overlay) {
                playClickSound();
                overlay.style.animation = 'fadeOut 0.3s ease-out';
                setTimeout(() => {
                    overlay.remove();
                    showPage('homePage');
                }, 300);
            }
        }

        function resetQuiz() {
            document.getElementById('quizContent').classList.remove('hidden');
            initQuiz();
        }

        function updateQuizProgress() {
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            document.getElementById('totalQuestions').textContent = quizQuestions.length;
            const progress = ((currentQuestionIndex + 1) / quizQuestions.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
        }

        // Memory Game Functions
        function initMemoryGame() {
            const imagePairs = [
                { pair1: 'https://i.imgur.com/b1Zlbkt.png', pair2: 'https://i.imgur.com/Ejy16gR.png' },
                { pair1: 'https://i.imgur.com/80ICXOO.png', pair2: 'https://i.imgur.com/gcJxB4M.png' },
                { pair1: 'https://i.imgur.com/Veak9do.png', pair2: 'https://i.imgur.com/w12jWLf.png' },
                { pair1: 'https://i.imgur.com/0fxX71F.png', pair2: 'https://i.imgur.com/bsv7VA7.png' },
                { pair1: 'https://i.imgur.com/hDz2ArX.png', pair2: 'https://i.imgur.com/974FBWr.png' },
                { pair1: 'https://i.imgur.com/2witPyO.png', pair2: 'https://i.imgur.com/xte0thx.png' }
            ];
            
            memoryCards = [];
            imagePairs.forEach((pair, pairIndex) => {
                memoryCards.push({ image: pair.pair1, pairId: pairIndex });
                memoryCards.push({ image: pair.pair2, pairId: pairIndex });
            });
            
            for (let i = memoryCards.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [memoryCards[i], memoryCards[j]] = [memoryCards[j], memoryCards[i]];
            }
            
            flippedCards = [];
            matchedPairs = 0;
            gameTime = 0;
            gameAttempts = 0;
            
            const board = document.getElementById('memoryBoard');
            board.innerHTML = '';
            
            memoryCards.forEach((card, index) => {
                const cardElement = document.createElement('div');
                cardElement.className = 'aspect-square bg-gradient-to-br from-blue-400 to-purple-500 rounded-xl flex items-center justify-center cursor-pointer transition-all duration-300 hover:scale-105 shadow-lg overflow-hidden p-2';
                cardElement.dataset.index = index;
                cardElement.dataset.pairId = card.pairId;
                cardElement.dataset.image = card.image;
                cardElement.innerHTML = '<img src="https://i.imgur.com/HUKC9Y7.png" alt="Card Back" class="w-full h-full object-cover rounded-lg" style="max-width: 100%; max-height: 100%; display: block;" onerror="this.style.display=\'none\'; this.parentElement.innerHTML=\'<div class=\\\'text-4xl md:text-6xl\\\'>â“</div>\';">';
                cardElement.onclick = () => flipCard(index);
                board.appendChild(cardElement);
            });
            
            startGameTimer();
            updateGameDisplay();
            document.getElementById('gameComplete').classList.add('hidden');
        }

        function flipCard(index) {
            if (flippedCards.length >= 2) return;
            if (flippedCards.includes(index)) return;
            
            playClickSound();
            
            const cardElement = document.querySelector(`[data-index="${index}"]`);
            const cardImage = cardElement.dataset.image;
            
            cardElement.innerHTML = `<img src="${cardImage}" alt="Card" class="w-full h-full object-cover rounded-lg" style="max-width: 100%; max-height: 100%; display: block;" onerror="this.style.display='none'; this.parentElement.innerHTML='<div class=\'text-4xl md:text-6xl\'>ğŸ–¼ï¸</div>';">`;
            cardElement.classList.remove('from-blue-400', 'to-purple-500');
            cardElement.classList.add('from-yellow-400', 'to-orange-500');
            flippedCards.push(index);
            
            if (flippedCards.length === 2) {
                gameAttempts++;
                setTimeout(checkMatch, 1000);
            }
        }

        function checkMatch() {
            const [first, second] = flippedCards;
            const firstCard = document.querySelector(`[data-index="${first}"]`);
            const secondCard = document.querySelector(`[data-index="${second}"]`);
            
            if (firstCard.dataset.pairId === secondCard.dataset.pairId) {
                firstCard.classList.remove('from-yellow-400', 'to-orange-500');
                secondCard.classList.remove('from-yellow-400', 'to-orange-500');
                firstCard.classList.add('from-green-400', 'to-emerald-500');
                secondCard.classList.add('from-green-400', 'to-emerald-500');
                firstCard.onclick = null;
                secondCard.onclick = null;
                matchedPairs++;
                
                playMatchSound();
                
                if (matchedPairs === 6) {
                    setTimeout(() => {
                        endGame();
                    }, 500);
                }
            } else {
                firstCard.innerHTML = '<img src="https://i.imgur.com/HUKC9Y7.png" alt="Card Back" class="w-full h-full object-cover rounded-lg" style="max-width: 100%; max-height: 100%; display: block;" onerror="this.style.display=\'none\'; this.parentElement.innerHTML=\'<div class=\\\'text-4xl md:text-6xl\\\'>â“</div>\';">';
                secondCard.innerHTML = '<img src="https://i.imgur.com/HUKC9Y7.png" alt="Card Back" class="w-full h-full object-cover rounded-lg" style="max-width: 100%; max-height: 100%; display: block;" onerror="this.style.display=\'none\'; this.parentElement.innerHTML=\'<div class=\\\'text-4xl md:text-6xl\\\'>â“</div>\';">';
                firstCard.classList.remove('from-yellow-400', 'to-orange-500');
                secondCard.classList.remove('from-yellow-400', 'to-orange-500');
                firstCard.classList.add('from-blue-400', 'to-purple-500');
                secondCard.classList.add('from-blue-400', 'to-purple-500');
                
                playErrorSound();
            }
            
            flippedCards = [];
            updateGameDisplay();
        }

        function startGameTimer() {
            gameTimer = setInterval(() => {
                gameTime++;
                updateGameDisplay();
            }, 1000);
        }

        function updateGameDisplay() {
            const minutes = Math.floor(gameTime / 60);
            const seconds = gameTime % 60;
            document.getElementById('gameTimer').textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
            document.getElementById('gameMatches').textContent = matchedPairs;
            document.getElementById('gameAttempts').textContent = gameAttempts;
        }

        function endGame() {
            clearInterval(gameTimer);
            
            const minutes = Math.floor(gameTime / 60);
            const seconds = gameTime % 60;
            const timeText = `${minutes}:${seconds.toString().padStart(2, '0')}`;
            
            // Track game result for host dashboard
            trackGameResult(userName, timeText, gameAttempts);
            
            playGameCompleteSound();
            
            let performanceText = '';
            let performanceEmoji = '';
            
            if (gameAttempts <= 8) {
                performanceText = 'Luar biasa! Memori kamu sangat tajam!';
                performanceEmoji = 'ğŸ†';
            } else if (gameAttempts <= 12) {
                performanceText = 'Bagus! Kamu punya memori yang baik!';
                performanceEmoji = 'ğŸ¯';
            } else {
                performanceText = 'Terus berlatih untuk meningkatkan memori!';
                performanceEmoji = 'ğŸ“š';
            }
            
            createConfetti();
            
            const overlay = document.createElement('div');
            overlay.id = 'gameCompleteOverlay';
            overlay.className = 'fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4';
            overlay.style.cssText = 'animation: fadeIn 0.3s ease-out;';
            
            overlay.innerHTML = `
                <div class="relative rounded-3xl p-8 max-w-2xl mx-4 shadow-2xl overflow-hidden backdrop-blur-xl bg-white/10 border border-white/20" style="animation: popupBounce 0.6s ease-out;">
                    <!-- Animated Background Gradient -->
                    <div class="absolute inset-0 bg-gradient-to-br from-yellow-400/20 via-orange-500/20 to-pink-600/20 animate-pulse"></div>
                    <div class="absolute inset-0 bg-gradient-to-tr from-green-400/10 via-transparent to-blue-400/10"></div>
                    
                    <!-- Floating Orbs -->
                    <div class="absolute top-10 left-10 w-32 h-32 bg-gradient-to-br from-yellow-400/30 to-orange-500/30 rounded-full blur-3xl animate-pulse"></div>
                    <div class="absolute bottom-10 right-10 w-40 h-40 bg-gradient-to-br from-pink-400/30 to-purple-500/30 rounded-full blur-3xl animate-pulse" style="animation-delay: 0.5s;"></div>
                    
                    <div class="relative z-10 text-center">
                        <div class="text-8xl mb-4 animate-bounce">ğŸ‰</div>
                        
                        <!-- User Greeting -->
                        <div class="mb-6">
                            <h3 class="text-4xl font-bold text-white mb-2" style="text-shadow: 0 0 30px rgba(255,255,255,0.5), 0 0 60px rgba(255,165,0,0.3);">
                                Selamat, ${userName}! ğŸŒŸ
                            </h3>
                            <p class="text-xl text-white/90 font-semibold" style="text-shadow: 0 2px 10px rgba(0,0,0,0.3);">
                                Kamu berhasil menyelesaikan permainan!
                            </p>
                        </div>
                        
                        <!-- Results Card -->
                        <div class="backdrop-blur-xl bg-white/20 border border-white/30 p-8 rounded-3xl mb-6 shadow-2xl">
                            <div class="text-7xl mb-4 drop-shadow-lg">${performanceEmoji}</div>
                            <h4 class="text-2xl font-bold text-white mb-6" style="text-shadow: 0 2px 15px rgba(0,0,0,0.2);">Hasil Permainan Kamu</h4>
                            
                            <!-- Stats Grid -->
                            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                                <div class="backdrop-blur-lg bg-gradient-to-br from-blue-500/30 to-cyan-500/30 border border-white/30 p-5 rounded-2xl transform hover:scale-105 transition-all shadow-lg">
                                    <div class="text-3xl font-bold text-white drop-shadow-lg">${timeText}</div>
                                    <div class="text-sm text-white/90 font-semibold mt-1">Waktu</div>
                                </div>
                                <div class="backdrop-blur-lg bg-gradient-to-br from-green-500/30 to-emerald-500/30 border border-white/30 p-5 rounded-2xl transform hover:scale-105 transition-all shadow-lg">
                                    <div class="text-3xl font-bold text-white drop-shadow-lg">${gameAttempts}</div>
                                    <div class="text-sm text-white/90 font-semibold mt-1">Percobaan</div>
                                </div>
                                <div class="backdrop-blur-lg bg-gradient-to-br from-orange-500/30 to-yellow-500/30 border border-white/30 p-5 rounded-2xl transform hover:scale-105 transition-all shadow-lg">
                                    <div class="text-3xl font-bold text-white drop-shadow-lg">${matchedPairs}</div>
                                    <div class="text-sm text-white/90 font-semibold mt-1">Pasangan</div>
                                </div>
                                <div class="backdrop-blur-lg bg-gradient-to-br from-purple-500/30 to-pink-500/30 border border-white/30 p-5 rounded-2xl transform hover:scale-105 transition-all shadow-lg">
                                    <div class="text-3xl font-bold text-white drop-shadow-lg">100%</div>
                                    <div class="text-sm text-white/90 font-semibold mt-1">Selesai</div>
                                </div>
                            </div>
                            
                            <!-- Performance Message -->
                            <div class="backdrop-blur-md bg-white/20 border border-white/30 p-4 rounded-2xl">
                                <p class="text-lg font-semibold text-white" style="text-shadow: 0 2px 10px rgba(0,0,0,0.2);">${performanceText}</p>
                            </div>
                        </div>
                        
                        <!-- Action Buttons -->
                        <div class="space-y-3">
                            <button onclick="closeGameComplete()" class="w-full backdrop-blur-lg bg-gradient-to-r from-yellow-500/80 to-orange-500/80 hover:from-yellow-600/90 hover:to-orange-600/90 border border-white/30 text-white px-6 py-4 rounded-full font-bold text-lg transition-all duration-300 transform hover:scale-105 shadow-2xl" style="text-shadow: 0 2px 10px rgba(0,0,0,0.3);">
                                ğŸ”„ Main Lagi
                            </button>
                            <button onclick="closeGameCompleteToHome()" class="w-full backdrop-blur-lg bg-white/20 hover:bg-white/30 border border-white/30 text-white px-6 py-4 rounded-full font-bold text-lg transition-all duration-300 transform hover:scale-105 shadow-2xl" style="text-shadow: 0 2px 10px rgba(0,0,0,0.3);">
                                ğŸ  Kembali ke Beranda
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(overlay);
        }
        
        function createConfetti() {
            const colors = ['#FF6B6B', '#4ECDC4', '#45B7D1', '#FFA07A', '#98D8C8', '#F7DC6F', '#BB8FCE', '#85C1E2'];
            const confettiCount = 50;
            
            for (let i = 0; i < confettiCount; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.top = '-10px';
                    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.animationDelay = Math.random() * 0.5 + 's';
                    confetti.style.animationDuration = (Math.random() * 2 + 2) + 's';
                    document.body.appendChild(confetti);
                    
                    setTimeout(() => confetti.remove(), 3500);
                }, i * 30);
            }
        }
        
        function closeGameComplete() {
            const overlay = document.getElementById('gameCompleteOverlay');
            if (overlay) {
                overlay.style.animation = 'fadeOut 0.3s ease-out';
                setTimeout(() => {
                    overlay.remove();
                    resetMemoryGame();
                }, 300);
            }
        }
        
        function closeGameCompleteToHome() {
            const overlay = document.getElementById('gameCompleteOverlay');
            if (overlay) {
                overlay.style.animation = 'fadeOut 0.3s ease-out';
                setTimeout(() => {
                    overlay.remove();
                    showPage('homePage');
                }, 300);
            }
        }

        function resetMemoryGame() {
            clearInterval(gameTimer);
            initMemoryGame();
        }

        // Tab Switching Function
        function switchTab(tabName) {
            playClickSound();
            
            // Remove active class from all tab buttons
            const tabButtons = document.querySelectorAll('.tab-button');
            tabButtons.forEach(button => {
                button.classList.remove('active', 'text-blue-500', 'border-blue-500', 'text-green-500', 'border-green-500', 'text-yellow-500', 'border-yellow-500', 'text-purple-500', 'border-purple-500');
                button.classList.add('text-gray-600', 'border-transparent');
            });
            
            // Hide all tab contents
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(content => {
                content.classList.add('hidden');
            });
            
            // Show selected tab content and activate button
            if (tabName === 'users') {
                document.getElementById('contentUsers').classList.remove('hidden');
                document.getElementById('tabUsers').classList.add('active', 'text-blue-500', 'border-blue-500');
                document.getElementById('tabUsers').classList.remove('text-gray-600', 'border-transparent');
            } else if (tabName === 'material') {
                document.getElementById('contentMaterial').classList.remove('hidden');
                document.getElementById('tabMaterial').classList.add('active', 'text-green-500', 'border-green-500');
                document.getElementById('tabMaterial').classList.remove('text-gray-600', 'border-transparent');
            } else if (tabName === 'quiz') {
                document.getElementById('contentQuiz').classList.remove('hidden');
                document.getElementById('tabQuiz').classList.add('active', 'text-yellow-500', 'border-yellow-500');
                document.getElementById('tabQuiz').classList.remove('text-gray-600', 'border-transparent');
            } else if (tabName === 'game') {
                document.getElementById('contentGame').classList.remove('hidden');
                document.getElementById('tabGame').classList.add('active', 'text-purple-500', 'border-purple-500');
                document.getElementById('tabGame').classList.remove('text-gray-600', 'border-transparent');
            }
        }

        // Element SDK Implementation
        async function onConfigChange(config) {
            const appTitle = config.app_title || defaultConfig.app_title;
            const welcomeMessage = config.welcome_message || defaultConfig.welcome_message;
            
            document.getElementById('appTitle').textContent = appTitle;
            document.getElementById('welcomeMessage').textContent = welcomeMessage;
        }

        function mapToCapabilities(config) {
            return {
                recolorables: [],
                borderables: [],
                fontEditable: undefined,
                fontSizeable: undefined
            };
        }

        function mapToEditPanelValues(config) {
            return new Map([
                ["app_title", config.app_title || defaultConfig.app_title],
                ["welcome_message", config.welcome_message || defaultConfig.welcome_message]
            ]);
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            showPage('homePage');
            
            checkAudioConnection();
            
            const audio = document.getElementById('backgroundMusic');
            const icon = document.getElementById('audioIcon');
            
            audio.play().then(() => {
                isAudioPlaying = true;
                icon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"></path>';
            }).catch(e => {
                console.log('Autoplay blocked, user needs to enable audio manually');
            });
            
            if (window.elementSdk) {
                window.elementSdk.init({
                    defaultConfig,
                    onConfigChange,
                    mapToCapabilities,
                    mapToEditPanelValues
                });
            }
        });
    </script>
  </div>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'99cbd205071d87f6',t:'MTc2Mjg0MzQ1OS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
