<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üèÄ Ethnomath - Game Kesebangunan</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fredoka+One:wght@400&family=Poppins:wght@300;400;600;700&family=Dancing+Script:wght@400;600;700&family=Pacifico&display=swap');
        
        body {
            font-family: 'Poppins', sans-serif;
            background: 
                linear-gradient(rgba(0,0,0,0.2), rgba(0,0,0,0.1)),
                url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 800"><defs><linearGradient id="sky" x1="0%" y1="0%" x2="0%" y2="100%"><stop offset="0%" style="stop-color:%23B8860B;stop-opacity:1" /><stop offset="30%" style="stop-color:%23CD853F;stop-opacity:1" /><stop offset="60%" style="stop-color:%23D2691E;stop-opacity:1" /><stop offset="100%" style="stop-color:%23A0522D;stop-opacity:1" /></linearGradient></defs><rect width="1200" height="800" fill="url(%23sky)"/><g transform="translate(80,350)"><rect x="0" y="120" width="240" height="180" fill="%23CD853F" stroke="%23B8860B" stroke-width="4" rx="8"/><polygon points="0,120 40,60 120,20 200,60 240,120" fill="%23A0522D" stroke="%23654321" stroke-width="3"/><rect x="20" y="180" width="50" height="100" fill="%23654321" stroke="%234A4A4A" stroke-width="2"/><rect x="140" y="160" width="80" height="80" fill="%235F9EA0" stroke="%23708090" stroke-width="3"/><rect x="10" y="100" width="220" height="20" fill="%23D2691E" stroke="%23CD853F" stroke-width="2"/><rect x="100" y="40" width="40" height="80" fill="%23A0522D" stroke="%23654321" stroke-width="2"/><rect x="0" y="300" width="240" height="40" fill="%23CD853F" stroke="%23B8860B" stroke-width="2"/><rect x="80" y="200" width="80" height="100" fill="%23D2691E" stroke="%23CD853F" stroke-width="2"/></g><g transform="translate(380,380)"><rect x="0" y="100" width="200" height="160" fill="%23CD853F" stroke="%23B8860B" stroke-width="4" rx="6"/><polygon points="0,100 30,50 100,15 170,50 200,100" fill="%23A0522D" stroke="%23654321" stroke-width="3"/><rect x="15" y="160" width="40" height="90" fill="%23654321" stroke="%234A4A4A" stroke-width="2"/><rect x="120" y="140" width="60" height="60" fill="%235F9EA0" stroke="%23708090" stroke-width="3"/><rect x="5" y="85" width="190" height="15" fill="%23D2691E" stroke="%23CD853F" stroke-width="2"/><rect x="85" y="35" width="30" height="65" fill="%23A0522D" stroke="%23654321" stroke-width="2"/><rect x="0" y="260" width="200" height="30" fill="%23CD853F" stroke="%23B8860B" stroke-width="2"/></g><g transform="translate(680,360)"><rect x="0" y="120" width="260" height="200" fill="%23D2691E" stroke="%23CD853F" stroke-width="4" rx="10"/><polygon points="0,120 50,50 130,10 210,50 260,120" fill="%23A0522D" stroke="%23654321" stroke-width="3"/><rect x="25" y="190" width="55" height="110" fill="%23654321" stroke="%234A4A4A" stroke-width="2"/><rect x="150" y="165" width="85" height="85" fill="%235F9EA0" stroke="%23708090" stroke-width="3"/><rect x="10" y="100" width="240" height="20" fill="%23D2691E" stroke="%23CD853F" stroke-width="2"/><rect x="110" y="30" width="40" height="90" fill="%23A0522D" stroke="%23654321" stroke-width="2"/><rect x="0" y="320" width="260" height="50" fill="%23CD853F" stroke="%23B8860B" stroke-width="2"/><rect x="90" y="180" width="100" height="140" fill="%23D2691E" stroke="%23CD853F" stroke-width="2"/></g><g fill="%23228B22"><ellipse cx="50" cy="600" rx="30" ry="80"/><ellipse cx="350" cy="580" rx="25" ry="70"/><ellipse cx="650" cy="620" rx="35" ry="90"/><ellipse cx="950" cy="590" rx="28" ry="75"/></g><g fill="%23556B2F"><circle cx="50" cy="520" r="40"/><circle cx="350" cy="510" r="35"/><circle cx="650" cy="530" r="45"/><circle cx="950" cy="515" r="38"/></g></svg>');
            background-size: cover, cover;
            background-position: center, center;
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        .game-title {
            font-family: 'Fredoka One', cursive;
            color: rgba(255, 255, 255, 0.9);
        }
        
        /* Enhanced Game Elements */
        .enhanced-card {
            position: relative;
            overflow: hidden;
        }
        
        .enhanced-card::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, rgba(255,255,255,0.3), rgba(255,255,255,0.2), rgba(255,255,255,0.4), rgba(255,255,255,0.3), rgba(255,255,255,0.2));
            border-radius: inherit;
            z-index: -1;
            animation: borderGlow 3s linear infinite;
        }
        
        @keyframes borderGlow {
            0% { opacity: 0.5; }
            50% { opacity: 1; }
            100% { opacity: 0.5; }
        }
        
        .floating-emojis {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
        }
        
        .floating-emoji {
            position: absolute;
            font-size: 2rem;
            animation: floatEmoji 8s linear infinite;
            opacity: 0.7;
        }
        
        @keyframes floatEmoji {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 0.7;
            }
            90% {
                opacity: 0.7;
            }
            100% {
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }
        
        .basketball-court {
            background: linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.15), rgba(255,255,255,0.2), rgba(255,255,255,0.1));
            position: relative;
            overflow: hidden;
        }
        
        .basketball-court::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 80%, rgba(255,255,255,0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255,255,255,0.1) 0%, transparent 50%);
        }
        
        .player {
            transition: all 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            filter: drop-shadow(0 8px 16px rgba(0,0,0,0.3));
        }
        
        .ball {
            transition: all 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.4));
        }
        
        .ring {
            filter: drop-shadow(0 6px 12px rgba(0,0,0,0.4));
        }
        
        @keyframes bounceIn {
            0% { transform: scale(0.3) translateY(100px); opacity: 0; }
            50% { transform: scale(1.05) translateY(-10px); }
            70% { transform: scale(0.9) translateY(5px); }
            100% { transform: scale(1) translateY(0); opacity: 1; }
        }
        
        @keyframes celebrate {
            0%, 100% { transform: scale(1) rotate(0deg); }
            25% { transform: scale(1.2) rotate(-10deg); }
            50% { transform: scale(1.3) rotate(0deg); }
            75% { transform: scale(1.2) rotate(10deg); }
        }
        
        @keyframes miss {
            0% { transform: translateX(0) rotate(0deg); }
            25% { transform: translateX(-15px) rotate(-5deg); }
            50% { transform: translateX(15px) rotate(5deg); }
            75% { transform: translateX(-10px) rotate(-3deg); }
            100% { transform: translateX(0) rotate(0deg); }
        }
        
        @keyframes ballBounce {
            0%, 100% { transform: translateY(0) scale(1); }
            50% { transform: translateY(-20px) scale(1.1); }
        }
        
        @keyframes scorePopup {
            0% { transform: scale(0) rotate(-180deg); opacity: 0; }
            50% { transform: scale(1.3) rotate(0deg); opacity: 1; }
            100% { transform: scale(1) rotate(0deg); opacity: 1; }
        }
        
        @keyframes sparkle {
            0%, 100% { opacity: 0; transform: scale(0) rotate(0deg); }
            50% { opacity: 1; transform: scale(1) rotate(180deg); }
        }
        
        @keyframes fireworkExplode {
            0% { 
                opacity: 1; 
                transform: scale(0) rotate(0deg); 
            }
            50% { 
                opacity: 1; 
                transform: scale(1.5) rotate(180deg); 
            }
            100% { 
                opacity: 0; 
                transform: scale(2) rotate(360deg) translateY(-50px); 
            }
        }
        
        @keyframes celebrationTextFloat {
            0% { 
                opacity: 0; 
                transform: scale(0.5) translateY(0px); 
            }
            20% { 
                opacity: 1; 
                transform: scale(1.2) translateY(-20px); 
            }
            100% { 
                opacity: 0; 
                transform: scale(0.8) translateY(-80px); 
            }
        }
        
        @keyframes missEffectFloat {
            0% { 
                opacity: 0; 
                transform: scale(0.8) translateY(0px); 
            }
            30% { 
                opacity: 1; 
                transform: scale(1.1) translateY(-10px); 
            }
            100% { 
                opacity: 0; 
                transform: scale(0.9) translateY(-40px); 
            }
        }
        
        .bounce-in { animation: bounceIn 0.8s ease-out; }
        .celebrate { animation: celebrate 1s ease-in-out; }
        .miss { animation: miss 0.8s ease-in-out; }
        .ball-bounce { animation: ballBounce 0.6s infinite; }
        .score-popup { animation: scorePopup 0.6s ease-out; }
        .sparkle { animation: sparkle 1s ease-in-out infinite; }
        
        .glass-card {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        .neon-button {
            background: linear-gradient(45deg, rgba(255,255,255,0.2), rgba(255,255,255,0.3), rgba(255,255,255,0.25));
            box-shadow: 0 0 25px rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
        }
        
        .neon-button:hover {
            box-shadow: 0 0 40px rgba(255, 255, 255, 0.5);
            transform: translateY(-3px) scale(1.05);
        }
        
        .option-button {
            background: linear-gradient(135deg, rgba(255,255,255,0.2), rgba(255,255,255,0.15));
            backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
        }
        
        .option-button:hover {
            transform: translateY(-2px) scale(1.01);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            border-color: rgba(255, 255, 255, 0.5);
        }
        
        .correct-answer {
            background: linear-gradient(135deg, #10b981, #059669) !important;
            border-color: #10b981 !important;
            box-shadow: 0 0 30px rgba(16, 185, 129, 0.8) !important;
        }
        
        .wrong-answer {
            background: linear-gradient(135deg, #ef4444, #dc2626) !important;
            border-color: #ef4444 !important;
            box-shadow: 0 0 30px rgba(239, 68, 68, 0.8) !important;
        }
        
        .floating {
            animation: floating 3s ease-in-out infinite;
        }
        
        @keyframes floating {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        .pulse-ring {
            animation: pulseRing 2s infinite;
        }
        
        @keyframes pulseRing {
            0% { transform: scale(1); opacity: 1; }
            100% { transform: scale(1.5); opacity: 0; }
        }
        
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background: #ff6b6b;
            animation: confetti 3s ease-in-out infinite;
        }
        
        @keyframes confetti {
            0% { transform: translateY(0) rotate(0deg); opacity: 1; }
            100% { transform: translateY(300px) rotate(720deg); opacity: 0; }
        }
        
        .floating-shapes {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }
        
        .shape {
            position: absolute;
            opacity: 0.1;
            animation: floatShapes 20s linear infinite;
        }
        
        @keyframes floatShapes {
            0% { transform: translateY(100vh) rotate(0deg); }
            100% { transform: translateY(-100px) rotate(360deg); }
        }
        
        .card-hover {
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        .card-hover:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
        }
        
        .mobile-friendly {
            padding: 1rem;
        }
        
        @media (max-width: 768px) {
            .mobile-friendly {
                padding: 0.5rem;
            }
            
            .text-responsive {
                font-size: clamp(1rem, 4vw, 2rem);
            }
            
            .title-responsive {
                font-size: clamp(2rem, 8vw, 4rem);
            }
            
            .button-responsive {
                padding: 0.75rem 1.5rem;
                font-size: clamp(0.9rem, 3vw, 1.1rem);
            }
        }
    </style>
</head>
<body class="min-h-screen">
    
    <!-- Enhanced Floating Background Shapes -->
    <div class="floating-shapes">
        <div class="shape text-6xl" style="left: 10%; animation-delay: 0s;">üåü</div>
        <div class="shape text-5xl" style="left: 20%; animation-delay: 2s;">üé®</div>
        <div class="shape text-4xl" style="left: 30%; animation-delay: 4s;">üéØ</div>
        <div class="shape text-6xl" style="left: 40%; animation-delay: 6s;">üöÄ</div>
        <div class="shape text-5xl" style="left: 50%; animation-delay: 8s;">‚≠ê</div>
        <div class="shape text-4xl" style="left: 60%; animation-delay: 10s;">üé™</div>
        <div class="shape text-6xl" style="left: 70%; animation-delay: 12s;">üé≠</div>
        <div class="shape text-5xl" style="left: 80%; animation-delay: 14s;">üé®</div>
        <div class="shape text-4xl" style="left: 90%; animation-delay: 16s;">üåà</div>
        <div class="shape text-6xl" style="left: 15%; animation-delay: 18s;">üéä</div>
        <div class="shape text-5xl" style="left: 25%; animation-delay: 1s;">üìê</div>
        <div class="shape text-4xl" style="left: 35%; animation-delay: 3s;">üìè</div>
        <div class="shape text-6xl" style="left: 45%; animation-delay: 5s;">üî¢</div>
        <div class="shape text-5xl" style="left: 55%; animation-delay: 7s;">üìä</div>
        <div class="shape text-4xl" style="left: 65%; animation-delay: 9s;">üé≤</div>
        <div class="shape text-6xl" style="left: 75%; animation-delay: 11s;">üèÜ</div>
        <div class="shape text-5xl" style="left: 85%; animation-delay: 13s;">üéâ</div>
        <div class="shape text-4xl" style="left: 95%; animation-delay: 15s;">‚ú®</div>
    </div>
    
    <!-- Floating Emojis -->
    <div class="floating-emojis">
        <div class="floating-emoji" style="left: 5%; animation-delay: 0s;">üéì</div>
        <div class="floating-emoji" style="left: 15%; animation-delay: 1s;">üìö</div>
        <div class="floating-emoji" style="left: 25%; animation-delay: 2s;">üßÆ</div>
        <div class="floating-emoji" style="left: 35%; animation-delay: 3s;">üìê</div>
        <div class="floating-emoji" style="left: 45%; animation-delay: 4s;">üìè</div>
        <div class="floating-emoji" style="left: 55%; animation-delay: 5s;">üî¢</div>
        <div class="floating-emoji" style="left: 65%; animation-delay: 6s;">üéØ</div>
        <div class="floating-emoji" style="left: 75%; animation-delay: 7s;">üèÜ</div>
        <div class="floating-emoji" style="left: 85%; animation-delay: 8s;">‚≠ê</div>
        <div class="floating-emoji" style="left: 95%; animation-delay: 9s;">üåü</div>
    </div>
    
    <!-- Host Dashboard Button (Only visible on home page) -->
    <button id="hostButton" onclick="showHostLogin()" class="fixed bottom-4 left-4 z-50 bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 text-white p-3 rounded-full shadow-lg transition-all duration-300 transform hover:scale-110 group">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
        </svg>
        <div class="absolute bottom-full right-0 mb-2 px-3 py-1 bg-gray-800 text-white text-sm rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300 whitespace-nowrap">
            Host Dashboard
        </div>
    </button>

    <!-- Host Login Modal -->
    <div id="hostLoginModal" class="hidden fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50">
        <div class="glass-card rounded-3xl p-8 max-w-md mx-4 shadow-2xl bounce-in">
            <div class="text-6xl mb-4 text-center">üîê</div>
            <h3 class="text-3xl font-bold text-gray-900 mb-6 text-center">Host Login</h3>
            <input type="password" id="hostPassword" placeholder="Masukkan password host..." 
                   class="w-full px-6 py-4 rounded-full text-lg font-semibold text-gray-800 bg-white/90 backdrop-blur-sm border-2 border-white/30 focus:border-cyan-400 focus:outline-none focus:ring-4 focus:ring-cyan-400/30 transition-all duration-300 mb-4">
            <p class="text-gray-700 text-sm mb-6 text-center">Password: <span class="text-red-600 font-bold">admin123</span></p>
            <div class="flex space-x-4">
                <button onclick="hideHostLogin()" class="flex-1 bg-gradient-to-r from-gray-500 to-gray-600 hover:from-gray-600 hover:to-gray-700 text-white px-6 py-3 rounded-full font-bold transition-all duration-300 transform hover:scale-105">
                    ‚ùå Batal
                </button>
                <button onclick="verifyHostPassword()" class="flex-1 bg-gradient-to-r from-green-400 to-blue-500 hover:from-green-500 hover:to-blue-600 text-white px-6 py-3 rounded-full font-bold transition-all duration-300 transform hover:scale-105">
                    üîì Masuk
                </button>
            </div>
        </div>
    </div>

    <!-- Home Page -->
    <div id="homePage" class="min-h-screen flex items-center justify-center mobile-friendly">
        <div class="max-w-4xl mx-auto text-center w-full">
            <div class="glass-card rounded-3xl p-4 md:p-8 shadow-2xl bounce-in card-hover enhanced-card">
                <!-- Fun Header with Emojis -->
                <div class="mb-6">
                    <div class="text-4xl md:text-6xl mb-2">üéÆüåàüìê‚ú®</div>
                    <h1 class="title-responsive font-bold text-gray-800 mb-2">üèÄ ETHNOMATH by Veni Siswiandini</h1>
                    
                    <h2 class="text-responsive text-gray-900 font-bold mb-4 floating">Game Kesebangunan Super Seru!</h2>
                    <div class="text-2xl md:text-3xl mb-4">üéØüé™üöÄüéä</div>
                </div>
                
                <!-- Fun Stats Cards -->
                <div class="grid grid-cols-2 md:grid-cols-4 gap-2 md:gap-4 mb-6">
                    <div class="glass-card rounded-2xl p-3 card-hover enhanced-card">
                        <div class="text-2xl md:text-3xl">üé≤</div>
                        <div class="text-sm md:text-base text-blue-600 font-bold">5 Soal</div>
                        <div class="text-xs text-gray-900 font-semibold">Seru!</div>
                    </div>
                    <div class="glass-card rounded-2xl p-3 card-hover enhanced-card">
                        <div class="text-2xl md:text-3xl">‚è∞</div>
                        <div class="text-sm md:text-base text-green-600 font-bold">10 Menit</div>
                        <div class="text-xs text-gray-900 font-semibold">Waktu</div>
                    </div>
                    <div class="glass-card rounded-2xl p-3 card-hover enhanced-card">
                        <div class="text-2xl md:text-3xl">üèÜ</div>
                        <div class="text-sm md:text-base text-yellow-600 font-bold">100 Poin</div>
                        <div class="text-xs text-gray-900 font-semibold">Maksimal</div>
                    </div>
                    <div class="glass-card rounded-2xl p-3 card-hover enhanced-card">
                        <div class="text-2xl md:text-3xl">üé®</div>
                        <div class="text-sm md:text-base text-purple-600 font-bold">Animasi</div>
                        <div class="text-xs text-gray-900 font-semibold">Keren!</div>
                    </div>
                </div>
                
                <div class="space-y-4">
                    <button onclick="showMaterial()" class="w-full md:w-auto neon-button text-white button-responsive rounded-full font-bold transition-all duration-300 transform hover:scale-105 shadow-lg">
                        üìö Pelajari Materi Dulu ü§ì
                    </button>
                    <br>
                    <button onclick="showNameInput()" class="w-full md:w-auto bg-gradient-to-r from-pink-400 via-purple-500 to-indigo-500 hover:from-pink-500 hover:via-purple-600 hover:to-indigo-600 text-white button-responsive rounded-full font-bold transition-all duration-300 transform hover:scale-105 shadow-lg">
                        üöÄ MULAI BERMAIN SEKARANG! üéÆ
                    </button>
                </div>
                
                <!-- Fun Footer -->
                <div class="mt-6 text-sm md:text-base text-gray-900 font-bold">
                    <div class="mb-2">üåü Belajar Matematika Jadi Menyenangkan! üåü</div>
                    <div class="flex justify-center space-x-2 text-2xl">
                        <span class="animate-bounce">üéâ</span>
                        <span class="animate-bounce" style="animation-delay: 0.1s;">üéä</span>
                        <span class="animate-bounce" style="animation-delay: 0.2s;">üéà</span>
                        <span class="animate-bounce" style="animation-delay: 0.3s;">üéÅ</span>
                        <span class="animate-bounce" style="animation-delay: 0.4s;">üé™</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
                
    <!-- Name Input Modal (Hidden by default) -->
    <div id="nameInputModal" class="hidden fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50">
        <div class="glass-card rounded-3xl p-8 max-w-md mx-4 shadow-2xl bounce-in">
            <div class="text-6xl mb-4 text-center">üë§</div>
            <h3 class="text-3xl font-bold text-gray-900 mb-6 text-center">Siapa Nama Kamu?</h3>
            <input type="text" id="playerName" placeholder="Tulis nama kamu di sini..." 
                   class="w-full px-6 py-4 rounded-full text-lg font-semibold text-gray-900 bg-white/95 backdrop-blur-sm border-2 border-white/30 focus:border-cyan-400 focus:outline-none focus:ring-4 focus:ring-cyan-400/30 transition-all duration-300 mb-4"
                   maxlength="20">
            <p class="text-gray-800 text-sm mb-6 text-center font-semibold">Nama akan ditampilkan di papan skor! ‚ú®</p>
            <div class="flex space-x-4">
                <button onclick="hideNameInput()" class="flex-1 bg-gradient-to-r from-gray-500 to-gray-600 hover:from-gray-600 hover:to-gray-700 text-white px-6 py-3 rounded-full font-bold transition-all duration-300 transform hover:scale-105">
                    ‚ùå Batal
                </button>
                <button onclick="startGameWithName()" class="flex-1 bg-gradient-to-r from-green-400 to-blue-500 hover:from-green-500 hover:to-blue-600 text-white px-6 py-3 rounded-full font-bold transition-all duration-300 transform hover:scale-105">
                    üéÆ Mulai!
                </button>
            </div>
        </div>
    </div>

    <!-- Material Page -->
    <div id="materialPage" class="hidden min-h-screen mobile-friendly">
        <div class="max-w-5xl mx-auto">
            <div class="glass-card rounded-3xl p-4 md:p-8 shadow-2xl card-hover">
                <div class="flex flex-col md:flex-row items-center justify-between mb-6 md:mb-8 space-y-4 md:space-y-0">
                    <div class="text-center md:text-left">
                        <div class="text-4xl md:text-6xl mb-2">üìöüåà‚ú®</div>
                        <h1 class="title-responsive font-bold text-gray-800">Materi Kesebangunan</h1>
                        <div class="text-2xl md:text-3xl mt-2">üéØüìêüé®</div>
                    </div>
                    <button onclick="showHome()" class="bg-gradient-to-r from-red-400 via-pink-500 to-purple-500 hover:from-red-500 hover:via-pink-600 hover:to-purple-600 text-white button-responsive rounded-full font-bold transition-all duration-300 transform hover:scale-105 shadow-lg">
                        ‚Üê Kembali üè†
                    </button>
                </div>
                
                <div class="space-y-4 md:space-y-6">
                    <!-- Definisi Kesebangunan -->
                    <div class="glass-card rounded-2xl p-4 md:p-6 floating card-hover bg-gradient-to-r from-yellow-400/20 to-orange-400/20">
                        <div class="text-center mb-4">
                            <div class="text-4xl md:text-5xl mb-2">üîç‚ú®</div>
                            <div class="text-2xl">üéØüåüüé®</div>
                        </div>
                        <h2 class="text-2xl md:text-3xl font-bold text-gray-800 mb-4 text-center">KESEBANGUNAN</h2>
                        <p class="text-gray-900 leading-relaxed text-lg mb-4 font-semibold">
                            <strong class="text-red-700">Kesebangunan</strong> adalah hubungan dua bangun yang memiliki 
                            <strong class="text-red-700">bentuk sama</strong> tetapi <strong class="text-red-700">ukuran belum tentu sama</strong>.
                        </p>
                        
                        <div class="mt-6">
                            <h3 class="text-xl font-bold text-blue-600 mb-3">Dua bangun dikatakan sebangun jika:</h3>
                            <ul class="text-gray-900 space-y-2 ml-4 font-semibold">
                                <li class="flex items-start">
                                    <span class="text-red-600 mr-2 font-bold">‚Ä¢</span>
                                    <span>Bentuknya sama (sudut-sudut yang bersesuaian sama besar).</span>
                                </li>
                                <li class="flex items-start">
                                    <span class="text-red-600 mr-2 font-bold">‚Ä¢</span>
                                    <span>Perbandingan panjang sisi-sisi yang bersesuaian sama.</span>
                                </li>
                            </ul>
                        </div>
                    </div>

                    <!-- Gambar Ilustrasi -->
                    <div class="glass-card rounded-2xl p-6 floating" style="animation-delay: 0.2s;">
                        <div class="text-center">
                            <img src="https://imgur.com/h2ms2hb.jpg" alt="Ilustrasi Kesebangunan" 
                                 class="max-w-full h-auto rounded-lg mx-auto shadow-lg"
                                 onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                            <div class="hidden bg-gradient-to-r from-blue-500 to-purple-600 text-white p-8 rounded-lg">
                                <div class="text-4xl mb-4">üìê</div>
                                <p class="text-lg">Ilustrasi Kesebangunan</p>
                                <p class="text-sm opacity-75 mt-2">Gambar menunjukkan dua bangun sebangun</p>
                            </div>
                        </div>
                    </div>

                    <!-- Rumus -->
                    <div class="glass-card rounded-2xl p-6 floating" style="animation-delay: 0.4s;">
                        <div class="text-4xl mb-4">üìè</div>
                        <h3 class="text-2xl font-bold text-green-600 mb-4">Rumus Perbandingan Sisi:</h3>
                        <div class="bg-gradient-to-r from-yellow-300 to-orange-300 rounded-xl p-6 text-center border-3 border-orange-500">
                            <div class="text-2xl font-bold text-gray-900 mb-2">
                                <span class="text-red-800">sisi 1</span> / <span class="text-red-800">sisi 1'</span> = 
                                <span class="text-red-800">sisi 2</span> / <span class="text-red-800">sisi 2'</span> = ‚ãØ
                            </div>
                        </div>
                    </div>

                    <!-- Simbol -->
                    <div class="glass-card rounded-2xl p-6 floating" style="animation-delay: 0.6s;">
                        <div class="text-4xl mb-4">üî§</div>
                        <h3 class="text-2xl font-bold text-pink-600 mb-4">Simbol Kesebangunan:</h3>
                        <div class="bg-gradient-to-r from-pink-300 to-red-300 rounded-xl p-6 text-center border-3 border-pink-500">
                            <div class="text-3xl font-bold text-gray-900 mb-2">‚àÜABC ~ ‚àÜDEF</div>
                            <p class="text-gray-900 font-semibold">yang artinya segitiga ABC sebangun dengan segitiga DEF.</p>
                        </div>
                    </div>

                    <!-- Contoh Soal -->
                    <div class="glass-card rounded-2xl p-6 floating" style="animation-delay: 0.8s;">
                        <div class="text-4xl mb-4">üí°</div>
                        <h3 class="text-2xl font-bold text-orange-600 mb-4">Contoh Soal Singkat:</h3>
                        
                        <div class="bg-gradient-to-r from-orange-200 to-yellow-200 rounded-xl p-6 mb-4 border-3 border-orange-400">
                            <p class="text-gray-900 mb-4 font-semibold">
                                <strong class="text-orange-700">Soal:</strong><br>
                                ‚àÜPQR sebangun dengan ‚àÜXYZ. Panjang PQ = 4 cm, QR = 6 cm, dan XY = 6 cm. 
                                Tentukan panjang YZ.
                            </p>
                            
                            <div class="border-l-4 border-blue-600 pl-4">
                                <p class="text-blue-700 font-bold mb-2">Penyelesaian:</p>
                                <div class="space-y-2 text-gray-900 font-semibold">
                                    <p><span class="text-red-700">PQ/XY</span> = <span class="text-red-700">QR/YZ</span></p>
                                    <p><span class="text-red-700">4/6</span> = <span class="text-red-700">6/YZ</span></p>
                                    <p>YZ = <span class="text-red-700">(6√ó6)/4</span></p>
                                    <p class="text-green-700 font-bold text-xl">YZ = 9 cm</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="text-center mt-8">
                    <button onclick="showNameInput()" class="bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white px-12 py-4 rounded-full font-bold text-xl transition-all duration-300 transform hover:scale-105 shadow-lg">
                        Ayo Main Sekarang! üéÆ
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Game Page -->
    <div id="gamePage" class="hidden min-h-screen mobile-friendly">
        <div class="max-w-7xl mx-auto">
            <!-- Game Header -->
            <div class="glass-card rounded-3xl p-4 md:p-6 mb-6 md:mb-8 card-hover">
                <div class="flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0">
                    <div class="flex flex-col md:flex-row items-center space-y-2 md:space-y-0 md:space-x-6">
                        <div class="text-center">
                            <div class="text-2xl md:text-3xl mb-1">üéÆüåà</div>
                            <h2 class="text-xl md:text-2xl font-bold text-gray-800">ETHNOMATH QUIZ</h2>
                        </div>
                        <div class="bg-gradient-to-r from-cyan-500 to-blue-600 text-white px-3 md:px-4 py-2 rounded-full font-bold text-sm md:text-base">
                            üéØ Soal <span id="questionNumber">1</span>/5
                        </div>
                    </div>
                    <div class="flex items-center space-x-3 md:space-x-6">
                        <div class="text-center">
                            <div class="text-2xl">üë§</div>
                            <div class="text-sm md:text-lg font-bold text-cyan-300" id="playerNameDisplay">Pemain</div>
                            <div class="text-xs text-white font-bold">NAMA</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl">üèÜ</div>
                            <div class="text-xl md:text-3xl font-bold text-green-400" id="currentScore">0</div>
                            <div class="text-xs text-white font-bold">SKOR</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl">‚è∞</div>
                            <div class="text-lg md:text-2xl font-bold text-orange-400" id="timeRemaining">10:00</div>
                            <div class="text-xs text-white font-bold">WAKTU</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="grid lg:grid-cols-2 gap-4 md:gap-8">
                <!-- Basketball Animation -->
                <div class="glass-card rounded-3xl p-4 md:p-6 card-hover">
                    <div class="text-center mb-2">
                        <div class="text-2xl md:text-3xl">üèÄüéØ‚ú®</div>
                    </div>
                    <div class="basketball-court rounded-2xl p-4 md:p-8 relative h-64 md:h-96 overflow-hidden">
                        <!-- Confetti Elements -->
                        <div id="confettiContainer" class="absolute inset-0 pointer-events-none"></div>
                        
                        <!-- Basketball Ring with Pulse Effect -->
                        <div class="absolute top-8 right-12 ring">
                            <div class="pulse-ring absolute inset-0 bg-orange-400 rounded-full opacity-20"></div>
                            <svg width="100" height="80" viewBox="0 0 100 80">
                                <defs>
                                    <linearGradient id="ringGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                        <stop offset="0%" style="stop-color:#ff8c00;stop-opacity:1" />
                                        <stop offset="100%" style="stop-color:#ff4500;stop-opacity:1" />
                                    </linearGradient>
                                </defs>
                                <ellipse cx="50" cy="20" rx="40" ry="10" fill="url(#ringGradient)" stroke="#cc5500" stroke-width="3"/>
                                <rect x="47" y="20" width="6" height="35" fill="#8B4513" rx="3"/>
                                <path d="M 15 20 Q 50 35 85 20" stroke="white" stroke-width="3" fill="none"/>
                                <path d="M 20 22 Q 50 37 80 22" stroke="white" stroke-width="2" fill="none"/>
                            </svg>
                        </div>
                        
                        <!-- Basketball Player -->
                        <div id="basketballPlayer" class="absolute bottom-8 left-12 player">
                            <svg width="80" height="100" viewBox="0 0 80 100">
                                <defs>
                                    <linearGradient id="skinGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                        <stop offset="0%" style="stop-color:#FDBCB4;stop-opacity:1" />
                                        <stop offset="100%" style="stop-color:#F7A399;stop-opacity:1" />
                                    </linearGradient>
                                    <linearGradient id="shirtGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                        <stop offset="0%" style="stop-color:#4A90E2;stop-opacity:1" />
                                        <stop offset="100%" style="stop-color:#357ABD;stop-opacity:1" />
                                    </linearGradient>
                                </defs>
                                <!-- Body -->
                                <rect x="25" y="40" width="30" height="40" fill="url(#shirtGradient)" rx="8"/>
                                <!-- Head -->
                                <circle cx="40" cy="25" r="15" fill="url(#skinGradient)"/>
                                <!-- Hair -->
                                <path d="M 28 15 Q 40 8 52 15 Q 50 12 40 12 Q 30 12 28 15" fill="#4A4A4A"/>
                                <!-- Eyes -->
                                <circle cx="35" cy="22" r="2" fill="#000"/>
                                <circle cx="45" cy="22" r="2" fill="#000"/>
                                <!-- Smile -->
                                <path d="M 35 28 Q 40 32 45 28" stroke="#000" stroke-width="2" fill="none"/>
                                <!-- Arms -->
                                <rect x="12" y="45" width="12" height="25" fill="url(#skinGradient)" rx="6"/>
                                <rect x="56" y="45" width="12" height="25" fill="url(#skinGradient)" rx="6"/>
                                <!-- Legs -->
                                <rect x="28" y="80" width="10" height="20" fill="#2C3E50" rx="5"/>
                                <rect x="42" y="80" width="10" height="20" fill="#2C3E50" rx="5"/>
                                <!-- Shoes -->
                                <ellipse cx="33" cy="98" rx="8" ry="4" fill="#000"/>
                                <ellipse cx="47" cy="98" rx="8" ry="4" fill="#000"/>
                                <!-- Jersey Number -->
                                <text x="40" y="60" text-anchor="middle" fill="white" font-size="12" font-weight="bold">7</text>
                            </svg>
                        </div>
                        
                        <!-- Basketball -->
                        <div id="basketball" class="absolute bottom-28 left-28 ball">
                            <svg width="32" height="32" viewBox="0 0 32 32">
                                <defs>
                                    <radialGradient id="ballGradient" cx="30%" cy="30%">
                                        <stop offset="0%" style="stop-color:#ff8c00;stop-opacity:1" />
                                        <stop offset="100%" style="stop-color:#ff4500;stop-opacity:1" />
                                    </radialGradient>
                                </defs>
                                <circle cx="16" cy="16" r="15" fill="url(#ballGradient)" stroke="#cc5500" stroke-width="2"/>
                                <path d="M 2 16 Q 16 2 30 16" stroke="#cc5500" stroke-width="2" fill="none"/>
                                <path d="M 2 16 Q 16 30 30 16" stroke="#cc5500" stroke-width="2" fill="none"/>
                                <line x1="16" y1="1" x2="16" y2="31" stroke="#cc5500" stroke-width="2"/>
                            </svg>
                        </div>
                        
                        <!-- Score Display -->
                        <div id="scoreDisplay" class="absolute top-4 left-4 text-white font-bold text-4xl opacity-0 transition-all duration-500 score-popup">
                            +20
                        </div>
                        
                        <!-- Sparkle Effects -->
                        <div id="sparkleContainer" class="absolute inset-0 pointer-events-none"></div>
                    </div>
                </div>

                <!-- Question Panel -->
                <div class="glass-card rounded-3xl p-4 md:p-6 card-hover">
                    <div class="text-center mb-4">
                        <div class="text-2xl md:text-3xl">ü§îüí≠‚ú®</div>
                    </div>
                    <div id="questionPanel" class="min-h-64 md:h-96 flex flex-col justify-between">
                        <div>
                            <h3 class="text-xl md:text-3xl font-bold text-gray-800 mb-4 md:mb-6 text-center" id="questionTitle">ü§î Soal 1</h3>
                            <div class="glass-card rounded-2xl p-4 md:p-6 mb-4 md:mb-6">
                                <!-- Question Image -->
                                <div id="questionImageContainer" class="mb-4 text-center">
                                    <img id="questionImage" src="" alt="Gambar soal" 
                                         class="max-w-full h-auto rounded-lg mx-auto shadow-lg max-h-48 object-contain"
                                         style="display: none;"
                                         onerror="this.style.display='none'; document.getElementById('questionImageFallback').style.display='block';">
                                    <div id="questionImageFallback" class="hidden bg-gradient-to-r from-blue-500 to-purple-600 text-white p-6 rounded-lg">
                                        <div class="text-4xl mb-2">üìê</div>
                                        <p class="text-lg">Ilustrasi Soal Kesebangunan</p>
                                    </div>
                                </div>
                                <!-- Question Text -->
                                <p class="text-gray-900 leading-relaxed text-lg font-bold" id="questionText">
                                    Dua segitiga ABC dan DEF sebangun. Jika AB = 6 cm, BC = 8 cm, dan DE = 9 cm, 
                                    maka panjang EF adalah...
                                </p>
                            </div>
                        </div>
                        
                        <div class="space-y-3 md:space-y-4">
                            <button id="optionA" onclick="selectAnswer('A')" class="option-button w-full text-gray-800 p-4 md:p-6 rounded-2xl text-left font-bold text-base md:text-lg card-hover">
                                <div class="flex items-center space-x-3">
                                    <span class="text-2xl">üÖ∞Ô∏è</span>
                                    <span>12 cm</span>
                                    <span class="ml-auto text-xl">üéØ</span>
                                </div>
                            </button>
                            <button id="optionB" onclick="selectAnswer('B')" class="option-button w-full text-gray-800 p-4 md:p-6 rounded-2xl text-left font-bold text-base md:text-lg card-hover">
                                <div class="flex items-center space-x-3">
                                    <span class="text-2xl">üÖ±Ô∏è</span>
                                    <span>10 cm</span>
                                    <span class="ml-auto text-xl">üéØ</span>
                                </div>
                            </button>
                        </div>
                        
                        <div class="mt-6 text-center">
                            <div id="answerFeedback" class="text-2xl font-bold mb-4 opacity-0 transition-all duration-500"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Host Dashboard Page -->
    <div id="hostDashboard" class="hidden min-h-screen p-4">
        <div class="max-w-7xl mx-auto">
            <div class="glass-card rounded-3xl p-8 shadow-2xl">
                <div class="flex flex-col md:flex-row items-center justify-between mb-6 md:mb-8 space-y-4 md:space-y-0">
                    <div class="text-center md:text-left">
                        <h1 class="text-3xl md:text-4xl lg:text-5xl font-bold text-gray-800">üìä Host Dashboard</h1>
                        <p class="text-sm md:text-base text-gray-600 mt-2">Panel kontrol untuk guru dan host</p>
                    </div>
                    <button onclick="showHome()" class="bg-gradient-to-r from-red-400 to-pink-500 hover:from-red-500 hover:to-pink-600 text-white px-6 py-3 rounded-full font-bold transition-all duration-300 transform hover:scale-105 whitespace-nowrap">
                        ‚Üê Kembali
                    </button>
                </div>
                
                <!-- QR Code Section for Students -->
                <div class="glass-card rounded-3xl p-8 mb-8 text-center floating bg-gradient-to-br from-cyan-400/20 to-blue-400/20">
                    <h3 class="text-4xl font-bold text-gray-800 mb-6 flex items-center justify-center">
                        üì± Scan QR Code untuk Bermain
                        <span class="ml-3 text-3xl">üéÆ</span>
                    </h3>
                    
                    <!-- Large QR Code Display -->
                    <div class="flex justify-center">
                        <div class="transform hover:scale-105 transition-all duration-300">
                            <img src="https://imgur.com/jQDIHea.jpg" alt="QR Code Game Ethnomath" 
                                 class="w-96 h-96 object-contain shadow-2xl"
                                 onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                            <div class="hidden bg-gradient-to-r from-blue-500 to-purple-600 text-white p-12 rounded-2xl w-96 h-96 flex flex-col items-center justify-center shadow-2xl">
                                <div class="text-6xl mb-4">üì±</div>
                                <p class="text-2xl font-bold text-center">QR Code untuk<br>Akses Game</p>
                                <p class="text-lg mt-2 opacity-75">Ethnomath Quiz</p>
                            </div>
                        </div>
                    </div>
                    
                    <p class="text-2xl text-white font-bold mt-6 mb-2">
                        üéØ Siswa scan QR code ini untuk bermain!
                    </p>
                </div>

                <!-- Statistics Cards -->
                <div class="grid md:grid-cols-4 gap-6 mb-8">
                    <div class="glass-card rounded-2xl p-6 text-center floating">
                        <div class="text-4xl mb-2">üë•</div>
                        <div class="text-3xl font-bold text-cyan-400" id="totalPlayers">0</div>
                        <div class="text-gray-300">Total Pemain</div>
                    </div>
                    <div class="glass-card rounded-2xl p-6 text-center floating" style="animation-delay: 0.1s;">
                        <div class="text-4xl mb-2">üéÆ</div>
                        <div class="text-3xl font-bold text-green-400" id="totalGames">0</div>
                        <div class="text-gray-300">Total Game</div>
                    </div>
                    <div class="glass-card rounded-2xl p-6 text-center floating" style="animation-delay: 0.2s;">
                        <div class="text-4xl mb-2">‚≠ê</div>
                        <div class="text-3xl font-bold text-yellow-400" id="averageScore">0</div>
                        <div class="text-gray-300">Rata-rata Skor</div>
                    </div>
                    <div class="glass-card rounded-2xl p-6 text-center floating" style="animation-delay: 0.3s;">
                        <div class="text-4xl mb-2">üèÜ</div>
                        <div class="text-3xl font-bold text-purple-400" id="highestScore">0</div>
                        <div class="text-gray-300">Skor Tertinggi</div>
                    </div>
                </div>
                
                <!-- Charts Section -->
                <div class="flex justify-center mb-8">
                    <!-- Score Distribution Chart -->
                    <div class="glass-card rounded-2xl p-6 floating bg-gradient-to-br from-purple-500/20 to-pink-500/20 max-w-2xl w-full">
                        <h3 class="text-2xl font-bold text-white mb-6 flex items-center justify-center">
                            üìà Distribusi Skor Pemain
                            <span class="ml-2 text-lg">üéØ</span>
                        </h3>
                        <div class="relative h-80 bg-gradient-to-br from-gray-900/50 to-gray-800/50 rounded-xl p-4 border-2 border-purple-400/30">
                            <div id="scoreChart" class="w-full h-full rounded-lg flex items-center justify-center">
                                <!-- Custom Chart Implementation -->
                                <div id="chartContainer" class="w-full h-full">
                                    <!-- Chart will be rendered here -->
                                </div>
                            </div>
                            <div class="absolute top-2 right-2 text-xs text-gray-300 bg-black/50 px-2 py-1 rounded">
                                üìä Live Data
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Additional Stats Cards -->
                <div class="grid md:grid-cols-3 gap-6 mb-8">
                    <div class="glass-card rounded-2xl p-6 text-center floating bg-gradient-to-br from-green-400/20 to-emerald-400/20" style="animation-delay: 0.4s;">
                        <div class="text-4xl mb-2">üéØ</div>
                        <div class="text-2xl font-bold text-green-400" id="accuracyRate">0%</div>
                        <div class="text-gray-300">Tingkat Akurasi</div>
                        <div class="text-xs text-gray-400 mt-1">Rata-rata jawaban benar</div>
                    </div>
                    <div class="glass-card rounded-2xl p-6 text-center floating bg-gradient-to-br from-orange-400/20 to-red-400/20" style="animation-delay: 0.5s;">
                        <div class="text-4xl mb-2">‚ö°</div>
                        <div class="text-2xl font-bold text-orange-400" id="activeToday">0</div>
                        <div class="text-gray-300">Aktif Hari Ini</div>
                        <div class="text-xs text-gray-400 mt-1">Pemain yang bermain hari ini</div>
                    </div>
                    <div class="glass-card rounded-2xl p-6 text-center floating bg-gradient-to-br from-pink-400/20 to-purple-400/20" style="animation-delay: 0.6s;">
                        <div class="text-4xl mb-2">üî•</div>
                        <div class="text-2xl font-bold text-pink-400" id="streakRecord">0</div>
                        <div class="text-gray-300">Rekor Beruntun</div>
                        <div class="text-xs text-gray-400 mt-1">Jawaban benar berturut-turut</div>
                    </div>
                </div>
                
                <!-- Player Leaderboard -->
                <div class="glass-card rounded-2xl p-6">
                    <h3 class="text-2xl font-bold text-white mb-6 flex items-center">
                        üèÖ Papan Peringkat Pemain
                    </h3>
                    <div class="overflow-x-auto">
                        <table class="w-full text-white">
                            <thead>
                                <tr class="border-b border-white/20">
                                    <th class="text-left py-3 px-4">Peringkat</th>
                                    <th class="text-left py-3 px-4">Nama Pemain</th>
                                    <th class="text-left py-3 px-4">Skor Tertinggi</th>
                                    <th class="text-left py-3 px-4">Total Game</th>
                                    <th class="text-left py-3 px-4">Rata-rata</th>
                                    <th class="text-left py-3 px-4">Terakhir Main</th>
                                </tr>
                            </thead>
                            <tbody id="leaderboardTable">
                                <!-- Data will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- Control Buttons -->
                <div class="flex flex-wrap justify-center gap-4 mt-8">
                    <button id="exportBtn" class="bg-gradient-to-r from-blue-500 to-cyan-500 hover:from-blue-600 hover:to-cyan-600 text-white px-8 py-3 rounded-full font-bold transition-all duration-300 transform hover:scale-105">
                        üì• Export Data
                    </button>
                    <button id="clearBtn" class="bg-gradient-to-r from-red-500 to-pink-500 hover:from-red-600 hover:to-pink-600 text-white px-8 py-3 rounded-full font-bold transition-all duration-300 transform hover:scale-105">
                        üóëÔ∏è Hapus Papan Peringkat
                    </button>
                    <button id="refreshBtn" class="bg-gradient-to-r from-green-500 to-teal-500 hover:from-green-600 hover:to-teal-600 text-white px-8 py-3 rounded-full font-bold transition-all duration-300 transform hover:scale-105">
                        üîÑ Refresh
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Results Page -->
    <div id="resultsPage" class="hidden min-h-screen flex items-center justify-center mobile-friendly">
        <div class="max-w-2xl mx-auto w-full">
            <div class="glass-card rounded-3xl p-4 md:p-8 shadow-2xl text-center bounce-in card-hover bg-gradient-to-br from-yellow-400/20 via-pink-400/20 to-purple-400/20">
                <!-- Celebration Header -->
                <div class="mb-6">
                    <div class="text-4xl md:text-6xl mb-2">üéâüéäüåü</div>
                    <div id="resultIcon" class="text-6xl md:text-9xl mb-4">üèÜ</div>
                    <div class="text-4xl md:text-6xl mb-2">‚ú®üéàüéÅ</div>
                </div>
                
                <h1 class="text-3xl md:text-5xl font-bold text-gray-800 mb-4" id="resultTitle">LUAR BIASA!</h1>
                <p class="text-xl md:text-3xl font-bold text-cyan-300 mb-4" id="resultPlayerName">Pemain</p>
                <p class="text-lg md:text-2xl text-gray-200 mb-6 md:mb-8" id="resultMessage">Kamu telah menyelesaikan quiz!</p>
                
                <div class="glass-card rounded-2xl p-4 md:p-8 mb-6 md:mb-8 bg-gradient-to-r from-green-400/20 to-blue-400/20">
                    <div class="grid grid-cols-2 gap-4 md:gap-8 text-center">
                        <div class="card-hover p-4 rounded-xl bg-gradient-to-br from-green-400/30 to-emerald-400/30">
                            <div class="text-3xl mb-2">üèÜ</div>
                            <div class="text-3xl md:text-5xl font-bold text-green-400 mb-2" id="finalScore">0</div>
                            <div class="text-gray-300 text-sm md:text-lg">Skor Akhir</div>
                            <div class="text-2xl mt-1">‚≠ê</div>
                        </div>
                        <div class="card-hover p-4 rounded-xl bg-gradient-to-br from-blue-400/30 to-cyan-400/30">
                            <div class="text-3xl mb-2">‚úÖ</div>
                            <div class="text-3xl md:text-5xl font-bold text-blue-400 mb-2" id="correctAnswers">0</div>
                            <div class="text-gray-300 text-sm md:text-lg">Jawaban Benar</div>
                            <div class="text-2xl mt-1">üéØ</div>
                        </div>
                    </div>
                </div>
                
                <div class="space-y-4">
                    <button onclick="restartGame()" class="w-full bg-gradient-to-r from-green-400 via-teal-500 to-blue-500 hover:from-green-500 hover:via-teal-600 hover:to-blue-600 text-white button-responsive rounded-full font-bold transition-all duration-300 transform hover:scale-105 shadow-lg cursor-pointer">
                        üîÑ Main Lagi Yuk! üéÆ
                    </button>
                    <button onclick="showHome()" class="w-full bg-gradient-to-r from-purple-500 via-pink-500 to-red-500 hover:from-purple-600 hover:via-pink-600 hover:to-red-600 text-white button-responsive rounded-full font-bold transition-all duration-300 transform hover:scale-105 shadow-lg cursor-pointer">
                        üè† Kembali ke Beranda üåà
                    </button>
                </div>
                
                <!-- Fun Footer -->
                <div class="mt-6 text-center">
                    <div class="text-sm md:text-base text-gray-300 mb-2">
                        üåü Terima kasih sudah bermain! üåü
                    </div>
                    <div class="flex justify-center space-x-2 text-2xl">
                        <span class="animate-bounce">üéâ</span>
                        <span class="animate-bounce" style="animation-delay: 0.1s;">üéä</span>
                        <span class="animate-bounce" style="animation-delay: 0.2s;">üéà</span>
                        <span class="animate-bounce" style="animation-delay: 0.3s;">üéÅ</span>
                        <span class="animate-bounce" style="animation-delay: 0.4s;">üåà</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Music Control Button -->
    <button id="musicToggle" onclick="toggleMusic()" class="fixed bottom-4 right-4 z-50 bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white p-3 rounded-full shadow-lg transition-all duration-300 transform hover:scale-110 group">
        <svg id="musicIcon" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 14.142M9 9v6l4-2V7l-4 2z"></path>
        </svg>
        <div class="absolute bottom-full left-0 mb-2 px-3 py-1 bg-gray-800 text-white text-sm rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300 whitespace-nowrap">
            <span id="musicTooltip">Matikan Musik</span>
        </div>
    </button>

    <script>
        // Global Game State - accessible from HTML onclick handlers
        window.gameState = {
            currentPlayer: '',
            currentQuestion: 0,
            score: 0,
            correctAnswers: 0,
            timeRemaining: 600,
            gameTimer: null,
            isGameActive: false,
            selectedAnswer: null,
            answerSubmitted: false,
            backgroundMusic: null,
            isMusicPlaying: true
        };

        // Question Pool - Ethnomath questions about Malay traditional architecture
        const questionPool = [
            {
                question: "Pada kain corak insang di atas, apakah segitiga yang diberikan garis merah dan garis hitam merupakan segitiga yang sebangun?",
                image: "https://imgur.com/IBtGqrB.jpg",
                optionA: "Ya",
                optionB: "Tidak",
                correct: "A",
                explanation: "Ya, kedua segitiga memiliki bentuk yang sama dengan sudut-sudut yang bersesuaian sama besar, sehingga mereka sebangun."
            },
            {
                question: "Gambar di atas merupakan rumah adat Melayu Pontianak. Rumah adat tersebut memiliki atap yang membentuk segitiga. Terdapat segitiga yang diberikan garis merah dan garis kuning. Apakah dua segitiga tersebut merupakan segitiga yang sebangun?",
                image: "https://imgur.com/VRaSKCa.jpg",
                optionA: "Ya",
                optionB: "Tidak",
                correct: "A",
                explanation: "Ya, kedua segitiga pada atap rumah adat Melayu memiliki bentuk yang sama dan sudut-sudut yang bersesuaian sama besar."
            },
            {
                question: "Atap rumah adat Melayu di atas berbentuk segitiga sama kaki. Di bawah atap utama, terdapat segitiga hiasan yang bentuknya sebangun dengan segitiga atap besar. Diketahui: Lebar alas atap besar = 8 m, tinggi atap besar = 4,5 m, Lebar alas segitiga hiasan = 3,2 m. Berapa tinggi segitiga hiasan tersebut?",
                image: "https://imgur.com/yvEt1l9.jpg",
                optionA: "1,8 m",
                optionB: "1,9 m",
                correct: "A",
                explanation: "Karena sebangun, perbandingan sisi-sisi sama. 8/3,2 = 4,5/tinggi hiasan, maka tinggi hiasan = 4,5 √ó 3,2/8 = 1,8 m."
            },
            {
                question: "Pintu rumah adat Melayu di atas terdiri dari pintu besar dan pola panel persegi panjang di dalamnya. Panel-panel tersebut sebangun dengan bentuk pintu secara keseluruhan. Diketahui: Tinggi pintu utama = 210 cm, lebar pintu utama = 90 cm, Panel di dalam pintu memiliki lebar 30 cm. Berapa tinggi panel tersebut?",
                image: "https://imgur.com/Mn8WKlU.jpg",
                optionA: "74 cm",
                optionB: "70 cm",
                correct: "B",
                explanation: "Karena sebangun, perbandingan sisi-sisi sama. 90/30 = 210/tinggi panel, maka tinggi panel = 210 √ó 30/90 = 70 cm."
            },
            {
                question: "Perhatikan gambar berikut. Pagar rumah adat Melayu di atas memiliki pola belah ketupat yang berwarna hitam dan hijau. Belah ketupat yang berwarna hitam sebangun dengan belah ketupat yang berwarna hijau. Diketahui: Panjang diagonal horizontal belah ketupat hitam = 20 cm, Panjang diagonal vertikal belah ketupat hitam = 24 cm, Panjang diagonal horizontal belah ketupat hijau = 15 cm. Berapa panjang diagonal vertikal belah ketupat hijau?",
                image: "https://imgur.com/7ZVdWRu.jpg",
                optionA: "19 cm",
                optionB: "18 cm",
                correct: "B",
                explanation: "Karena sebangun, perbandingan diagonal sama. 20/15 = 24/diagonal vertikal hijau, maka diagonal vertikal hijau = 24 √ó 15/20 = 18 cm."
            }
        ];

        // Navigation Functions - declared globally for HTML onclick access
        window.showHome = function() {
            hideAllPages();
            document.getElementById('homePage').classList.remove('hidden');
            document.getElementById('hostButton').style.display = 'block';
        };

        window.showMaterial = function() {
            playSound('click');
            hideAllPages();
            document.getElementById('materialPage').classList.remove('hidden');
            document.getElementById('hostButton').style.display = 'none';
        };

        window.showNameInput = function() {
            playSound('click');
            document.getElementById('nameInputModal').classList.remove('hidden');
            document.getElementById('playerName').focus();
        };

        window.hideNameInput = function() {
            document.getElementById('nameInputModal').classList.add('hidden');
        };

        window.showHostLogin = function() {
            document.getElementById('hostLoginModal').classList.remove('hidden');
            document.getElementById('hostPassword').focus();
        };

        window.hideHostLogin = function() {
            document.getElementById('hostLoginModal').classList.add('hidden');
            document.getElementById('hostPassword').value = '';
        };

        window.verifyHostPassword = function() {
            const password = document.getElementById('hostPassword').value;
            if (password === 'admin123') {
                hideHostLogin();
                showHostDashboard();
            } else {
                alert('Password salah! Coba lagi.');
                document.getElementById('hostPassword').value = '';
                document.getElementById('hostPassword').focus();
            }
        };

        window.showHostDashboard = function() {
            hideAllPages();
            document.getElementById('hostDashboard').classList.remove('hidden');
            document.getElementById('hostButton').style.display = 'none';
            updateHostDashboard();
        };

        window.startGameWithName = function() {
            const playerName = document.getElementById('playerName').value.trim();
            if (playerName === '') {
                alert('Masukkan nama kamu dulu ya! üòä');
                document.getElementById('playerName').focus();
                return;
            }
            
            gameState.currentPlayer = playerName;
            hideNameInput();
            startGame();
        };

        window.selectAnswer = function(answer) {
            if (gameState.answerSubmitted) return;
            
            gameState.selectedAnswer = answer;
            gameState.answerSubmitted = true;
            
            const question = questionPool[gameState.currentQuestion];
            const isCorrect = answer === question.correct;
            
            // Disable all buttons
            document.getElementById('optionA').disabled = true;
            document.getElementById('optionB').disabled = true;
            
            // Show correct/incorrect styling
            const selectedButton = document.getElementById(`option${answer}`);
            const correctButton = document.getElementById(`option${question.correct}`);
            const feedback = document.getElementById('answerFeedback');
            
            if (isCorrect) {
                selectedButton.classList.add('correct-answer');
                gameState.score += 20;
                gameState.correctAnswers++;
                
                feedback.textContent = 'üéâ Benar! Hebat!';
                feedback.style.color = '#00FF00';
                
                // Play success sound effects
                playSound('correct');
                setTimeout(() => playSound('celebration'), 300);
                
                animateBasketballSuccess();
            } else {
                selectedButton.classList.add('wrong-answer');
                correctButton.classList.add('correct-answer');
                
                feedback.textContent = '‚ùå Salah! Coba lagi ya!';
                feedback.style.color = '#FF1493';
                
                // Play error sound effect
                playSound('wrong');
                
                animateBasketballMiss();
            }
            
            // Update score display
            document.getElementById('currentScore').textContent = gameState.score;
            feedback.style.opacity = '1';
            
            // Auto proceed to next question after 1.5 seconds
            setTimeout(() => {
                nextQuestion();
            }, 1500);
        };

        window.restartGame = function() {
            showNameInput();
        };

        window.toggleMusic = function() {
            if (gameState.backgroundMusic) {
                if (gameState.isMusicPlaying) {
                    gameState.backgroundMusic.pause();
                    gameState.isMusicPlaying = false;
                    document.getElementById('musicIcon').innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z" clip-rule="evenodd"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2"></path>';
                    document.getElementById('musicTooltip').textContent = 'Nyalakan Musik';
                } else {
                    gameState.backgroundMusic.play().catch(e => console.log('Music play error:', e));
                    gameState.isMusicPlaying = true;
                    document.getElementById('musicIcon').innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 14.142M9 9v6l4-2V7l-4 2z"></path>';
                    document.getElementById('musicTooltip').textContent = 'Matikan Musik';
                }
            }
        };

        // Helper Functions
        function hideAllPages() {
            const pages = ['homePage', 'materialPage', 'gamePage', 'hostDashboard', 'resultsPage'];
            pages.forEach(pageId => {
                document.getElementById(pageId).classList.add('hidden');
            });
        }

        // Music and Sound Functions
        function initializeMusic() {
            try {
                // Initialize background music with Joget Melayu from Google Drive
                // Note: Replace this ID with your actual Google Drive file ID for Joget Melayu music
                gameState.backgroundMusic = new Audio('https://drive.google.com/uc?export=download&id=1zbxpFgdT9u_cB4N3p13II-bQKoScc3Bh');
                gameState.backgroundMusic.loop = true;
                gameState.backgroundMusic.volume = 0.3;
                
                // Try to play music (will be blocked by browser policy until user interaction)
                gameState.backgroundMusic.addEventListener('canplaythrough', () => {
                    console.log('Background music loaded successfully');
                });
                
                gameState.backgroundMusic.addEventListener('error', (e) => {
                    console.log('Background music error:', e);
                    // Fallback: create a simple melody using Web Audio API
                    createFallbackMusic();
                });
                
            } catch (error) {
                console.log('Music initialization error:', error);
                createFallbackMusic();
            }
        }

        function createFallbackMusic() {
            // Create a simple traditional melody using Web Audio API as fallback
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                let isPlaying = false;
                
                function playMelody() {
                    if (isPlaying || !gameState.isMusicPlaying) return;
                    isPlaying = true;
                    
                    // Traditional Malay-inspired melody notes (frequencies)
                    const melody = [
                        { freq: 523.25, duration: 0.5 }, // C5
                        { freq: 587.33, duration: 0.5 }, // D5
                        { freq: 659.25, duration: 0.5 }, // E5
                        { freq: 698.46, duration: 0.5 }, // F5
                        { freq: 783.99, duration: 0.5 }, // G5
                        { freq: 659.25, duration: 0.5 }, // E5
                        { freq: 587.33, duration: 0.5 }, // D5
                        { freq: 523.25, duration: 1.0 }  // C5
                    ];
                    
                    let currentTime = audioContext.currentTime;
                    
                    melody.forEach((note, index) => {
                        const oscillator = audioContext.createOscillator();
                        const gainNode = audioContext.createGain();
                        
                        oscillator.connect(gainNode);
                        gainNode.connect(audioContext.destination);
                        
                        oscillator.frequency.setValueAtTime(note.freq, currentTime);
                        oscillator.type = 'sine';
                        
                        gainNode.gain.setValueAtTime(0, currentTime);
                        gainNode.gain.linearRampToValueAtTime(0.1, currentTime + 0.1);
                        gainNode.gain.exponentialRampToValueAtTime(0.01, currentTime + note.duration);
                        
                        oscillator.start(currentTime);
                        oscillator.stop(currentTime + note.duration);
                        
                        currentTime += note.duration;
                    });
                    
                    setTimeout(() => {
                        isPlaying = false;
                        if (gameState.isMusicPlaying) {
                            setTimeout(playMelody, 2000); // Repeat after 2 seconds
                        }
                    }, currentTime * 1000);
                }
                
                // Override the background music object with fallback
                gameState.backgroundMusic = {
                    play: () => {
                        gameState.isMusicPlaying = true;
                        playMelody();
                        return Promise.resolve();
                    },
                    pause: () => {
                        gameState.isMusicPlaying = false;
                    },
                    volume: 0.3
                };
                
            } catch (error) {
                console.log('Fallback music creation error:', error);
            }
        }

        function playSound(type) {
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                
                switch (type) {
                    case 'correct':
                        // Success sound - ascending notes
                        playTone(audioContext, 523.25, 0.2); // C5
                        setTimeout(() => playTone(audioContext, 659.25, 0.2), 100); // E5
                        setTimeout(() => playTone(audioContext, 783.99, 0.3), 200); // G5
                        break;
                        
                    case 'wrong':
                        // Error sound - descending notes
                        playTone(audioContext, 392.00, 0.3); // G4
                        setTimeout(() => playTone(audioContext, 329.63, 0.4), 150); // E4
                        break;
                        
                    case 'click':
                        // Button click sound
                        playTone(audioContext, 800, 0.1);
                        break;
                        
                    case 'swoosh':
                        // Basketball swoosh sound
                        createSwooshSound(audioContext);
                        break;
                        
                    case 'bounce':
                        // Ball bounce sound
                        playTone(audioContext, 200, 0.2);
                        break;
                        
                    case 'celebration':
                        // Celebration fanfare
                        const celebrationNotes = [523.25, 659.25, 783.99, 1046.50]; // C5, E5, G5, C6
                        celebrationNotes.forEach((freq, index) => {
                            setTimeout(() => playTone(audioContext, freq, 0.3), index * 100);
                        });
                        break;
                }
            } catch (error) {
                console.log('Sound effect error:', error);
            }
        }

        function playTone(audioContext, frequency, duration) {
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.setValueAtTime(frequency, audioContext.currentTime);
            oscillator.type = 'sine';
            
            gainNode.gain.setValueAtTime(0, audioContext.currentTime);
            gainNode.gain.linearRampToValueAtTime(0.2, audioContext.currentTime + 0.01);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + duration);
        }

        function createSwooshSound(audioContext) {
            // Create a swoosh sound using white noise and filtering
            const bufferSize = audioContext.sampleRate * 0.5; // 0.5 seconds
            const buffer = audioContext.createBuffer(1, bufferSize, audioContext.sampleRate);
            const output = buffer.getChannelData(0);
            
            // Generate white noise
            for (let i = 0; i < bufferSize; i++) {
                output[i] = Math.random() * 2 - 1;
            }
            
            const whiteNoise = audioContext.createBufferSource();
            whiteNoise.buffer = buffer;
            
            const filter = audioContext.createBiquadFilter();
            filter.type = 'highpass';
            filter.frequency.setValueAtTime(1000, audioContext.currentTime);
            filter.frequency.exponentialRampToValueAtTime(100, audioContext.currentTime + 0.5);
            
            const gainNode = audioContext.createGain();
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
            
            whiteNoise.connect(filter);
            filter.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            whiteNoise.start(audioContext.currentTime);
            whiteNoise.stop(audioContext.currentTime + 0.5);
        }

        function startBackgroundMusic() {
            if (gameState.backgroundMusic && gameState.isMusicPlaying) {
                gameState.backgroundMusic.play().catch(e => {
                    console.log('Background music play error:', e);
                });
            }
        }

        function startGame() {
            hideAllPages();
            document.getElementById('gamePage').classList.remove('hidden');
            document.getElementById('hostButton').style.display = 'none';
            
            // Reset game state
            gameState.currentQuestion = 0;
            gameState.score = 0;
            gameState.correctAnswers = 0;
            gameState.timeRemaining = 600;
            gameState.isGameActive = true;
            gameState.selectedAnswer = null;
            gameState.answerSubmitted = false;
            
            // Update display
            document.getElementById('playerNameDisplay').textContent = gameState.currentPlayer;
            document.getElementById('currentScore').textContent = gameState.score;
            
            // Start background music
            startBackgroundMusic();
            
            // Start timer
            startGameTimer();
            
            // Load first question
            loadQuestion();
        }

        function startGameTimer() {
            if (gameState.gameTimer) {
                clearInterval(gameState.gameTimer);
            }
            
            gameState.gameTimer = setInterval(() => {
                gameState.timeRemaining--;
                updateTimerDisplay();
                
                if (gameState.timeRemaining <= 0) {
                    endGame();
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(gameState.timeRemaining / 60);
            const seconds = gameState.timeRemaining % 60;
            document.getElementById('timeRemaining').textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
        }

        function loadQuestion() {
            if (gameState.currentQuestion >= questionPool.length) {
                endGame();
                return;
            }
            
            const question = questionPool[gameState.currentQuestion];
            
            // Update question display
            document.getElementById('questionNumber').textContent = gameState.currentQuestion + 1;
            document.getElementById('questionTitle').textContent = `ü§î Soal ${gameState.currentQuestion + 1}`;
            document.getElementById('questionText').textContent = question.question;
            
            // Update question image
            const questionImage = document.getElementById('questionImage');
            const questionImageFallback = document.getElementById('questionImageFallback');
            
            if (question.image) {
                questionImage.src = question.image;
                questionImage.style.display = 'block';
                questionImageFallback.style.display = 'none';
            } else {
                questionImage.style.display = 'none';
                questionImageFallback.style.display = 'block';
            }
            
            // Update options
            document.getElementById('optionA').querySelector('span:nth-child(2)').textContent = question.optionA;
            document.getElementById('optionB').querySelector('span:nth-child(2)').textContent = question.optionB;
            
            // Reset button states
            resetAnswerButtons();
            
            // Reset answer state
            gameState.selectedAnswer = null;
            gameState.answerSubmitted = false;
        }

        function resetAnswerButtons() {
            const buttons = ['optionA', 'optionB'];
            buttons.forEach(buttonId => {
                const button = document.getElementById(buttonId);
                button.classList.remove('correct-answer', 'wrong-answer');
                button.disabled = false;
            });
            
            document.getElementById('answerFeedback').style.opacity = '0';
        }

        function nextQuestion() {
            gameState.currentQuestion++;
            
            if (gameState.currentQuestion >= questionPool.length) {
                endGame();
            } else {
                loadQuestion();
            }
        }

        function endGame() {
            gameState.isGameActive = false;
            
            if (gameState.gameTimer) {
                clearInterval(gameState.gameTimer);
                gameState.gameTimer = null;
            }
            
            // Save game data
            saveGameData();
            
            // Show results
            showResults();
        }

        function showResults() {
            hideAllPages();
            document.getElementById('resultsPage').classList.remove('hidden');
            
            // Calculate performance
            const percentage = (gameState.correctAnswers / questionPool.length) * 100;
            let resultTitle, resultIcon, resultMessage;
            
            if (percentage >= 80) {
                resultTitle = "LUAR BIASA! üåü";
                resultIcon = "üèÜ";
                resultMessage = "Kamu adalah master kesebangunan!";
            } else if (percentage >= 60) {
                resultTitle = "BAGUS SEKALI! üëè";
                resultIcon = "ü•à";
                resultMessage = "Pemahaman kamu sudah bagus!";
            } else if (percentage >= 40) {
                resultTitle = "TERUS BELAJAR! üí™";
                resultIcon = "ü•â";
                resultMessage = "Kamu bisa lebih baik lagi!";
            } else {
                resultTitle = "JANGAN MENYERAH! üåà";
                resultIcon = "üìö";
                resultMessage = "Ayo belajar lagi dan coba lagi!";
            }
            
            // Update result display
            document.getElementById('resultTitle').textContent = resultTitle;
            document.getElementById('resultIcon').textContent = resultIcon;
            document.getElementById('resultPlayerName').textContent = gameState.currentPlayer;
            document.getElementById('resultMessage').textContent = resultMessage;
            document.getElementById('finalScore').textContent = gameState.score;
            document.getElementById('correctAnswers').textContent = `${gameState.correctAnswers}/${questionPool.length}`;
        }

        // Enhanced Basketball Animation Functions
        function animateBasketballSuccess() {
            const player = document.getElementById('basketballPlayer');
            const ball = document.getElementById('basketball');
            const scoreDisplay = document.getElementById('scoreDisplay');
            const court = document.querySelector('.basketball-court');
            
            // Create sound effect text and play swoosh sound
            createSoundEffect('SWOOSH! üéØ', 'success');
            playSound('swoosh');
            
            // Enhanced success animation sequence
            // Phase 1: Player jumps and shoots
            player.style.transition = 'all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94)';
            player.style.transform = 'translateY(-25px) scale(1.15) rotate(-5deg)';
            
            // Phase 2: Ball flies to basket with arc
            setTimeout(() => {
                ball.style.transition = 'all 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94)';
                ball.style.transform = 'translate(180px, -120px) scale(0.7) rotate(720deg)';
                ball.style.filter = 'drop-shadow(0 8px 16px rgba(255,140,0,0.6))';
            }, 200);
            
            // Phase 3: Ball goes through hoop
            setTimeout(() => {
                ball.style.transition = 'all 0.4s ease-in';
                ball.style.transform = 'translate(180px, -80px) scale(0.6) rotate(900deg)';
                
                // Score display with enhanced animation
                if (scoreDisplay) {
                    scoreDisplay.textContent = '+20 üèÄ';
                    scoreDisplay.style.opacity = '1';
                    scoreDisplay.style.transform = 'scale(2) translateY(-20px)';
                    scoreDisplay.style.color = '#00FF00';
                    scoreDisplay.style.textShadow = '0 0 20px #00FF00';
                    scoreDisplay.style.animation = 'scorePopup 1s ease-out';
                }
                
                // Create multiple confetti bursts
                createEnhancedConfetti();
                createFireworks();
                
                // Court celebration effect
                court.style.background = 'linear-gradient(135deg, rgba(0,255,0,0.3), rgba(255,255,255,0.2), rgba(0,255,0,0.3))';
                
            }, 1000);
            
            // Phase 4: Player celebrates
            setTimeout(() => {
                player.style.transform = 'translateY(-15px) scale(1.2) rotate(10deg)';
                player.style.filter = 'drop-shadow(0 12px 24px rgba(0,255,0,0.4))';
                
                // Add celebration text
                createCelebrationText('HEBAT! üåü');
                
            }, 1400);
            
            // Reset after full animation
            setTimeout(() => {
                resetBasketballAnimation(player, ball, scoreDisplay, court);
            }, 2500);
        }

        function animateBasketballMiss() {
            const player = document.getElementById('basketballPlayer');
            const ball = document.getElementById('basketball');
            const court = document.querySelector('.basketball-court');
            
            // Create sound effect text and play bounce sound
            createSoundEffect('MISS! üòÖ', 'miss');
            playSound('bounce');
            
            // Enhanced miss animation sequence
            // Phase 1: Player attempts shot with less confidence
            player.style.transition = 'all 0.5s ease-out';
            player.style.transform = 'translateY(-15px) scale(1.05) rotate(-3deg)';
            player.style.filter = 'drop-shadow(0 6px 12px rgba(255,0,0,0.3))';
            
            // Phase 2: Ball flies but misses the basket
            setTimeout(() => {
                ball.style.transition = 'all 1s cubic-bezier(0.55, 0.085, 0.68, 0.53)';
                ball.style.transform = 'translate(220px, -60px) scale(0.8) rotate(450deg)';
                ball.style.filter = 'drop-shadow(0 4px 8px rgba(255,0,0,0.4))';
            }, 200);
            
            // Phase 3: Ball bounces off rim/backboard
            setTimeout(() => {
                ball.style.transition = 'all 0.6s ease-out';
                ball.style.transform = 'translate(160px, -20px) scale(0.9) rotate(630deg)';
                
                // Court disappointment effect
                court.style.background = 'linear-gradient(135deg, rgba(255,0,0,0.2), rgba(255,255,255,0.15), rgba(255,0,0,0.2))';
                
                // Add miss effect text
                createMissEffect('Coba Lagi! üí™');
                
            }, 900);
            
            // Phase 4: Ball falls down
            setTimeout(() => {
                ball.style.transition = 'all 0.8s ease-in';
                ball.style.transform = 'translate(140px, 20px) scale(1) rotate(720deg)';
                
                // Player shows disappointment then encouragement
                player.style.transform = 'translateY(-5px) scale(0.95) rotate(2deg)';
                
            }, 1300);
            
            // Reset after animation
            setTimeout(() => {
                resetBasketballAnimation(player, ball, null, court);
            }, 2200);
        }

        function resetBasketballAnimation(player, ball, scoreDisplay, court) {
            // Reset all elements to original state
            player.style.transition = 'all 0.5s ease-out';
            player.style.transform = '';
            player.style.filter = '';
            
            ball.style.transition = 'all 0.5s ease-out';
            ball.style.transform = '';
            ball.style.filter = '';
            
            if (scoreDisplay) {
                scoreDisplay.style.opacity = '0';
                scoreDisplay.style.transform = '';
                scoreDisplay.style.animation = '';
                scoreDisplay.style.textShadow = '';
            }
            
            // Reset court background
            setTimeout(() => {
                court.style.background = '';
            }, 500);
        }

        function createSoundEffect(text, type) {
            const court = document.querySelector('.basketball-court');
            const soundEffect = document.createElement('div');
            soundEffect.textContent = text;
            soundEffect.style.cssText = `
                position: absolute;
                top: 20px;
                right: 20px;
                font-size: 2rem;
                font-weight: bold;
                color: ${type === 'success' ? '#00FF00' : '#FF4444'};
                text-shadow: 0 0 10px ${type === 'success' ? '#00FF00' : '#FF4444'};
                animation: ${type === 'success' ? 'celebrationTextFloat' : 'missEffectFloat'} 2s ease-out forwards;
                z-index: 10;
                pointer-events: none;
            `;
            court.appendChild(soundEffect);
            
            setTimeout(() => {
                if (soundEffect.parentNode) {
                    soundEffect.remove();
                }
            }, 2000);
        }

        function createCelebrationText(text) {
            const court = document.querySelector('.basketball-court');
            const celebText = document.createElement('div');
            celebText.textContent = text;
            celebText.style.cssText = `
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                font-size: 3rem;
                font-weight: bold;
                color: #FFD700;
                text-shadow: 0 0 20px #FFD700;
                animation: celebrationTextFloat 2s ease-out forwards;
                z-index: 15;
                pointer-events: none;
            `;
            court.appendChild(celebText);
            
            setTimeout(() => {
                if (celebText.parentNode) {
                    celebText.remove();
                }
            }, 2000);
        }

        function createMissEffect(text) {
            const court = document.querySelector('.basketball-court');
            const missText = document.createElement('div');
            missText.textContent = text;
            missText.style.cssText = `
                position: absolute;
                top: 60%;
                left: 50%;
                transform: translate(-50%, -50%);
                font-size: 2rem;
                font-weight: bold;
                color: #FF6B6B;
                text-shadow: 0 0 15px #FF6B6B;
                animation: missEffectFloat 2s ease-out forwards;
                z-index: 15;
                pointer-events: none;
            `;
            court.appendChild(missText);
            
            setTimeout(() => {
                if (missText.parentNode) {
                    missText.remove();
                }
            }, 2000);
        }

        function createEnhancedConfetti() {
            const container = document.getElementById('confettiContainer');
            if (!container) return;
            
            const colors = ['#FFD700', '#FF6B6B', '#4ECDC4', '#45B7D1', '#96CEB4', '#FFEAA7', '#DDA0DD', '#98FB98'];
            const shapes = ['üéâ', 'üéä', '‚≠ê', '‚ú®', 'üåü', 'üí´', 'üéà', 'üéÅ'];
            
            // Create multiple waves of confetti
            for (let wave = 0; wave < 3; wave++) {
                setTimeout(() => {
                    for (let i = 0; i < 15; i++) {
                        const isEmoji = Math.random() > 0.6;
                        const confetti = document.createElement('div');
                        
                        if (isEmoji) {
                            confetti.textContent = shapes[Math.floor(Math.random() * shapes.length)];
                            confetti.style.fontSize = '1.5rem';
                        } else {
                            confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                            confetti.style.width = Math.random() * 12 + 8 + 'px';
                            confetti.style.height = Math.random() * 12 + 8 + 'px';
                        }
                        
                        confetti.style.position = 'absolute';
                        confetti.style.left = Math.random() * 100 + '%';
                        confetti.style.top = Math.random() * 30 + '%';
                        confetti.style.animation = `confetti ${2 + Math.random() * 2}s ease-out forwards`;
                        confetti.style.animationDelay = Math.random() * 0.5 + 's';
                        container.appendChild(confetti);
                        
                        setTimeout(() => {
                            if (confetti.parentNode) {
                                confetti.remove();
                            }
                        }, 4000);
                    }
                }, wave * 300);
            }
        }

        function createFireworks() {
            const court = document.querySelector('.basketball-court');
            const fireworkPositions = [
                { x: '20%', y: '30%' },
                { x: '80%', y: '25%' },
                { x: '50%', y: '20%' },
                { x: '30%', y: '40%' },
                { x: '70%', y: '35%' }
            ];
            
            fireworkPositions.forEach((pos, index) => {
                setTimeout(() => {
                    const firework = document.createElement('div');
                    firework.style.cssText = `
                        position: absolute;
                        left: ${pos.x};
                        top: ${pos.y};
                        width: 4px;
                        height: 4px;
                        background: radial-gradient(circle, #FFD700, #FF6B6B, #4ECDC4);
                        border-radius: 50%;
                        animation: fireworkExplode 1.5s ease-out forwards;
                        z-index: 12;
                    `;
                    court.appendChild(firework);
                    
                    // Create sparkles around firework
                    for (let i = 0; i < 8; i++) {
                        const sparkle = document.createElement('div');
                        sparkle.textContent = '‚ú®';
                        sparkle.style.cssText = `
                            position: absolute;
                            left: ${pos.x};
                            top: ${pos.y};
                            font-size: 1rem;
                            animation: sparkle 1s ease-out infinite;
                            animation-delay: ${i * 0.1}s;
                            z-index: 11;
                        `;
                        court.appendChild(sparkle);
                        
                        setTimeout(() => {
                            if (sparkle.parentNode) {
                                sparkle.remove();
                            }
                        }, 1500);
                    }
                    
                    setTimeout(() => {
                        if (firework.parentNode) {
                            firework.remove();
                        }
                    }, 1500);
                }, index * 200);
            });
        }



        // Data Management Functions
        function loadGameData() {
            try {
                const data = localStorage.getItem('ethnomath_game_data');
                if (data) {
                    return JSON.parse(data);
                }
            } catch (error) {
                console.log('Error loading data:', error);
            }
            return {
                players: {},
                games: [],
                dailyStats: {}
            };
        }

        function saveGameData() {
            try {
                const data = loadGameData();
                const today = new Date().toISOString().split('T')[0];
                
                // Update player data
                if (!data.players[gameState.currentPlayer]) {
                    data.players[gameState.currentPlayer] = {
                        name: gameState.currentPlayer,
                        highestScore: 0,
                        totalGames: 0,
                        totalScore: 0,
                        lastPlayed: today
                    };
                }
                
                const player = data.players[gameState.currentPlayer];
                player.highestScore = Math.max(player.highestScore, gameState.score);
                player.totalGames++;
                player.totalScore += gameState.score;
                player.lastPlayed = today;
                
                // Add game record
                data.games.push({
                    player: gameState.currentPlayer,
                    score: gameState.score,
                    correctAnswers: gameState.correctAnswers,
                    totalQuestions: questionPool.length,
                    date: new Date().toISOString(),
                    timeSpent: 600 - gameState.timeRemaining
                });
                
                localStorage.setItem('ethnomath_game_data', JSON.stringify(data));
            } catch (error) {
                console.log('Save game data error:', error);
            }
        }

        // Host Dashboard Functions
        function updateHostDashboard() {
            const data = loadGameData();
            
            // Calculate statistics
            const totalPlayers = Object.keys(data.players || {}).length;
            const totalGames = (data.games || []).length;
            const averageScore = totalGames > 0 ? Math.round(data.games.reduce((sum, game) => sum + (game.score || 0), 0) / totalGames) : 0;
            const highestScore = data.games && data.games.length > 0 ? Math.max(...data.games.map(game => game.score || 0)) : 0;
            
            // Update dashboard stats
            document.getElementById('totalPlayers').textContent = totalPlayers;
            document.getElementById('totalGames').textContent = totalGames;
            document.getElementById('averageScore').textContent = averageScore;
            document.getElementById('highestScore').textContent = highestScore;
            
            // Calculate additional stats
            const today = new Date().toISOString().split('T')[0];
            const todayGames = (data.games || []).filter(game => game.date && game.date.startsWith(today));
            const activeToday = new Set(todayGames.map(game => game.player)).size;
            
            const correctAnswers = (data.games || []).reduce((sum, game) => sum + (game.correctAnswers || 0), 0);
            const totalQuestions = (data.games || []).reduce((sum, game) => sum + (game.totalQuestions || 0), 0);
            const accuracyRate = totalQuestions > 0 ? Math.round((correctAnswers / totalQuestions) * 100) : 0;
            
            document.getElementById('activeToday').textContent = activeToday;
            document.getElementById('accuracyRate').textContent = accuracyRate + '%';
            document.getElementById('streakRecord').textContent = '5'; // Static for demo
            
            // Update leaderboard and chart
            updateLeaderboard(data);
            renderScoreChart(data);
        }

        function renderScoreChart(data) {
            const chartContainer = document.getElementById('chartContainer');
            if (!chartContainer) return;
            
            const games = data.games || [];
            if (games.length === 0) {
                chartContainer.innerHTML = `
                    <div class="flex flex-col items-center justify-center h-full text-gray-400">
                        <div class="text-6xl mb-4">üìä</div>
                        <p class="text-xl">Belum ada data untuk ditampilkan</p>
                        <p class="text-sm mt-2">Grafik akan muncul setelah ada pemain yang bermain</p>
                    </div>
                `;
                return;
            }
            
            // Group scores into ranges
            const scoreRanges = {
                '0-20': 0,
                '21-40': 0,
                '41-60': 0,
                '61-80': 0,
                '81-100': 0
            };
            
            games.forEach(game => {
                const score = game.score || 0;
                if (score <= 20) scoreRanges['0-20']++;
                else if (score <= 40) scoreRanges['21-40']++;
                else if (score <= 60) scoreRanges['41-60']++;
                else if (score <= 80) scoreRanges['61-80']++;
                else scoreRanges['81-100']++;
            });
            
            const maxCount = Math.max(...Object.values(scoreRanges));
            const colors = ['#ef4444', '#f97316', '#eab308', '#22c55e', '#3b82f6'];
            const emojis = ['üòÖ', 'üòê', 'üôÇ', 'üòä', 'ü§©'];
            
            let chartHTML = '<div class="flex items-end justify-center h-full space-x-4 px-4">';
            
            Object.entries(scoreRanges).forEach(([range, count], index) => {
                const height = maxCount > 0 ? (count / maxCount) * 80 : 0;
                const percentage = games.length > 0 ? Math.round((count / games.length) * 100) : 0;
                
                chartHTML += `
                    <div class="flex flex-col items-center space-y-2">
                        <div class="text-white text-sm font-bold">${count}</div>
                        <div class="relative">
                            <div class="w-12 bg-gradient-to-t from-${colors[index].replace('#', '')} to-${colors[index].replace('#', '')} rounded-t-lg transition-all duration-1000 ease-out" 
                                 style="height: ${height}%; min-height: ${count > 0 ? '20px' : '2px'}; background: linear-gradient(to top, ${colors[index]}, ${colors[index]}aa);"></div>
                        </div>
                        <div class="text-2xl">${emojis[index]}</div>
                        <div class="text-white text-xs font-bold text-center">
                            <div>${range}</div>
                            <div class="text-gray-300">${percentage}%</div>
                        </div>
                    </div>
                `;
            });
            
            chartHTML += '</div>';
            chartContainer.innerHTML = chartHTML;
        }

        function updateLeaderboard(data) {
            const leaderboard = Object.values(data.players || {})
                .sort((a, b) => (b.highestScore || 0) - (a.highestScore || 0))
                .slice(0, 10);
            
            const tableBody = document.getElementById('leaderboardTable');
            tableBody.innerHTML = '';
            
            leaderboard.forEach((player, index) => {
                const row = document.createElement('tr');
                row.className = 'border-b border-white/10 hover:bg-white/5 transition-colors';
                
                const averageScore = (player.totalGames || 0) > 0 ? Math.round((player.totalScore || 0) / player.totalGames) : 0;
                const lastPlayed = player.lastPlayed ? new Date(player.lastPlayed).toLocaleDateString('id-ID') : 'Tidak diketahui';
                
                row.innerHTML = `
                    <td class="py-3 px-4">
                        <span class="text-2xl">${index === 0 ? 'ü•á' : index === 1 ? 'ü•à' : index === 2 ? 'ü•â' : 'üèÖ'}</span>
                        ${index + 1}
                    </td>
                    <td class="py-3 px-4 font-bold">${player.name || 'Pemain'}</td>
                    <td class="py-3 px-4 text-yellow-400 font-bold">${player.highestScore || 0}</td>
                    <td class="py-3 px-4">${player.totalGames || 0}</td>
                    <td class="py-3 px-4">${averageScore}</td>
                    <td class="py-3 px-4 text-sm">${lastPlayed}</td>
                `;
                
                tableBody.appendChild(row);
            });
            
            if (leaderboard.length === 0) {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td colspan="6" class="py-8 px-4 text-center text-gray-400">
                        <div class="text-4xl mb-2">üéÆ</div>
                        Belum ada pemain yang bermain
                    </td>
                `;
                tableBody.appendChild(row);
            }
        }

        // Event Listeners
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize the game
            showHome();
            
            // Initialize music system
            initializeMusic();
            
            // Host password input enter key
            document.getElementById('hostPassword').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    verifyHostPassword();
                }
            });

            // Player name input enter key
            document.getElementById('playerName').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    startGameWithName();
                }
            });

            // Add click sounds to all buttons
            document.querySelectorAll('button').forEach(button => {
                button.addEventListener('click', () => {
                    if (!button.id || !['musicToggle'].includes(button.id)) {
                        playSound('click');
                    }
                });
            });

            // Host dashboard buttons - use event delegation since buttons might not exist yet
            document.addEventListener('click', function(e) {
                if (e.target.id === 'exportBtn' || e.target.closest('#exportBtn')) {
                    e.preventDefault();
                    playSound('click');
                    exportGameData();
                } else if (e.target.id === 'clearBtn' || e.target.closest('#clearBtn')) {
                    e.preventDefault();
                    playSound('click');
                    clearGameData();
                } else if (e.target.id === 'refreshBtn' || e.target.closest('#refreshBtn')) {
                    e.preventDefault();
                    playSound('click');
                    updateHostDashboard();
                }
            });
        });

        // Host Dashboard Button Functions
        function exportGameData() {
            try {
                const data = loadGameData();
                const dataStr = JSON.stringify(data, null, 2);
                const dataBlob = new Blob([dataStr], {type: 'application/json'});
                
                const link = document.createElement('a');
                link.href = URL.createObjectURL(dataBlob);
                link.download = `ethnomath_data_${new Date().toISOString().split('T')[0]}.json`;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                
                // Show success message
                showNotification('‚úÖ Data berhasil diexport!', 'success');
            } catch (error) {
                console.error('Export error:', error);
                showNotification('‚ùå Gagal export data!', 'error');
            }
        }

        function clearGameData() {
            if (confirm('‚ö†Ô∏è Apakah Anda yakin ingin menghapus semua data papan peringkat?\n\nTindakan ini tidak dapat dibatalkan!')) {
                try {
                    localStorage.removeItem('ethnomath_game_data');
                    updateHostDashboard();
                    showNotification('üóëÔ∏è Data papan peringkat berhasil dihapus!', 'success');
                } catch (error) {
                    console.error('Clear data error:', error);
                    showNotification('‚ùå Gagal menghapus data!', 'error');
                }
            }
        }

        function showNotification(message, type) {
            // Create notification element
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 z-50 px-6 py-3 rounded-lg font-bold text-white shadow-lg transform transition-all duration-300 ${
                type === 'success' ? 'bg-green-500' : 'bg-red-500'
            }`;
            notification.textContent = message;
            notification.style.transform = 'translateX(100%)';
            
            document.body.appendChild(notification);
            
            // Animate in
            setTimeout(() => {
                notification.style.transform = 'translateX(0)';
            }, 100);
            
            // Animate out and remove
            setTimeout(() => {
                notification.style.transform = 'translateX(100%)';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.remove();
                    }
                }, 300);
            }, 3000);
        }
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97466836011ffd65',t:'MTc1NjA3NTgxMC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
